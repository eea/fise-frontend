{"ast":null,"code":"import _map from \"lodash/map\";\nimport { v4 as uuid } from 'uuid';\nimport { emptyBlocksForm } from '@plone/volto/helpers';\nimport { getBlocksFieldname, getBlocksLayoutFieldname, blockHasValue } from '@plone/volto/helpers';\nexport const emptyAccordion = count => {\n  const blocks = {};\n  const items = [];\n  for (let x = 0; x < count; x++) {\n    const id = uuid();\n    blocks[id] = emptyBlocksForm();\n    items.push(id);\n  }\n  return {\n    blocks,\n    blocks_layout: {\n      items\n    }\n  };\n};\nexport const getPanels = data => {\n  var _data$blocks_layout;\n  return ((data === null || data === void 0 ? void 0 : (_data$blocks_layout = data.blocks_layout) === null || _data$blocks_layout === void 0 ? void 0 : _data$blocks_layout.items) || []).map(id => {\n    var _data$blocks;\n    return [id, (_data$blocks = data.blocks) === null || _data$blocks === void 0 ? void 0 : _data$blocks[id]];\n  });\n};\nexport const accordionBlockHasValue = content => {\n  const blocksFieldname = getBlocksFieldname(content);\n  const blocksLayoutFieldname = getBlocksLayoutFieldname(content);\n  const blockValue = _map(content[blocksLayoutFieldname].items, block => {\n    var _content$blocksFieldn;\n    const blockData = (_content$blocksFieldn = content[blocksFieldname]) === null || _content$blocksFieldn === void 0 ? void 0 : _content$blocksFieldn[block];\n    return blockHasValue(blockData);\n  });\n  if (content.hasOwnProperty('title') && (content === null || content === void 0 ? void 0 : content.title.length) > 0) return true;\n  return blockValue.some(item => item === true);\n};","map":{"version":3,"names":["v4","uuid","emptyBlocksForm","getBlocksFieldname","getBlocksLayoutFieldname","blockHasValue","emptyAccordion","count","blocks","items","x","id","push","blocks_layout","getPanels","data","map","accordionBlockHasValue","content","blocksFieldname","blocksLayoutFieldname","blockValue","block","blockData","hasOwnProperty","title","length","some","item"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-accordion-block/src/components/manage/Blocks/Accordion/util.js"],"sourcesContent":["import { v4 as uuid } from 'uuid';\nimport { emptyBlocksForm } from '@plone/volto/helpers';\nimport { map } from 'lodash';\n\nimport {\n  getBlocksFieldname,\n  getBlocksLayoutFieldname,\n  blockHasValue,\n} from '@plone/volto/helpers';\n\nexport const emptyAccordion = (count) => {\n  const blocks = {};\n  const items = [];\n  for (let x = 0; x < count; x++) {\n    const id = uuid();\n    blocks[id] = emptyBlocksForm();\n    items.push(id);\n  }\n\n  return {\n    blocks,\n    blocks_layout: {\n      items,\n    },\n  };\n};\n\nexport const getPanels = (data) => {\n  return (data?.blocks_layout?.items || []).map((id) => [\n    id,\n    data.blocks?.[id],\n  ]);\n};\n\nexport const accordionBlockHasValue = (content) => {\n  const blocksFieldname = getBlocksFieldname(content);\n  const blocksLayoutFieldname = getBlocksLayoutFieldname(content);\n  const blockValue = map(content[blocksLayoutFieldname].items, (block) => {\n    const blockData = content[blocksFieldname]?.[block];\n    return blockHasValue(blockData);\n  });\n  if (content.hasOwnProperty('title') && content?.title.length > 0) return true;\n  return blockValue.some((item) => item === true);\n};\n"],"mappings":";AAAA,SAASA,EAAE,IAAIC,IAAI,QAAQ,MAAM;AACjC,SAASC,eAAe,QAAQ,sBAAsB;AAGtD,SACEC,kBAAkB,EAClBC,wBAAwB,EACxBC,aAAa,QACR,sBAAsB;AAE7B,OAAO,MAAMC,cAAc,GAAIC,KAAK,IAAK;EACvC,MAAMC,MAAM,GAAG,CAAC,CAAC;EACjB,MAAMC,KAAK,GAAG,EAAE;EAChB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,KAAK,EAAEG,CAAC,EAAE,EAAE;IAC9B,MAAMC,EAAE,GAAGV,IAAI,EAAE;IACjBO,MAAM,CAACG,EAAE,CAAC,GAAGT,eAAe,EAAE;IAC9BO,KAAK,CAACG,IAAI,CAACD,EAAE,CAAC;EAChB;EAEA,OAAO;IACLH,MAAM;IACNK,aAAa,EAAE;MACbJ;IACF;EACF,CAAC;AACH,CAAC;AAED,OAAO,MAAMK,SAAS,GAAIC,IAAI,IAAK;EAAA;EACjC,OAAO,CAAC,CAAAA,IAAI,aAAJA,IAAI,8CAAJA,IAAI,CAAEF,aAAa,wDAAnB,oBAAqBJ,KAAK,KAAI,EAAE,EAAEO,GAAG,CAAEL,EAAE;IAAA;IAAA,OAAK,CACpDA,EAAE,kBACFI,IAAI,CAACP,MAAM,iDAAX,aAAcG,EAAE,CAAC,CAClB;EAAA,EAAC;AACJ,CAAC;AAED,OAAO,MAAMM,sBAAsB,GAAIC,OAAO,IAAK;EACjD,MAAMC,eAAe,GAAGhB,kBAAkB,CAACe,OAAO,CAAC;EACnD,MAAME,qBAAqB,GAAGhB,wBAAwB,CAACc,OAAO,CAAC;EAC/D,MAAMG,UAAU,GAAG,KAAIH,OAAO,CAACE,qBAAqB,CAAC,CAACX,KAAK,EAAGa,KAAK,IAAK;IAAA;IACtE,MAAMC,SAAS,4BAAGL,OAAO,CAACC,eAAe,CAAC,0DAAxB,sBAA2BG,KAAK,CAAC;IACnD,OAAOjB,aAAa,CAACkB,SAAS,CAAC;EACjC,CAAC,CAAC;EACF,IAAIL,OAAO,CAACM,cAAc,CAAC,OAAO,CAAC,IAAI,CAAAN,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEO,KAAK,CAACC,MAAM,IAAG,CAAC,EAAE,OAAO,IAAI;EAC7E,OAAOL,UAAU,CAACM,IAAI,CAAEC,IAAI,IAAKA,IAAI,KAAK,IAAI,CAAC;AACjD,CAAC"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}