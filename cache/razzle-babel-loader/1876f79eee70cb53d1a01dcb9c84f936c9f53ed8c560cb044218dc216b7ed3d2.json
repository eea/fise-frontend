{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nconst SourceSchema = {\n  title: 'Source',\n  fieldsets: [{\n    id: 'default',\n    title: 'Default',\n    fields: ['source', 'source_link']\n  }],\n  properties: {\n    source: {\n      type: 'string',\n      title: 'Source'\n    },\n    source_link: {\n      type: 'string',\n      title: 'Link'\n    }\n  },\n  required: ['source']\n};\nconst getSchema = (props, config, templateSchema = {}) => {\n  var _config$blocks$blocks, _templateSchema$field, _templateSchema$field2;\n  const blocksConfig = ((_config$blocks$blocks = config.blocks.blocksConfig.custom_connected_block) === null || _config$blocks$blocks === void 0 ? void 0 : _config$blocks$blocks.blocks) || {};\n  const blocks = Object.keys(blocksConfig).map(block => [block, blocksConfig[block].title || block]);\n  const defaultFieldset = ((_templateSchema$field = templateSchema.fieldsets) === null || _templateSchema$field === void 0 ? void 0 : _templateSchema$field.filter(fieldset => fieldset.id === 'default')[0]) || {};\n  return {\n    title: templateSchema.title || 'Edit custom connected block',\n    fieldsets: [{\n      id: 'default',\n      title: 'Default',\n      fields: ['provider_url', 'allowedParams', 'placeholder', 'type', ...((defaultFieldset === null || defaultFieldset === void 0 ? void 0 : defaultFieldset.fields) || [])]\n    }, ...(((_templateSchema$field2 = templateSchema.fieldsets) === null || _templateSchema$field2 === void 0 ? void 0 : _templateSchema$field2.filter(fieldset => fieldset.id !== 'default')) || []), {\n      id: 'sources',\n      title: 'Sources',\n      fields: ['sources']\n    }],\n    properties: _objectSpread({\n      provider_url: {\n        title: 'Data provider',\n        widget: 'object_by_path'\n      },\n      allowedParams: {\n        title: 'Allowed params',\n        type: 'array',\n        items: {\n          choices: []\n        }\n      },\n      placeholder: {\n        title: 'Placeholder',\n        widget: 'textarea'\n      },\n      type: {\n        title: 'Select block type',\n        type: 'array',\n        choices: [...blocks]\n      },\n      sources: {\n        widget: 'object_list',\n        title: 'Sources',\n        schema: SourceSchema\n      }\n    }, templateSchema.properties || {}),\n    required: ['url', ...(templateSchema.required || [])]\n  };\n};\nexport default getSchema;","map":{"version":3,"names":["SourceSchema","title","fieldsets","id","fields","properties","source","type","source_link","required","getSchema","props","config","templateSchema","blocksConfig","blocks","custom_connected_block","Object","keys","map","block","defaultFieldset","filter","fieldset","provider_url","widget","allowedParams","items","choices","placeholder","sources","schema"],"sources":["/home/tooler/code/work/forests-frontend/src/develop/volto-datablocks/src/components/manage/Blocks/CustomConnectedBlock/schema.js"],"sourcesContent":["const SourceSchema = {\n  title: 'Source',\n\n  fieldsets: [\n    {\n      id: 'default',\n      title: 'Default',\n      fields: ['source', 'source_link'],\n    },\n  ],\n\n  properties: {\n    source: {\n      type: 'string',\n      title: 'Source',\n    },\n    source_link: {\n      type: 'string',\n      title: 'Link',\n    },\n  },\n\n  required: ['source'],\n};\n\nconst getSchema = (props, config, templateSchema = {}) => {\n  const blocksConfig =\n    config.blocks.blocksConfig.custom_connected_block?.blocks || {};\n  const blocks = Object.keys(blocksConfig).map((block) => [\n    block,\n    blocksConfig[block].title || block,\n  ]);\n  const defaultFieldset =\n    templateSchema.fieldsets?.filter(\n      (fieldset) => fieldset.id === 'default',\n    )[0] || {};\n\n  return {\n    title: templateSchema.title || 'Edit custom connected block',\n    fieldsets: [\n      {\n        id: 'default',\n        title: 'Default',\n        fields: [\n          'provider_url',\n          'allowedParams',\n          'placeholder',\n          'type',\n          ...(defaultFieldset?.fields || []),\n        ],\n      },\n      ...(templateSchema.fieldsets?.filter(\n        (fieldset) => fieldset.id !== 'default',\n      ) || []),\n      {\n        id: 'sources',\n        title: 'Sources',\n        fields: ['sources'],\n      },\n    ],\n\n    properties: {\n      provider_url: {\n        title: 'Data provider',\n        widget: 'object_by_path',\n      },\n      allowedParams: {\n        title: 'Allowed params',\n        type: 'array',\n        items: {\n          choices: [],\n        },\n      },\n      placeholder: {\n        title: 'Placeholder',\n        widget: 'textarea',\n      },\n      type: {\n        title: 'Select block type',\n        type: 'array',\n        choices: [...blocks],\n      },\n      sources: {\n        widget: 'object_list',\n        title: 'Sources',\n        schema: SourceSchema,\n      },\n      ...(templateSchema.properties || {}),\n    },\n\n    required: ['url', ...(templateSchema.required || [])],\n  };\n};\n\nexport default getSchema;\n"],"mappings":";;;AAAA,MAAMA,YAAY,GAAG;EACnBC,KAAK,EAAE,QAAQ;EAEfC,SAAS,EAAE,CACT;IACEC,EAAE,EAAE,SAAS;IACbF,KAAK,EAAE,SAAS;IAChBG,MAAM,EAAE,CAAC,QAAQ,EAAE,aAAa;EAClC,CAAC,CACF;EAEDC,UAAU,EAAE;IACVC,MAAM,EAAE;MACNC,IAAI,EAAE,QAAQ;MACdN,KAAK,EAAE;IACT,CAAC;IACDO,WAAW,EAAE;MACXD,IAAI,EAAE,QAAQ;MACdN,KAAK,EAAE;IACT;EACF,CAAC;EAEDQ,QAAQ,EAAE,CAAC,QAAQ;AACrB,CAAC;AAED,MAAMC,SAAS,GAAG,CAACC,KAAK,EAAEC,MAAM,EAAEC,cAAc,GAAG,CAAC,CAAC,KAAK;EAAA;EACxD,MAAMC,YAAY,GAChB,0BAAAF,MAAM,CAACG,MAAM,CAACD,YAAY,CAACE,sBAAsB,0DAAjD,sBAAmDD,MAAM,KAAI,CAAC,CAAC;EACjE,MAAMA,MAAM,GAAGE,MAAM,CAACC,IAAI,CAACJ,YAAY,CAAC,CAACK,GAAG,CAAEC,KAAK,IAAK,CACtDA,KAAK,EACLN,YAAY,CAACM,KAAK,CAAC,CAACnB,KAAK,IAAImB,KAAK,CACnC,CAAC;EACF,MAAMC,eAAe,GACnB,0BAAAR,cAAc,CAACX,SAAS,0DAAxB,sBAA0BoB,MAAM,CAC7BC,QAAQ,IAAKA,QAAQ,CAACpB,EAAE,KAAK,SAAS,CACxC,CAAC,CAAC,CAAC,KAAI,CAAC,CAAC;EAEZ,OAAO;IACLF,KAAK,EAAEY,cAAc,CAACZ,KAAK,IAAI,6BAA6B;IAC5DC,SAAS,EAAE,CACT;MACEC,EAAE,EAAE,SAAS;MACbF,KAAK,EAAE,SAAS;MAChBG,MAAM,EAAE,CACN,cAAc,EACd,eAAe,EACf,aAAa,EACb,MAAM,EACN,IAAI,CAAAiB,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEjB,MAAM,KAAI,EAAE,CAAC;IAEtC,CAAC,EACD,IAAI,2BAAAS,cAAc,CAACX,SAAS,2DAAxB,uBAA0BoB,MAAM,CACjCC,QAAQ,IAAKA,QAAQ,CAACpB,EAAE,KAAK,SAAS,CACxC,KAAI,EAAE,CAAC,EACR;MACEA,EAAE,EAAE,SAAS;MACbF,KAAK,EAAE,SAAS;MAChBG,MAAM,EAAE,CAAC,SAAS;IACpB,CAAC,CACF;IAEDC,UAAU;MACRmB,YAAY,EAAE;QACZvB,KAAK,EAAE,eAAe;QACtBwB,MAAM,EAAE;MACV,CAAC;MACDC,aAAa,EAAE;QACbzB,KAAK,EAAE,gBAAgB;QACvBM,IAAI,EAAE,OAAO;QACboB,KAAK,EAAE;UACLC,OAAO,EAAE;QACX;MACF,CAAC;MACDC,WAAW,EAAE;QACX5B,KAAK,EAAE,aAAa;QACpBwB,MAAM,EAAE;MACV,CAAC;MACDlB,IAAI,EAAE;QACJN,KAAK,EAAE,mBAAmB;QAC1BM,IAAI,EAAE,OAAO;QACbqB,OAAO,EAAE,CAAC,GAAGb,MAAM;MACrB,CAAC;MACDe,OAAO,EAAE;QACPL,MAAM,EAAE,aAAa;QACrBxB,KAAK,EAAE,SAAS;QAChB8B,MAAM,EAAE/B;MACV;IAAC,GACGa,cAAc,CAACR,UAAU,IAAI,CAAC,CAAC,CACpC;IAEDI,QAAQ,EAAE,CAAC,KAAK,EAAE,IAAII,cAAc,CAACJ,QAAQ,IAAI,EAAE,CAAC;EACtD,CAAC;AACH,CAAC;AAED,eAAeC,SAAS"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}