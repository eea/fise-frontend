{"ast":null,"code":"import _inherits from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _classCallCheck from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { toDate } from '@plone/volto/helpers/Utils/Date';\nexport var BasicModel = /*#__PURE__*/function () {\n  function BasicModel(record) {\n    _classCallCheck(this, BasicModel);\n    var basic = {\n      _original: record\n    };\n    return new Proxy(basic, this);\n  }\n  _createClass(BasicModel, [{\n    key: \"get\",\n    value: function get(target, name) {\n      // console.log('get', target, name);\n      if (target.hasOwnProperty(name)) {\n        // console.log('hasOwn', name);\n        return target[name];\n      }\n      var proto = Object.getPrototypeOf(this);\n      var descriptors = Object.getOwnPropertyDescriptors(proto);\n      if (descriptors[name] && descriptors[name].get) {\n        var value = descriptors[name].get.bind(target).apply();\n        delete target[name];\n        target[name] = value;\n        return target[name];\n      } else {\n        return target._original[name];\n      }\n    }\n  }]);\n  return BasicModel;\n}();\n\n// One day in milliseconds\nvar oneDay = 1000 * 60 * 60 * 24;\nvar diffDates = function diffDates(start, end) {\n  return Math.round((end.getTime() - start.getTime()) / oneDay);\n};\nvar daysSinceIssued = function daysSinceIssued(item) {\n  var raw = item['EffectiveDate'];\n  if (!raw || raw === 'None') return Infinity;\n  var res = diffDates(toDate(raw), new Date());\n  return res;\n};\nexport var Item = /*#__PURE__*/function (_BasicModel) {\n  _inherits(Item, _BasicModel);\n  var _super = _createSuper(Item);\n  function Item() {\n    _classCallCheck(this, Item);\n    return _super.apply(this, arguments);\n  }\n  _createClass(Item, [{\n    key: \"daysSinceIssued\",\n    get: function get() {\n      return daysSinceIssued(this._original);\n    }\n  }, {\n    key: \"isNew\",\n    get: function get() {\n      var days = daysSinceIssued(this._original);\n      return days < 30;\n    }\n  }, {\n    key: \"issued\",\n    get: function get() {\n      var raw = this._original['EffectiveDate'];\n      return raw && raw !== 'None' ? toDate(raw) : null;\n    }\n  }, {\n    key: \"expires\",\n    get: function get() {\n      var raw = this._original['ExpirationDate'];\n      return raw && raw !== 'None' ? toDate(raw) : null;\n    }\n  }, {\n    key: \"isExpired\",\n    get: function get() {\n      var raw = this._original['ExpirationDate'];\n      if (!raw || raw === 'None') return null;\n      var date = toDate(raw);\n      return date < new Date();\n    }\n  }]);\n  return Item;\n}(BasicModel);","map":{"version":3,"names":["toDate","BasicModel","record","basic","_original","Proxy","target","name","hasOwnProperty","proto","Object","getPrototypeOf","descriptors","getOwnPropertyDescriptors","get","value","bind","apply","oneDay","diffDates","start","end","Math","round","getTime","daysSinceIssued","item","raw","Infinity","res","Date","Item","days","date"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-listing-block/src/components/UniversalItem/model.js"],"sourcesContent":["import { toDate } from '@plone/volto/helpers/Utils/Date';\n\nexport class BasicModel {\n  constructor(record) {\n    const basic = {\n      _original: record,\n    };\n\n    return new Proxy(basic, this);\n  }\n\n  get(target, name) {\n    // console.log('get', target, name);\n    if (target.hasOwnProperty(name)) {\n      // console.log('hasOwn', name);\n      return target[name];\n    }\n\n    const proto = Object.getPrototypeOf(this);\n    const descriptors = Object.getOwnPropertyDescriptors(proto);\n\n    if (descriptors[name] && descriptors[name].get) {\n      const value = descriptors[name].get.bind(target).apply();\n      delete target[name];\n      target[name] = value;\n      return target[name];\n    } else {\n      return target._original[name];\n    }\n  }\n}\n\n// One day in milliseconds\nconst oneDay = 1000 * 60 * 60 * 24;\n\nconst diffDates = (start, end) =>\n  Math.round((end.getTime() - start.getTime()) / oneDay);\n\nconst daysSinceIssued = (item) => {\n  const raw = item['EffectiveDate'];\n  if (!raw || raw === 'None') return Infinity;\n\n  const res = diffDates(toDate(raw), new Date());\n\n  return res;\n};\n\nexport class Item extends BasicModel {\n  get daysSinceIssued() {\n    return daysSinceIssued(this._original);\n  }\n\n  get isNew() {\n    const days = daysSinceIssued(this._original);\n    return days < 30;\n  }\n\n  get issued() {\n    const raw = this._original['EffectiveDate'];\n    return raw && raw !== 'None' ? toDate(raw) : null;\n  }\n\n  get expires() {\n    const raw = this._original['ExpirationDate'];\n    return raw && raw !== 'None' ? toDate(raw) : null;\n  }\n  get isExpired() {\n    const raw = this._original['ExpirationDate'];\n    if (!raw || raw === 'None') return null;\n\n    const date = toDate(raw);\n    return date < new Date();\n  }\n}\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}