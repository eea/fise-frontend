{"ast":null,"code":"var _jsxFileName = \"/home/tooler/code/work/forests-frontend/src/develop/volto-datablocks/src/components/theme/DataConnector/View.jsx\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { compose } from 'redux';\nimport { Container } from 'semantic-ui-react';\nimport { Icon } from '@plone/volto/components';\nimport { flattenToAppURL } from '@plone/volto/helpers';\nimport { Table, Menu, Loader } from 'semantic-ui-react';\nimport { connectToProviderData } from '@eeacms/volto-datablocks/hocs';\nimport leftSVG from '@plone/volto/icons/left-key.svg';\nimport rightSVG from '@plone/volto/icons/right-key.svg';\nimport './styles.less';\nconst getProviderDataLength = provider_data => {\n  var _provider_data$Object;\n  return provider_data ? ((_provider_data$Object = provider_data[Object.keys(provider_data)[0]]) === null || _provider_data$Object === void 0 ? void 0 : _provider_data$Object.length) || 0 : 0;\n};\nconst DataConnectorView = props => {\n  const {\n    content,\n    pagination = {},\n    updatePagination\n  } = props;\n  const prev_provider_data = pagination.data[pagination.activePage] ? pagination.data[pagination.activePage] : pagination.activePage !== pagination.prevPage ? pagination.data[pagination.prevPage] : null;\n  const provider_data = props.provider_data || prev_provider_data;\n  const prev_provider_data_length = getProviderDataLength(prev_provider_data);\n  const provider_data_length = getProviderDataLength(provider_data);\n  const row_size = !Object.keys(pagination.data).includes(pagination.activePage) ? prev_provider_data_length : Math.min(pagination.itemsPerPage, provider_data_length) || 0;\n  const columns = Object.keys(provider_data || {});\n  return __jsx(Container, {\n    className: \"data-connector-view\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 5\n    }\n  }, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }\n  }, content.title), __jsx(\"pre\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, content.sql_query), __jsx(\"pre\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }, content.Readme), __jsx(\"div\", {\n    style: {\n      overflow: 'auto',\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }, row_size ? __jsx(Table, {\n    textAlign: \"left\",\n    striped: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 11\n    }\n  }, __jsx(Table.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }\n  }, __jsx(Table.Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 15\n    }\n  }, columns.map(column => __jsx(Table.HeaderCell, {\n    key: column,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 19\n    }\n  }, column)))), __jsx(Table.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, Array(Math.max(0, row_size)).fill().map((_, i) => __jsx(Table.Row, {\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 19\n    }\n  }, columns.map((column, j) => __jsx(Table.Cell, {\n    key: `${i}-${column}}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 23\n    }\n  }, provider_data[column][i]))))), __jsx(Table.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }, __jsx(Table.Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 15\n    }\n  }, __jsx(Table.HeaderCell, {\n    colSpan: columns.length,\n    style: {\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }\n  }, __jsx(Menu, {\n    pagination: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 19\n    }\n  }, __jsx(Menu.Item, {\n    as: \"a\",\n    icon: true,\n    disabled: props.loadingProviderData || pagination.activePage === 1,\n    onClick: () => {\n      if (pagination.activePage > 1) {\n        updatePagination({\n          activePage: pagination.activePage - 1\n        });\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }, __jsx(Icon, {\n    name: leftSVG,\n    size: \"24px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 23\n    }\n  })), __jsx(Menu.Item, {\n    fitted: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }, __jsx(Loader, {\n    disabled: !props.loadingProviderData,\n    active: true,\n    inline: true,\n    size: \"tiny\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 23\n    }\n  })), __jsx(Menu.Item, {\n    as: \"a\",\n    icon: true,\n    disabled: props.loadingProviderData || pagination.activePage === pagination.lastPage,\n    onClick: () => {\n      if (row_size === pagination.itemsPerPage) {\n        updatePagination({\n          activePage: pagination.activePage + 1\n        });\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  }, __jsx(Icon, {\n    name: rightSVG,\n    size: \"24px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 23\n    }\n  }))))))) : __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, \"No data\")));\n};\nexport default compose(connectToProviderData(props => {\n  return {\n    provider_url: flattenToAppURL(props.location.pathname || '').replace(/\\/$/, ''),\n    pagination: {\n      enabled: true,\n      itemsPerPage: 14\n    }\n  };\n}))(DataConnectorView);","map":{"version":3,"names":["React","compose","Container","Icon","flattenToAppURL","Table","Menu","Loader","connectToProviderData","leftSVG","rightSVG","getProviderDataLength","provider_data","Object","keys","length","DataConnectorView","props","content","pagination","updatePagination","prev_provider_data","data","activePage","prevPage","prev_provider_data_length","provider_data_length","row_size","includes","Math","min","itemsPerPage","columns","title","sql_query","Readme","overflow","width","map","column","Array","max","fill","_","i","j","textAlign","loadingProviderData","lastPage","provider_url","location","pathname","replace","enabled"],"sources":["/home/tooler/code/work/forests-frontend/src/develop/volto-datablocks/src/components/theme/DataConnector/View.jsx"],"sourcesContent":["import React from 'react';\nimport { compose } from 'redux';\nimport { Container } from 'semantic-ui-react';\nimport { Icon } from '@plone/volto/components';\nimport { flattenToAppURL } from '@plone/volto/helpers';\nimport { Table, Menu, Loader } from 'semantic-ui-react';\nimport { connectToProviderData } from '@eeacms/volto-datablocks/hocs';\n\nimport leftSVG from '@plone/volto/icons/left-key.svg';\nimport rightSVG from '@plone/volto/icons/right-key.svg';\n\nimport './styles.less';\n\nconst getProviderDataLength = (provider_data) => {\n  return provider_data\n    ? provider_data[Object.keys(provider_data)[0]]?.length || 0\n    : 0;\n};\n\nconst DataConnectorView = (props) => {\n  const { content, pagination = {}, updatePagination } = props;\n\n  const prev_provider_data = pagination.data[pagination.activePage]\n    ? pagination.data[pagination.activePage]\n    : pagination.activePage !== pagination.prevPage\n    ? pagination.data[pagination.prevPage]\n    : null;\n  const provider_data = props.provider_data || prev_provider_data;\n  const prev_provider_data_length = getProviderDataLength(prev_provider_data);\n  const provider_data_length = getProviderDataLength(provider_data);\n\n  const row_size = !Object.keys(pagination.data).includes(pagination.activePage)\n    ? prev_provider_data_length\n    : Math.min(pagination.itemsPerPage, provider_data_length) || 0;\n\n  const columns = Object.keys(provider_data || {});\n\n  return (\n    <Container className=\"data-connector-view\">\n      <h2>{content.title}</h2>\n      <pre>{content.sql_query}</pre>\n      <pre>{content.Readme}</pre>\n      <div style={{ overflow: 'auto', width: '100%' }}>\n        {row_size ? (\n          <Table textAlign=\"left\" striped>\n            <Table.Header>\n              <Table.Row>\n                {columns.map((column) => (\n                  <Table.HeaderCell key={column}>{column}</Table.HeaderCell>\n                ))}\n              </Table.Row>\n            </Table.Header>\n            <Table.Body>\n              {Array(Math.max(0, row_size))\n                .fill()\n                .map((_, i) => (\n                  <Table.Row key={i}>\n                    {columns.map((column, j) => (\n                      <Table.Cell key={`${i}-${column}}`}>\n                        {provider_data[column][i]}\n                      </Table.Cell>\n                    ))}\n                  </Table.Row>\n                ))}\n            </Table.Body>\n            <Table.Footer>\n              <Table.Row>\n                <Table.HeaderCell\n                  colSpan={columns.length}\n                  style={{ textAlign: 'center' }}\n                >\n                  <Menu pagination>\n                    <Menu.Item\n                      as=\"a\"\n                      icon\n                      disabled={\n                        props.loadingProviderData || pagination.activePage === 1\n                      }\n                      onClick={() => {\n                        if (pagination.activePage > 1) {\n                          updatePagination({\n                            activePage: pagination.activePage - 1,\n                          });\n                        }\n                      }}\n                    >\n                      <Icon name={leftSVG} size=\"24px\" />\n                    </Menu.Item>\n                    <Menu.Item fitted>\n                      <Loader\n                        disabled={!props.loadingProviderData}\n                        active\n                        inline\n                        size=\"tiny\"\n                      />\n                    </Menu.Item>\n                    <Menu.Item\n                      as=\"a\"\n                      icon\n                      disabled={\n                        props.loadingProviderData ||\n                        pagination.activePage === pagination.lastPage\n                      }\n                      onClick={() => {\n                        if (row_size === pagination.itemsPerPage) {\n                          updatePagination({\n                            activePage: pagination.activePage + 1,\n                          });\n                        }\n                      }}\n                    >\n                      <Icon name={rightSVG} size=\"24px\" />\n                    </Menu.Item>\n                  </Menu>\n                </Table.HeaderCell>\n              </Table.Row>\n            </Table.Footer>\n          </Table>\n        ) : (\n          <p>No data</p>\n        )}\n      </div>\n    </Container>\n  );\n};\n\nexport default compose(\n  connectToProviderData((props) => {\n    return {\n      provider_url: flattenToAppURL(props.location.pathname || '').replace(\n        /\\/$/,\n        '',\n      ),\n      pagination: {\n        enabled: true,\n        itemsPerPage: 14,\n      },\n    };\n  }),\n)(DataConnectorView);\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}