{"ast":null,"code":"var _jsxFileName = \"/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-forests-theme/src/components/manage/Blocks/SimpleDataTable/templates/expandable/Edit.jsx\";\nvar __jsx = React.createElement;\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nimport React, { Component } from 'react';\nimport { compose } from 'redux';\nimport { SidebarPortal } from '@plone/volto/components'; // EditBlock\nimport InlineForm from '@plone/volto/components/manage/Form/InlineForm';\nimport config from '@plone/volto/registry';\nimport { connectToMultipleProviders } from '@eeacms/volto-datablocks/hocs';\nimport { SimpleDataTableSchema } from '@eeacms/volto-datablocks/components/manage/Blocks/SimpleDataTable/schema';\nimport { SimpleDataTableView } from '@eeacms/volto-datablocks/components/manage/Blocks/SimpleDataTable/View';\nclass Edit extends Component {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"getSchema\", () => {\n      var _config$blocks$blocks, _config$blocks$blocks2, _config$blocks$blocks3, _this$props$data;\n      const template = this.props.data.template || 'default';\n      const templateSchema = ((_config$blocks$blocks = config.blocks.blocksConfig.simpleDataConnectedTable) === null || _config$blocks$blocks === void 0 ? void 0 : (_config$blocks$blocks2 = _config$blocks$blocks.templates) === null || _config$blocks$blocks2 === void 0 ? void 0 : (_config$blocks$blocks3 = _config$blocks$blocks2[template]) === null || _config$blocks$blocks3 === void 0 ? void 0 : _config$blocks$blocks3.schema) || {};\n      const schema = SimpleDataTableSchema(config, templateSchema(config));\n      const provider_url = (_this$props$data = this.props.data) === null || _this$props$data === void 0 ? void 0 : _this$props$data.provider_url;\n      const provider_data = provider_url ? this.props.providers_data[provider_url] : '';\n      if (!provider_data) return schema;\n      const choices = Array.from(Object.keys(provider_data).sort()).map(n => [n, n]);\n      schema.properties.columns.schema.properties.column.choices = choices;\n      schema.properties.columns.schema.properties.column_link.choices = choices;\n      const map_provider_url = this.props.data.popup_map_provider_url ? this.props.data.popup_map_provider_url : '';\n      const table_provider_url = this.props.data.popup_table_provider_url ? this.props.data.popup_table_provider_url : '';\n      const map_provider_data = this.props.providers_data && this.props.providers_data[map_provider_url] ? this.props.providers_data[map_provider_url] : '';\n      const table_provider_data = this.props.providers_data && this.props.providers_data[table_provider_url] ? this.props.providers_data[table_provider_url] : '';\n      const mapChoices = map_provider_data ? Array.from(Object.keys(map_provider_data).sort()).map(n => [n, n]) : [];\n      const tableChoices = table_provider_data ? Array.from(Object.keys(table_provider_data).sort()).map(n => [n, n]) : [];\n      schema.properties.popup_data_query.choices = choices;\n      schema.properties.image_url.choices = choices;\n      schema.properties.popupTitle.choices = choices;\n      schema.properties.popupDescription.choices = choices;\n      schema.properties.popupUrl.choices = choices;\n      schema.properties.popupEmail.choices = choices;\n      schema.properties.defaultSortColumn.choices = choices;\n\n      //set choices for the popup table columns\n      schema.properties.popupTableColumns.schema.properties.column.choices = tableChoices;\n      schema.properties.popupTableColumns.schema.properties.column_link.choices = tableChoices;\n\n      //set choices for the popup map\n      schema.properties.popupLong.choices = mapChoices;\n      schema.properties.popupLat.choices = mapChoices;\n      // schema.properties.popupCountryCode.choices = mapChoices;\n      // schema.properties.popupMapLabel.choices = mapChoices;\n\n      return schema;\n    });\n  }\n  render() {\n    const schema = this.getSchema();\n    return __jsx(React.Fragment, null, __jsx(SimpleDataTableView, _extends({}, this.props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }\n    })), __jsx(SidebarPortal, {\n      selected: this.props.selected,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }\n    }, __jsx(InlineForm, {\n      schema: this.getSchema(),\n      title: schema.title,\n      onChangeField: (id, value) => {\n        this.props.onChangeBlock(this.props.block, _objectSpread(_objectSpread({}, this.props.data), {}, {\n          [id]: value\n        }));\n      },\n      formData: this.props.data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }\n    })));\n  }\n}\nexport default compose(connectToMultipleProviders(props => {\n  const {\n    provider_url,\n    popup_map_provider_url,\n    popup_table_provider_url\n  } = props.data;\n  const providers = [{\n    provider_url: provider_url\n  }, {\n    provider_url: popup_map_provider_url\n  }, {\n    provider_url: popup_table_provider_url\n  }];\n  return {\n    providers\n  };\n}))(Edit);","map":{"version":3,"names":["React","Component","compose","SidebarPortal","InlineForm","config","connectToMultipleProviders","SimpleDataTableSchema","SimpleDataTableView","Edit","template","props","data","templateSchema","blocks","blocksConfig","simpleDataConnectedTable","templates","schema","provider_url","provider_data","providers_data","choices","Array","from","Object","keys","sort","map","n","properties","columns","column","column_link","map_provider_url","popup_map_provider_url","table_provider_url","popup_table_provider_url","map_provider_data","table_provider_data","mapChoices","tableChoices","popup_data_query","image_url","popupTitle","popupDescription","popupUrl","popupEmail","defaultSortColumn","popupTableColumns","popupLong","popupLat","render","getSchema","selected","title","id","value","onChangeBlock","block","providers"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-forests-theme/src/components/manage/Blocks/SimpleDataTable/templates/expandable/Edit.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { compose } from 'redux';\nimport { SidebarPortal } from '@plone/volto/components'; // EditBlock\nimport InlineForm from '@plone/volto/components/manage/Form/InlineForm';\n\nimport config from '@plone/volto/registry';\n\nimport { connectToMultipleProviders } from '@eeacms/volto-datablocks/hocs';\n\nimport { SimpleDataTableSchema } from '@eeacms/volto-datablocks/components/manage/Blocks/SimpleDataTable/schema';\nimport { SimpleDataTableView } from '@eeacms/volto-datablocks/components/manage/Blocks/SimpleDataTable/View';\n\nclass Edit extends Component {\n  getSchema = () => {\n    const template = this.props.data.template || 'default';\n    const templateSchema =\n      config.blocks.blocksConfig.simpleDataConnectedTable?.templates?.[template]\n        ?.schema || {};\n\n    const schema = SimpleDataTableSchema(config, templateSchema(config));\n\n    const provider_url = this.props.data?.provider_url;\n    const provider_data = provider_url\n      ? this.props.providers_data[provider_url]\n      : '';\n\n    if (!provider_data) return schema;\n\n    const choices = Array.from(Object.keys(provider_data).sort()).map((n) => [\n      n,\n      n,\n    ]);\n\n    schema.properties.columns.schema.properties.column.choices = choices;\n    schema.properties.columns.schema.properties.column_link.choices = choices;\n\n    const map_provider_url = this.props.data.popup_map_provider_url\n      ? this.props.data.popup_map_provider_url\n      : '';\n    const table_provider_url = this.props.data.popup_table_provider_url\n      ? this.props.data.popup_table_provider_url\n      : '';\n\n    const map_provider_data =\n      this.props.providers_data && this.props.providers_data[map_provider_url]\n        ? this.props.providers_data[map_provider_url]\n        : '';\n\n    const table_provider_data =\n      this.props.providers_data && this.props.providers_data[table_provider_url]\n        ? this.props.providers_data[table_provider_url]\n        : '';\n\n    const mapChoices = map_provider_data\n      ? Array.from(Object.keys(map_provider_data).sort()).map((n) => [n, n])\n      : [];\n\n    const tableChoices = table_provider_data\n      ? Array.from(Object.keys(table_provider_data).sort()).map((n) => [n, n])\n      : [];\n    schema.properties.popup_data_query.choices = choices;\n\n    schema.properties.image_url.choices = choices;\n    schema.properties.popupTitle.choices = choices;\n    schema.properties.popupDescription.choices = choices;\n    schema.properties.popupUrl.choices = choices;\n    schema.properties.popupEmail.choices = choices;\n\n    schema.properties.defaultSortColumn.choices = choices;\n\n    //set choices for the popup table columns\n    schema.properties.popupTableColumns.schema.properties.column.choices = tableChoices;\n    schema.properties.popupTableColumns.schema.properties.column_link.choices = tableChoices;\n\n    //set choices for the popup map\n    schema.properties.popupLong.choices = mapChoices;\n    schema.properties.popupLat.choices = mapChoices;\n    // schema.properties.popupCountryCode.choices = mapChoices;\n    // schema.properties.popupMapLabel.choices = mapChoices;\n\n    return schema;\n  };\n\n  render() {\n    const schema = this.getSchema();\n    return (\n      <>\n        <SimpleDataTableView {...this.props} />\n\n        <SidebarPortal selected={this.props.selected}>\n          <InlineForm\n            schema={this.getSchema()}\n            title={schema.title}\n            onChangeField={(id, value) => {\n              this.props.onChangeBlock(this.props.block, {\n                ...this.props.data,\n                [id]: value,\n              });\n            }}\n            formData={this.props.data}\n          />\n        </SidebarPortal>\n      </>\n    );\n  }\n}\n\nexport default compose(\n  connectToMultipleProviders((props) => {\n    const {\n      provider_url,\n      popup_map_provider_url,\n      popup_table_provider_url,\n    } = props.data;\n    const providers = [\n      {\n        provider_url: provider_url,\n      },\n      { provider_url: popup_map_provider_url },\n      { provider_url: popup_table_provider_url },\n    ];\n    return { providers };\n  }),\n)(Edit);\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}