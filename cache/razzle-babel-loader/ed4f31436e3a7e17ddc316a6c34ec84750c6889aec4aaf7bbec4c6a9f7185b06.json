{"ast":null,"code":"import _map from \"lodash/map\";\nimport _groupBy from \"lodash/groupBy\";\nimport _toPairs from \"lodash/toPairs\";\nvar _jsxFileName = \"/home/tooler/code/work/forests-frontend/node_modules/@plone/volto/src/components/manage/Widgets/QuerySortOnWidget.jsx\";\nvar __jsx = React.createElement;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport React from 'react';\nimport { FormFieldWrapper } from '@plone/volto/components';\nimport { defineMessages, useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\nimport { Option, DropdownIndicator, selectTheme, customSelectStyles } from '@plone/volto/components/manage/Widgets/SelectStyling';\nimport { injectLazyLibs } from '@plone/volto/helpers/Loadable/Loadable';\nconst messages = defineMessages({\n  SortOn: {\n    \"id\": \"Sort on\",\n    \"defaultMessage\": \"Sort on\"\n  },\n  NoSelection: {\n    \"id\": \"No selection\",\n    \"defaultMessage\": \"No selection\"\n  }\n});\nfunction QueryStringSortOrderWidget(props) {\n  var _sortable_indexes$val;\n  const {\n    id,\n    value,\n    onChange,\n    reactSelect,\n    isDisabled\n  } = props;\n  const sortable_indexes = useSelector(state => state.querystring.sortable_indexes);\n  const intl = useIntl();\n  const Select = reactSelect.default;\n  return __jsx(FormFieldWrapper, _extends({}, props, {\n    draggable: false,\n    className: \"query-sort-on-widget\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 5\n    }\n  }), __jsx(Select, {\n    id: \"select-listingblock-sort-on\",\n    name: \"select-listingblock-sort-on\",\n    className: \"react-select-container\",\n    classNamePrefix: \"react-select\"\n    // placeholder=\"Select criteria\"\n    ,\n    isDisabled: isDisabled,\n    options: [{\n      label: intl.formatMessage(messages.NoSelection),\n      value: ''\n    }, ..._map(_toPairs(_groupBy(_toPairs(sortable_indexes), item => item[1].group)), group => ({\n      label: group[0],\n      options: _map(group[1], field => ({\n        label: field[1].title,\n        value: field[0]\n      }))\n    }))],\n    styles: customSelectStyles,\n    theme: selectTheme,\n    components: {\n      DropdownIndicator,\n      Option\n    },\n    value: {\n      value: value || '',\n      label: value && sortable_indexes ? (_sortable_indexes$val = sortable_indexes[value]) === null || _sortable_indexes$val === void 0 ? void 0 : _sortable_indexes$val.title : value || intl.formatMessage(messages.NoSelection)\n    },\n    onChange: field => {\n      onChange(id, field.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }\n  }));\n}\nexport default injectLazyLibs(['reactSelect'])(QueryStringSortOrderWidget);","map":{"version":3,"names":["React","FormFieldWrapper","defineMessages","useIntl","useSelector","Option","DropdownIndicator","selectTheme","customSelectStyles","injectLazyLibs","messages","SortOn","NoSelection","QueryStringSortOrderWidget","props","id","value","onChange","reactSelect","isDisabled","sortable_indexes","state","querystring","intl","Select","default","label","formatMessage","item","group","options","field","title"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@plone/volto/src/components/manage/Widgets/QuerySortOnWidget.jsx"],"sourcesContent":["import React from 'react';\nimport { FormFieldWrapper } from '@plone/volto/components';\nimport { toPairs, groupBy, map } from 'lodash';\nimport { defineMessages, useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\n\nimport {\n  Option,\n  DropdownIndicator,\n  selectTheme,\n  customSelectStyles,\n} from '@plone/volto/components/manage/Widgets/SelectStyling';\nimport { injectLazyLibs } from '@plone/volto/helpers/Loadable/Loadable';\n\nconst messages = defineMessages({\n  SortOn: {\n    id: 'Sort on',\n    defaultMessage: 'Sort on',\n  },\n  NoSelection: {\n    id: 'No selection',\n    defaultMessage: 'No selection',\n  },\n});\n\nfunction QueryStringSortOrderWidget(props) {\n  const { id, value, onChange, reactSelect, isDisabled } = props;\n  const sortable_indexes = useSelector(\n    (state) => state.querystring.sortable_indexes,\n  );\n  const intl = useIntl();\n  const Select = reactSelect.default;\n\n  return (\n    <FormFieldWrapper\n      {...props}\n      draggable={false}\n      className=\"query-sort-on-widget\"\n    >\n      <Select\n        id=\"select-listingblock-sort-on\"\n        name=\"select-listingblock-sort-on\"\n        className=\"react-select-container\"\n        classNamePrefix=\"react-select\"\n        // placeholder=\"Select criteria\"\n        isDisabled={isDisabled}\n        options={[\n          {\n            label: intl.formatMessage(messages.NoSelection),\n            value: '',\n          },\n          ...map(\n            toPairs(\n              groupBy(toPairs(sortable_indexes), (item) => item[1].group),\n            ),\n            (group) => ({\n              label: group[0],\n              options: map(group[1], (field) => ({\n                label: field[1].title,\n                value: field[0],\n              })),\n            }),\n          ),\n        ]}\n        styles={customSelectStyles}\n        theme={selectTheme}\n        components={{ DropdownIndicator, Option }}\n        value={{\n          value: value || '',\n          label:\n            value && sortable_indexes\n              ? sortable_indexes[value]?.title\n              : value || intl.formatMessage(messages.NoSelection),\n        }}\n        onChange={(field) => {\n          onChange(id, field.value);\n        }}\n      />\n    </FormFieldWrapper>\n  );\n}\n\nexport default injectLazyLibs(['reactSelect'])(QueryStringSortOrderWidget);\n"],"mappings":";;;;;;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,gBAAgB,QAAQ,yBAAyB;AAE1D,SAASC,cAAc,EAAEC,OAAO,QAAQ,YAAY;AACpD,SAASC,WAAW,QAAQ,aAAa;AAEzC,SACEC,MAAM,EACNC,iBAAiB,EACjBC,WAAW,EACXC,kBAAkB,QACb,sDAAsD;AAC7D,SAASC,cAAc,QAAQ,wCAAwC;AAEvE,MAAMC,QAAQ,GAAGR,cAAc,CAAC;EAC9BS,MAAM;IAAA;IAAA;EAAA,CAGL;EACDC,WAAW;IAAA;IAAA;EAAA;AAIb,CAAC,CAAC;AAEF,SAASC,0BAA0B,CAACC,KAAK,EAAE;EAAA;EACzC,MAAM;IAAEC,EAAE;IAAEC,KAAK;IAAEC,QAAQ;IAAEC,WAAW;IAAEC;EAAW,CAAC,GAAGL,KAAK;EAC9D,MAAMM,gBAAgB,GAAGhB,WAAW,CACjCiB,KAAK,IAAKA,KAAK,CAACC,WAAW,CAACF,gBAAgB,CAC9C;EACD,MAAMG,IAAI,GAAGpB,OAAO,EAAE;EACtB,MAAMqB,MAAM,GAAGN,WAAW,CAACO,OAAO;EAElC,OACE,MAAC,gBAAgB,eACXX,KAAK;IACT,SAAS,EAAE,KAAM;IACjB,SAAS,EAAC,sBAAsB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,IAEhC,MAAC,MAAM;IACL,EAAE,EAAC,6BAA6B;IAChC,IAAI,EAAC,6BAA6B;IAClC,SAAS,EAAC,wBAAwB;IAClC,eAAe,EAAC;IAChB;IAAA;IACA,UAAU,EAAEK,UAAW;IACvB,OAAO,EAAE,CACP;MACEO,KAAK,EAAEH,IAAI,CAACI,aAAa,CAACjB,QAAQ,CAACE,WAAW,CAAC;MAC/CI,KAAK,EAAE;IACT,CAAC,EACD,GAAG,KACD,SACE,SAAQ,SAAQI,gBAAgB,CAAC,EAAGQ,IAAI,IAAKA,IAAI,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,CAC5D,EACAA,KAAK,KAAM;MACVH,KAAK,EAAEG,KAAK,CAAC,CAAC,CAAC;MACfC,OAAO,EAAE,KAAID,KAAK,CAAC,CAAC,CAAC,EAAGE,KAAK,KAAM;QACjCL,KAAK,EAAEK,KAAK,CAAC,CAAC,CAAC,CAACC,KAAK;QACrBhB,KAAK,EAAEe,KAAK,CAAC,CAAC;MAChB,CAAC,CAAC;IACJ,CAAC,CAAC,CACH,CACD;IACF,MAAM,EAAEvB,kBAAmB;IAC3B,KAAK,EAAED,WAAY;IACnB,UAAU,EAAE;MAAED,iBAAiB;MAAED;IAAO,CAAE;IAC1C,KAAK,EAAE;MACLW,KAAK,EAAEA,KAAK,IAAI,EAAE;MAClBU,KAAK,EACHV,KAAK,IAAII,gBAAgB,4BACrBA,gBAAgB,CAACJ,KAAK,CAAC,0DAAvB,sBAAyBgB,KAAK,GAC9BhB,KAAK,IAAIO,IAAI,CAACI,aAAa,CAACjB,QAAQ,CAACE,WAAW;IACxD,CAAE;IACF,QAAQ,EAAGmB,KAAK,IAAK;MACnBd,QAAQ,CAACF,EAAE,EAAEgB,KAAK,CAACf,KAAK,CAAC;IAC3B,CAAE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EACF,CACe;AAEvB;AAEA,eAAeP,cAAc,CAAC,CAAC,aAAa,CAAC,CAAC,CAACI,0BAA0B,CAAC"},"metadata":{"react-intl":{"messages":[{"id":"Sort on","defaultMessage":"Sort on"},{"id":"No selection","defaultMessage":"No selection"}]}},"sourceType":"module","externalDependencies":[]}