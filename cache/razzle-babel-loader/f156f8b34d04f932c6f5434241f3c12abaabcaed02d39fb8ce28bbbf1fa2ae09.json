{"ast":null,"code":"import _classCallCheck from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nvar _jsxFileName = \"/home/tooler/code/work/forests-frontend/src/develop/volto-forests-theme/src/components/theme/MobileSearchWidget/MobileSearchWidget.jsx\";\nvar __jsx = React.createElement;\n/**\n * Search widget component.\n * @module components/theme/SearchWidget/SearchWidget\n */\n\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Form, Input } from 'semantic-ui-react';\nimport { compose } from 'redux';\nimport { PropTypes } from 'prop-types';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport { Popup } from 'semantic-ui-react';\nimport { Icon } from '@plone/volto/components';\nimport zoomSVG from '@plone/volto/icons/zoom.svg';\nimport { connect } from 'react-redux';\nvar messages = defineMessages({\n  search: {\n    \"id\": \"Search\",\n    \"defaultMessage\": \"Search\"\n  },\n  searchSite: {\n    \"id\": \"Search Site\",\n    \"defaultMessage\": \"Search website\"\n  }\n});\n\n/**\n * SearchWidget component class.\n * @class SearchWidget\n * @extends Component\n */\nvar MobileSearchWidget = /*#__PURE__*/function (_Component) {\n  _inherits(MobileSearchWidget, _Component);\n  var _super = _createSuper(MobileSearchWidget);\n  /**\n   * Property types.\n   * @property {Object} propTypes Property types.\n   * @static\n   */\n\n  /**\n   * Constructor\n   * @method constructor\n   * @param {Object} props Component properties\n   * @constructs WysiwygEditor\n   */\n  function MobileSearchWidget(props) {\n    var _this;\n    _classCallCheck(this, MobileSearchWidget);\n    _this = _super.call(this, props);\n    _this.onChangeText = _this.onChangeText.bind(_assertThisInitialized(_this));\n    _this.onChangeSection = _this.onChangeSection.bind(_assertThisInitialized(_this));\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_this));\n    _this.showSearch = _this.showSearch.bind(_assertThisInitialized(_this));\n    _this.handleClickOutsideSearch = _this.handleClickOutsideSearch.bind(_assertThisInitialized(_this));\n    _this.state = {\n      text: '',\n      section: false,\n      showSearchField: false\n    };\n    return _this;\n  }\n\n  /**\n   * On change text\n   * @method onChangeText\n   * @param {object} event Event object.\n   * @param {string} value Text value.\n   * @returns {undefined}\n   */\n  _createClass(MobileSearchWidget, [{\n    key: \"onChangeText\",\n    value: function onChangeText(event, _ref) {\n      var value = _ref.value;\n      this.setState({\n        text: value\n      });\n    }\n\n    /**\n     * On change section\n     * @method onChangeSection\n     * @param {object} event Event object.\n     * @param {bool} checked Section checked.\n     * @returns {undefined}\n     */\n  }, {\n    key: \"onChangeSection\",\n    value: function onChangeSection(event, _ref2) {\n      var checked = _ref2.checked;\n      this.setState({\n        section: checked\n      });\n    }\n\n    /**\n     * Submit handler\n     * @method onSubmit\n     * @param {event} event Event object.\n     * @returns {undefined}\n     */\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit(event) {\n      var section = this.state.section ? \"&path=\".concat(this.props.pathname) : '';\n      this.props.history.push(\"/search?SearchableText=\".concat(this.state.text).concat(section));\n      event.preventDefault();\n    }\n  }, {\n    key: \"showSearch\",\n    value: function showSearch() {\n      this.setState({\n        showSearchField: true\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.body.addEventListener('click', this.handleClickOutsideSearch);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.body.removeEventListener('click', this.handleClickOutsideSearch);\n    }\n  }, {\n    key: \"handleClickOutsideSearch\",\n    value: function handleClickOutsideSearch(e) {\n      if (this.state.showSearchField === false || document.querySelector('input[name=\"SearchableText\"]').value) return;\n      var selectors = ['.searchInput', 'input[name=\"SearchableText\"]', '.searchbox', '.searchIcon', '.searchIcon svg.icon'];\n      var matchedSelector;\n      for (var _i = 0, _selectors = selectors; _i < _selectors.length; _i++) {\n        var selector = _selectors[_i];\n        if (e.target.matches(selector)) {\n          matchedSelector = selector;\n        }\n      }\n      if (!matchedSelector) {\n        this.setState({\n          showSearchField: false\n        });\n      }\n    }\n\n    /**\n     * Render method.\n     * @method render\n     * @returns {string} Markup for the component.\n     */\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(Form, {\n        action: \"/search\",\n        onSubmit: this.onSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 7\n        }\n      }, __jsx(Form.Field, {\n        className: \"searchbox\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 9\n        }\n      }, __jsx(Input, {\n        className: \"searchInput \".concat(this.state.showSearchField ? 'show' : ''),\n        \"aria-label\": this.props.intl.formatMessage(messages.search),\n        onChange: this.onChangeText,\n        name: \"SearchableText\",\n        value: this.state.text,\n        transparent: true,\n        placeholder: this.props.intl.formatMessage(messages.searchSite),\n        title: this.props.intl.formatMessage(messages.search),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }\n      }), __jsx(\"button\", {\n        className: \"overSearchIcon ui small basic no-border icon button\",\n        \"aria-label\": this.props.intl.formatMessage(messages.search),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }\n      }, __jsx(Icon, {\n        name: zoomSVG,\n        size: \"29px\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 13\n        }\n      })), !this.state.showSearchField ? __jsx(Popup, {\n        content: \"Search\",\n        trigger: __jsx(\"button\", {\n          onClick: this.showSearch,\n          className: \"overSearchIcon ui small basic no-border icon button\",\n          \"aria-label\": this.props.intl.formatMessage(messages.search),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 17\n          }\n        }, __jsx(Icon, {\n          name: zoomSVG,\n          size: \"2\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 19\n          }\n        })),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }\n      }) : ''));\n    }\n  }]);\n  return MobileSearchWidget;\n}(Component);\n_defineProperty(MobileSearchWidget, \"propTypes\", {\n  token: PropTypes.string,\n  pathname: PropTypes.string.isRequired\n});\n_defineProperty(MobileSearchWidget, \"defaultProps\", {\n  token: null\n});\nexport default compose(connect(function (state) {\n  return {\n    token: state.userSession.token\n  };\n}), withRouter, injectIntl)(MobileSearchWidget);","map":{"version":3,"names":["React","Component","withRouter","Form","Input","compose","PropTypes","defineMessages","injectIntl","Popup","Icon","zoomSVG","connect","messages","search","searchSite","MobileSearchWidget","props","onChangeText","bind","onChangeSection","onSubmit","showSearch","handleClickOutsideSearch","state","text","section","showSearchField","event","value","setState","checked","pathname","history","push","preventDefault","document","body","addEventListener","removeEventListener","e","querySelector","selectors","matchedSelector","selector","target","matches","intl","formatMessage","token","string","isRequired","userSession"],"sources":["/home/tooler/code/work/forests-frontend/src/develop/volto-forests-theme/src/components/theme/MobileSearchWidget/MobileSearchWidget.jsx"],"sourcesContent":["/**\n * Search widget component.\n * @module components/theme/SearchWidget/SearchWidget\n */\n\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Form, Input } from 'semantic-ui-react';\nimport { compose } from 'redux';\nimport { PropTypes } from 'prop-types';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport { Popup } from 'semantic-ui-react';\nimport { Icon } from '@plone/volto/components';\nimport zoomSVG from '@plone/volto/icons/zoom.svg';\nimport { connect } from 'react-redux';\n\nconst messages = defineMessages({\n  search: {\n    id: 'Search',\n    defaultMessage: 'Search',\n  },\n  searchSite: {\n    id: 'Search Site',\n    defaultMessage: 'Search website',\n  },\n});\n\n/**\n * SearchWidget component class.\n * @class SearchWidget\n * @extends Component\n */\nclass MobileSearchWidget extends Component {\n  /**\n   * Property types.\n   * @property {Object} propTypes Property types.\n   * @static\n   */\n  static propTypes = {\n    token: PropTypes.string,\n    pathname: PropTypes.string.isRequired,\n  };\n  static defaultProps = {\n    token: null,\n  };\n\n  /**\n   * Constructor\n   * @method constructor\n   * @param {Object} props Component properties\n   * @constructs WysiwygEditor\n   */\n  constructor(props) {\n    super(props);\n    this.onChangeText = this.onChangeText.bind(this);\n    this.onChangeSection = this.onChangeSection.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.showSearch = this.showSearch.bind(this);\n    this.handleClickOutsideSearch = this.handleClickOutsideSearch.bind(this);\n    this.state = {\n      text: '',\n      section: false,\n      showSearchField: false,\n    };\n  }\n\n  /**\n   * On change text\n   * @method onChangeText\n   * @param {object} event Event object.\n   * @param {string} value Text value.\n   * @returns {undefined}\n   */\n  onChangeText(event, { value }) {\n    this.setState({\n      text: value,\n    });\n  }\n\n  /**\n   * On change section\n   * @method onChangeSection\n   * @param {object} event Event object.\n   * @param {bool} checked Section checked.\n   * @returns {undefined}\n   */\n  onChangeSection(event, { checked }) {\n    this.setState({\n      section: checked,\n    });\n  }\n\n  /**\n   * Submit handler\n   * @method onSubmit\n   * @param {event} event Event object.\n   * @returns {undefined}\n   */\n  onSubmit(event) {\n    const section = this.state.section ? `&path=${this.props.pathname}` : '';\n    this.props.history.push(\n      `/search?SearchableText=${this.state.text}${section}`,\n    );\n    event.preventDefault();\n  }\n\n  showSearch() {\n    this.setState({ showSearchField: true });\n  }\n  componentDidMount() {\n    document.body.addEventListener('click', this.handleClickOutsideSearch);\n  }\n  componentWillUnmount() {\n    document.body.removeEventListener('click', this.handleClickOutsideSearch);\n  }\n  handleClickOutsideSearch(e) {\n    if (\n      this.state.showSearchField === false ||\n      document.querySelector('input[name=\"SearchableText\"]').value\n    )\n      return;\n    const selectors = [\n      '.searchInput',\n      'input[name=\"SearchableText\"]',\n      '.searchbox',\n      '.searchIcon',\n      '.searchIcon svg.icon',\n    ];\n    let matchedSelector;\n    for (let selector of selectors) {\n      if (e.target.matches(selector)) {\n        matchedSelector = selector;\n      }\n    }\n    if (!matchedSelector) {\n      this.setState({ showSearchField: false });\n    }\n  }\n\n  /**\n   * Render method.\n   * @method render\n   * @returns {string} Markup for the component.\n   */\n  render() {\n    return (\n      <Form action=\"/search\" onSubmit={this.onSubmit}>\n        <Form.Field className=\"searchbox\">\n          <Input\n            className={`searchInput ${\n              this.state.showSearchField ? 'show' : ''\n            }`}\n            aria-label={this.props.intl.formatMessage(messages.search)}\n            onChange={this.onChangeText}\n            name=\"SearchableText\"\n            value={this.state.text}\n            transparent\n            placeholder={this.props.intl.formatMessage(messages.searchSite)}\n            title={this.props.intl.formatMessage(messages.search)}\n          />\n          <button\n            className=\"overSearchIcon ui small basic no-border icon button\"\n            aria-label={this.props.intl.formatMessage(messages.search)}\n          >\n            <Icon name={zoomSVG} size=\"29px\" />\n          </button>\n          {!this.state.showSearchField ? (\n            <Popup\n              content=\"Search\"\n              trigger={\n                <button\n                  onClick={this.showSearch}\n                  className=\"overSearchIcon ui small basic no-border icon button\"\n                  aria-label={this.props.intl.formatMessage(messages.search)}\n                >\n                  <Icon name={zoomSVG} size=\"2\" />\n                </button>\n              }\n            />\n          ) : (\n            ''\n          )}\n        </Form.Field>\n      </Form>\n    );\n  }\n}\n\nexport default compose(\n  connect((state) => ({\n    token: state.userSession.token,\n  })),\n  withRouter,\n  injectIntl,\n)(MobileSearchWidget);\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[{"id":"Search","defaultMessage":"Search"},{"id":"Search Site","defaultMessage":"Search website"}]}},"sourceType":"module","externalDependencies":[]}