{"ast":null,"code":"import _extends from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/extends.js\";\nimport _defineProperty from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectSpread from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _map from \"lodash/map\";\nvar _jsxFileName = \"/home/tooler/code/work/forests-frontend/node_modules/@plone/volto/src/components/manage/Multilingual/TranslationObject.jsx\",\n  _this = this,\n  _s = $RefreshSig$();\nvar __jsx = React.createElement;\n/**\n * Add container.\n * @module components/manage/Add/Add\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { defineMessages, useIntl } from 'react-intl';\nimport { Form as UiForm, Menu, Segment } from 'semantic-ui-react';\nimport { Provider } from 'react-intl-redux';\nimport { Form, Field } from '@plone/volto/components';\nimport config from '@plone/volto/registry';\nimport configureStore from '@plone/volto/store';\nimport { Api, flattenToAppURL, langmap, normalizeLanguageName } from '@plone/volto/helpers';\nimport { createBrowserHistory } from 'history';\nvar messages = defineMessages({\n  document: {\n    \"id\": \"Document\",\n    \"defaultMessage\": \"Document\"\n  }\n});\n\n/**\n * TranslationObject class.\n * @class TranslationObject\n * @extends Component\n */\nvar TranslationObject = function TranslationObject(_ref) {\n  _s();\n  var translationObject = _ref.translationObject,\n    schema = _ref.schema,\n    pathname = _ref.pathname,\n    visual = _ref.visual,\n    isFormSelected = _ref.isFormSelected,\n    onSelectForm = _ref.onSelectForm;\n  var intl = useIntl();\n  var _useState = useState({}),\n    locales = _useState[0],\n    setLocales = _useState[1];\n  var _useState2 = useState(false),\n    loadingLocale = _useState2[0],\n    setLoadingLocale = _useState2[1];\n  var _useState3 = useState('language'),\n    activeMenu = _useState3[0],\n    setActiveMenu = _useState3[1];\n  var handleMenuClick = function handleMenuClick(e, _ref2) {\n    var name = _ref2.name;\n    setActiveMenu(name);\n  };\n  useEffect(function () {\n    if (!loadingLocale && Object.keys(locales).length < config.settings.supportedLanguages.length) {\n      setLoadingLocale(true);\n      var _lang = config.settings.supportedLanguages[Object.keys(locales).length];\n      var langFileName = normalizeLanguageName(_lang);\n      import('@root/../locales/' + langFileName + '.json').then(function (locale) {\n        setLocales(_objectSpread(_objectSpread({}, locales), {}, _defineProperty({}, _lang, locale[\"default\"])));\n        setLoadingLocale(false);\n      });\n    }\n  }, [loadingLocale, locales]);\n  var api = new Api();\n  var history = createBrowserHistory();\n  var store = configureStore(_objectSpread(_objectSpread({}, window.__data), {}, {\n    intl: {\n      defaultLocale: config.settings.defaultLanguage,\n      locale: translationObject.language.token,\n      messages: locales[translationObject.language.token]\n    }\n  }), history, api);\n  var lang = translationObject.language.token;\n  return translationObject && Object.keys(locales).length > 0 ? __jsx(Provider, {\n    store: store,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }\n  }, __jsx(React.Fragment, null, __jsx(Menu, {\n    pointing: true,\n    secondary: true,\n    attached: true,\n    tabular: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, __jsx(Menu.Item, {\n    name: \"language\",\n    active: activeMenu === 'language',\n    onClick: handleMenuClick,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, langmap[lang].nativeName), visual && __jsx(Menu.Item, {\n    name: \"properties\",\n    active: activeMenu === 'properties',\n    onClick: handleMenuClick,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, intl.formatMessage(messages.document))), activeMenu === 'language' && __jsx(Form, {\n    key: \"translation-object-form\",\n    schema: schema,\n    formData: translationObject,\n    type: translationObject['@type'],\n    onSubmit: function onSubmit() {\n      /*do nothing*/\n    },\n    hideActions: true,\n    pathname: flattenToAppURL(translationObject['@id']),\n    visual: visual,\n    title: langmap[lang].nativeName,\n    loading: false,\n    isFormSelected: isFormSelected,\n    onSelectForm: onSelectForm,\n    editable: false,\n    onChange: function onChange() {},\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }), activeMenu === 'properties' && __jsx(UiForm, {\n    method: \"post\",\n    onSubmit: function onSubmit() {},\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 11\n    }\n  }, __jsx(\"fieldset\", {\n    className: \"invisible\",\n    disabled: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }, schema && _map(schema.fieldsets, function (item) {\n    return [__jsx(Segment, {\n      secondary: true,\n      attached: true,\n      key: item.title,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 19\n      }\n    }, item.title), __jsx(Segment, {\n      attached: true,\n      key: \"fieldset-contents-\".concat(item.title),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 19\n      }\n    }, _map(item.fields, function (field, index) {\n      return __jsx(Field, _extends({}, schema.properties[field], {\n        id: field,\n        formData: translationObject,\n        focus: false,\n        value: translationObject[field],\n        required: schema.required.indexOf(field) !== -1,\n        key: field,\n        onChange: function onChange() {},\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 23\n        }\n      }));\n    }))];\n  }))))) : null;\n};\n_s(TranslationObject, \"CwZm/BTilhg5sYN5p/xfu9waNCg=\", false, function () {\n  return [useIntl];\n});\n_c = TranslationObject;\nexport default TranslationObject;\nvar _c;\n$RefreshReg$(_c, \"TranslationObject\");","map":{"version":3,"names":["React","useEffect","useState","defineMessages","useIntl","Form","UiForm","Menu","Segment","Provider","Field","config","configureStore","Api","flattenToAppURL","langmap","normalizeLanguageName","createBrowserHistory","messages","document","TranslationObject","translationObject","schema","pathname","visual","isFormSelected","onSelectForm","intl","locales","setLocales","loadingLocale","setLoadingLocale","activeMenu","setActiveMenu","handleMenuClick","e","name","Object","keys","length","settings","supportedLanguages","lang","langFileName","then","locale","api","history","store","window","__data","defaultLocale","defaultLanguage","language","token","nativeName","formatMessage","fieldsets","item","title","fields","field","index","properties","required","indexOf"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@plone/volto/src/components/manage/Multilingual/TranslationObject.jsx"],"sourcesContent":["/**\n * Add container.\n * @module components/manage/Add/Add\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { map } from 'lodash';\nimport { defineMessages, useIntl } from 'react-intl';\nimport { Form as UiForm, Menu, Segment } from 'semantic-ui-react';\nimport { Provider } from 'react-intl-redux';\nimport { Form, Field } from '@plone/volto/components';\nimport config from '@plone/volto/registry';\nimport configureStore from '@plone/volto/store';\nimport {\n  Api,\n  flattenToAppURL,\n  langmap,\n  normalizeLanguageName,\n} from '@plone/volto/helpers';\nimport { createBrowserHistory } from 'history';\nconst messages = defineMessages({\n  document: {\n    id: 'Document',\n    defaultMessage: 'Document',\n  },\n});\n\n/**\n * TranslationObject class.\n * @class TranslationObject\n * @extends Component\n */\nconst TranslationObject = ({\n  translationObject,\n  schema,\n  pathname,\n  visual,\n  isFormSelected,\n  onSelectForm,\n}) => {\n  const intl = useIntl();\n\n  const [locales, setLocales] = useState({});\n  const [loadingLocale, setLoadingLocale] = useState(false);\n  const [activeMenu, setActiveMenu] = useState('language');\n  const handleMenuClick = (e, { name }) => {\n    setActiveMenu(name);\n  };\n\n  useEffect(() => {\n    if (\n      !loadingLocale &&\n      Object.keys(locales).length < config.settings.supportedLanguages.length\n    ) {\n      setLoadingLocale(true);\n      let lang =\n        config.settings.supportedLanguages[Object.keys(locales).length];\n      const langFileName = normalizeLanguageName(lang);\n      import('@root/../locales/' + langFileName + '.json').then((locale) => {\n        setLocales({ ...locales, [lang]: locale.default });\n        setLoadingLocale(false);\n      });\n    }\n  }, [loadingLocale, locales]);\n\n  const api = new Api();\n  const history = createBrowserHistory();\n  const store = configureStore(\n    {\n      ...window.__data,\n      intl: {\n        defaultLocale: config.settings.defaultLanguage,\n        locale: translationObject.language.token,\n        messages: locales[translationObject.language.token],\n      },\n    },\n    history,\n    api,\n  );\n\n  const lang = translationObject.language.token;\n\n  return translationObject && Object.keys(locales).length > 0 ? (\n    <Provider store={store}>\n      <>\n        <Menu pointing secondary attached tabular>\n          <Menu.Item\n            name=\"language\"\n            active={activeMenu === 'language'}\n            onClick={handleMenuClick}\n          >\n            {langmap[lang].nativeName}\n          </Menu.Item>\n          {visual && (\n            <Menu.Item\n              name=\"properties\"\n              active={activeMenu === 'properties'}\n              onClick={handleMenuClick}\n            >\n              {intl.formatMessage(messages.document)}\n            </Menu.Item>\n          )}\n        </Menu>\n        {activeMenu === 'language' && (\n          <Form\n            key=\"translation-object-form\"\n            schema={schema}\n            formData={translationObject}\n            type={translationObject['@type']}\n            onSubmit={() => {\n              /*do nothing*/\n            }}\n            hideActions\n            pathname={flattenToAppURL(translationObject['@id'])}\n            visual={visual}\n            title={langmap[lang].nativeName}\n            loading={false}\n            isFormSelected={isFormSelected}\n            onSelectForm={onSelectForm}\n            editable={false}\n            onChange={() => {}}\n          />\n        )}\n        {activeMenu === 'properties' && (\n          <UiForm method=\"post\" onSubmit={() => {}}>\n            <fieldset className=\"invisible\" disabled={true}>\n              {schema &&\n                map(schema.fieldsets, (item) => [\n                  <Segment secondary attached key={item.title}>\n                    {item.title}\n                  </Segment>,\n                  <Segment attached key={`fieldset-contents-${item.title}`}>\n                    {map(item.fields, (field, index) => (\n                      <Field\n                        {...schema.properties[field]}\n                        id={field}\n                        formData={translationObject}\n                        focus={false}\n                        value={translationObject[field]}\n                        required={schema.required.indexOf(field) !== -1}\n                        key={field}\n                        onChange={() => {}}\n                      />\n                    ))}\n                  </Segment>,\n                ])}\n            </fieldset>\n          </UiForm>\n        )}\n      </>\n    </Provider>\n  ) : null;\n};\n\nexport default TranslationObject;\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[{"id":"Document","defaultMessage":"Document"}]}},"sourceType":"module","externalDependencies":[]}