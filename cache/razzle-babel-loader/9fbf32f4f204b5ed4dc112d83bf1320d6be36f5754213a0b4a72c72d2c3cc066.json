{"ast":null,"code":"import _extends from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/extends.js\";\nvar _jsxFileName = \"/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-datablocks/src/components/manage/Blocks/ConditionalDataBlock/View.jsx\",\n  _this = this;\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { compose } from 'redux';\nimport { RenderBlocks } from '@plone/volto/components';\nimport { connectToProviderData } from '@eeacms/volto-datablocks/hocs';\nimport './style.less';\nvar isNumber = function isNumber(n) {\n  return /^-?[\\d.]+(?:e-?\\d+)?$/.test(n);\n};\nvar evaluateCondition = function evaluateCondition(columnValue, operator, conditionValue) {\n  var values = (conditionValue || '').split(',').map(function (item) {\n    return item.trim();\n  });\n  columnValue = columnValue[0];\n  switch (true) {\n    case operator === '=':\n      if (isNumber(columnValue) && isNumber(conditionValue)) {\n        return parseFloat(columnValue) === parseFloat(conditionValue);\n      }\n      return String(columnValue) === String(conditionValue);\n    case operator === '!=':\n      if (isNumber(columnValue) && isNumber(conditionValue)) {\n        return parseFloat(columnValue) !== parseFloat(conditionValue);\n      }\n      return String(columnValue) !== String(conditionValue);\n    case operator === 'in':\n      return values.includes(columnValue);\n    case operator === 'not in':\n      return !values.includes(columnValue);\n    case operator === '<':\n      return parseFloat(columnValue) < parseFloat(conditionValue);\n    case operator === '>':\n      return parseFloat(columnValue) > parseFloat(conditionValue);\n    default:\n      return 'Could not evaluate!';\n  }\n};\nvar View = function View(props) {\n  var _data$title, _data$title$toLowerCa, _data$title$toLowerCa2, _data$title$toLowerCa3;\n  var data = props.data,\n    provider_data = props.provider_data;\n  var column_data = data.column_data,\n    operator = data.operator,\n    condition = data.condition;\n  var columnValue = Array.from(new Set(provider_data === null || provider_data === void 0 ? void 0 : provider_data[column_data])).sort();\n  var evalResult = evaluateCondition(columnValue, operator, condition);\n  var metadata = props.metadata || props.properties;\n  var CustomTag = \"\".concat(data.as || 'div');\n  var customId = data === null || data === void 0 ? void 0 : (_data$title = data.title) === null || _data$title === void 0 ? void 0 : (_data$title$toLowerCa = _data$title.toLowerCase()) === null || _data$title$toLowerCa === void 0 ? void 0 : (_data$title$toLowerCa2 = _data$title$toLowerCa.replace(/[^a-zA-Z-\\s]/gi, '')) === null || _data$title$toLowerCa2 === void 0 ? void 0 : (_data$title$toLowerCa3 = _data$title$toLowerCa2.trim()) === null || _data$title$toLowerCa3 === void 0 ? void 0 : _data$title$toLowerCa3.replace(/\\s+/gi, '-');\n  return evalResult && __jsx(CustomTag, {\n    id: customId,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, __jsx(RenderBlocks, _extends({}, props, {\n    metadata: metadata,\n    content: (data === null || data === void 0 ? void 0 : data.data) || {},\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  })));\n};\n_c = View;\nexport default compose(connectToProviderData(function (props) {\n  var _props$data;\n  return {\n    provider_url: (_props$data = props.data) === null || _props$data === void 0 ? void 0 : _props$data.provider_url\n  };\n}))(View);\nvar _c;\n$RefreshReg$(_c, \"View\");","map":{"version":3,"names":["React","compose","RenderBlocks","connectToProviderData","isNumber","n","test","evaluateCondition","columnValue","operator","conditionValue","values","split","map","item","trim","parseFloat","String","includes","View","props","data","provider_data","column_data","condition","Array","from","Set","sort","evalResult","metadata","properties","CustomTag","as","customId","title","toLowerCase","replace","provider_url"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-datablocks/src/components/manage/Blocks/ConditionalDataBlock/View.jsx"],"sourcesContent":["import React from 'react';\nimport { compose } from 'redux';\nimport { RenderBlocks } from '@plone/volto/components';\nimport { connectToProviderData } from '@eeacms/volto-datablocks/hocs';\nimport './style.less';\n\nconst isNumber = (n) => {\n  return /^-?[\\d.]+(?:e-?\\d+)?$/.test(n);\n};\n\nconst evaluateCondition = (columnValue, operator, conditionValue) => {\n  const values = (conditionValue || '').split(',').map((item) => {\n    return item.trim();\n  });\n  columnValue = columnValue[0];\n\n  switch (true) {\n    case operator === '=':\n      if (isNumber(columnValue) && isNumber(conditionValue)) {\n        return parseFloat(columnValue) === parseFloat(conditionValue);\n      }\n      return String(columnValue) === String(conditionValue);\n\n    case operator === '!=':\n      if (isNumber(columnValue) && isNumber(conditionValue)) {\n        return parseFloat(columnValue) !== parseFloat(conditionValue);\n      }\n      return String(columnValue) !== String(conditionValue);\n\n    case operator === 'in':\n      return values.includes(columnValue);\n\n    case operator === 'not in':\n      return !values.includes(columnValue);\n\n    case operator === '<':\n      return parseFloat(columnValue) < parseFloat(conditionValue);\n\n    case operator === '>':\n      return parseFloat(columnValue) > parseFloat(conditionValue);\n\n    default:\n      return 'Could not evaluate!';\n  }\n};\n\nconst View = (props) => {\n  const { data, provider_data } = props;\n  const { column_data, operator, condition } = data;\n  const columnValue = Array.from(new Set(provider_data?.[column_data])).sort();\n  const evalResult = evaluateCondition(columnValue, operator, condition);\n  const metadata = props.metadata || props.properties;\n  const CustomTag = `${data.as || 'div'}`;\n  const customId = data?.title\n    ?.toLowerCase()\n    ?.replace(/[^a-zA-Z-\\s]/gi, '')\n    ?.trim()\n    ?.replace(/\\s+/gi, '-');\n\n  return (\n    evalResult && (\n      <CustomTag id={customId}>\n        <RenderBlocks\n          {...props}\n          metadata={metadata}\n          content={data?.data || {}}\n        />\n      </CustomTag>\n    )\n  );\n};\n\nexport default compose(\n  connectToProviderData((props) => ({\n    provider_url: props.data?.provider_url,\n  })),\n)(View);\n"],"mappings":";;;;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,OAAO;AAC/B,SAASC,YAAY,QAAQ,yBAAyB;AACtD,SAASC,qBAAqB,QAAQ,+BAA+B;AACrE,OAAO,cAAc;AAErB,IAAMC,QAAQ,GAAG,SAAXA,QAAQ,CAAIC,CAAC,EAAK;EACtB,OAAO,uBAAuB,CAACC,IAAI,CAACD,CAAC,CAAC;AACxC,CAAC;AAED,IAAME,iBAAiB,GAAG,SAApBA,iBAAiB,CAAIC,WAAW,EAAEC,QAAQ,EAAEC,cAAc,EAAK;EACnE,IAAMC,MAAM,GAAG,CAACD,cAAc,IAAI,EAAE,EAAEE,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,UAACC,IAAI,EAAK;IAC7D,OAAOA,IAAI,CAACC,IAAI,EAAE;EACpB,CAAC,CAAC;EACFP,WAAW,GAAGA,WAAW,CAAC,CAAC,CAAC;EAE5B,QAAQ,IAAI;IACV,KAAKC,QAAQ,KAAK,GAAG;MACnB,IAAIL,QAAQ,CAACI,WAAW,CAAC,IAAIJ,QAAQ,CAACM,cAAc,CAAC,EAAE;QACrD,OAAOM,UAAU,CAACR,WAAW,CAAC,KAAKQ,UAAU,CAACN,cAAc,CAAC;MAC/D;MACA,OAAOO,MAAM,CAACT,WAAW,CAAC,KAAKS,MAAM,CAACP,cAAc,CAAC;IAEvD,KAAKD,QAAQ,KAAK,IAAI;MACpB,IAAIL,QAAQ,CAACI,WAAW,CAAC,IAAIJ,QAAQ,CAACM,cAAc,CAAC,EAAE;QACrD,OAAOM,UAAU,CAACR,WAAW,CAAC,KAAKQ,UAAU,CAACN,cAAc,CAAC;MAC/D;MACA,OAAOO,MAAM,CAACT,WAAW,CAAC,KAAKS,MAAM,CAACP,cAAc,CAAC;IAEvD,KAAKD,QAAQ,KAAK,IAAI;MACpB,OAAOE,MAAM,CAACO,QAAQ,CAACV,WAAW,CAAC;IAErC,KAAKC,QAAQ,KAAK,QAAQ;MACxB,OAAO,CAACE,MAAM,CAACO,QAAQ,CAACV,WAAW,CAAC;IAEtC,KAAKC,QAAQ,KAAK,GAAG;MACnB,OAAOO,UAAU,CAACR,WAAW,CAAC,GAAGQ,UAAU,CAACN,cAAc,CAAC;IAE7D,KAAKD,QAAQ,KAAK,GAAG;MACnB,OAAOO,UAAU,CAACR,WAAW,CAAC,GAAGQ,UAAU,CAACN,cAAc,CAAC;IAE7D;MACE,OAAO,qBAAqB;EAAC;AAEnC,CAAC;AAED,IAAMS,IAAI,GAAG,SAAPA,IAAI,CAAIC,KAAK,EAAK;EAAA;EACtB,IAAQC,IAAI,GAAoBD,KAAK,CAA7BC,IAAI;IAAEC,aAAa,GAAKF,KAAK,CAAvBE,aAAa;EAC3B,IAAQC,WAAW,GAA0BF,IAAI,CAAzCE,WAAW;IAAEd,QAAQ,GAAgBY,IAAI,CAA5BZ,QAAQ;IAAEe,SAAS,GAAKH,IAAI,CAAlBG,SAAS;EACxC,IAAMhB,WAAW,GAAGiB,KAAK,CAACC,IAAI,CAAC,IAAIC,GAAG,CAACL,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAGC,WAAW,CAAC,CAAC,CAAC,CAACK,IAAI,EAAE;EAC5E,IAAMC,UAAU,GAAGtB,iBAAiB,CAACC,WAAW,EAAEC,QAAQ,EAAEe,SAAS,CAAC;EACtE,IAAMM,QAAQ,GAAGV,KAAK,CAACU,QAAQ,IAAIV,KAAK,CAACW,UAAU;EACnD,IAAMC,SAAS,aAAMX,IAAI,CAACY,EAAE,IAAI,KAAK,CAAE;EACvC,IAAMC,QAAQ,GAAGb,IAAI,aAAJA,IAAI,sCAAJA,IAAI,CAAEc,KAAK,yEAAX,YACbC,WAAW,EAAE,oFADA,sBAEbC,OAAO,CAAC,gBAAgB,EAAE,EAAE,CAAC,qFAFhB,uBAGbtB,IAAI,EAAE,2DAHO,uBAIbsB,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC;EAEzB,OACER,UAAU,IACR,MAAC,SAAS;IAAC,EAAE,EAAEK,QAAS;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACtB,MAAC,YAAY,eACPd,KAAK;IACT,QAAQ,EAAEU,QAAS;IACnB,OAAO,EAAE,CAAAT,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEA,IAAI,KAAI,CAAC,CAAE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAC1B,CAEL;AAEL,CAAC;AAAC,KAxBIF,IAAI;AA0BV,eAAelB,OAAO,CACpBE,qBAAqB,CAAC,UAACiB,KAAK;EAAA;EAAA,OAAM;IAChCkB,YAAY,iBAAElB,KAAK,CAACC,IAAI,gDAAV,YAAYiB;EAC5B,CAAC;AAAA,CAAC,CAAC,CACJ,CAACnB,IAAI,CAAC;AAAC;AAAA"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}