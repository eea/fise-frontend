{"ast":null,"code":"import _map from \"lodash/map\";\nimport _merge from \"lodash/merge\";\nimport _concat from \"lodash/concat\";\nvar _jsxFileName = \"/home/tooler/code/work/forests-frontend/node_modules/@plone/volto/src/components/manage/Contents/ContentsRenameModal.jsx\";\nvar __jsx = React.createElement;\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n/**\n * Contents rename modal.\n * @module components/manage/Contents/ContentsRenameModal\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport { updateContent } from '@plone/volto/actions';\nimport { ModalForm } from '@plone/volto/components';\nconst messages = defineMessages({\n  renameItems: {\n    \"id\": \"Rename items\",\n    \"defaultMessage\": \"Rename items\"\n  },\n  default: {\n    \"id\": \"Default\",\n    \"defaultMessage\": \"Default\"\n  },\n  title: {\n    \"id\": \"Title\",\n    \"defaultMessage\": \"Title\"\n  },\n  shortName: {\n    \"id\": \"Short name\",\n    \"defaultMessage\": \"Short name\"\n  },\n  shortNameDescription: {\n    \"id\": \"This name will be displayed in the URL.\",\n    \"defaultMessage\": \"This name will be displayed in the URL.\"\n  },\n  loadingMessage: {\n    \"id\": \"Rename Items Loading Message\",\n    \"defaultMessage\": \"Renaming items...\"\n  }\n});\n\n/**\n * ContentsRenameModal class.\n * @class ContentsRenameModal\n * @extends Component\n */\nclass ContentsRenameModal extends Component {\n  /**\n   * Property types.\n   * @property {Object} propTypes Property types.\n   * @static\n   */\n\n  /**\n   * Constructor\n   * @method constructor\n   * @param {Object} props Component properties\n   * @constructs ContentsUploadModal\n   */\n  constructor(props) {\n    super(props);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  /**\n   * Component will receive props\n   * @method componentWillReceiveProps\n   * @param {Object} nextProps Next properties\n   * @returns {undefined}\n   */\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (this.props.request.loading && nextProps.request.loaded) {\n      this.props.onOk();\n    }\n  }\n\n  /**\n   * Submit handler\n   * @method onSubmit\n   * @param {Object} data Form data\n   * @returns {undefined}\n   */\n  onSubmit(data) {\n    this.props.updateContent(_map(this.props.items, item => item.url), _map(this.props.items, (item, index) => ({\n      id: data[`${index}_id`],\n      title: data[`${index}_title`]\n    })));\n  }\n\n  /**\n   * Render method.\n   * @method render\n   * @returns {string} Markup for the component.\n   */\n  render() {\n    return this.props.open && __jsx(ModalForm, {\n      open: this.props.open,\n      loading: this.props.request.loading,\n      loadingMessage: this.props.intl.formatMessage(messages.loadingMessage),\n      onSubmit: this.onSubmit,\n      onCancel: this.props.onCancel,\n      formData: _merge(..._map(this.props.items, (item, index) => ({\n        [`${index}_title`]: item.title,\n        [`${index}_id`]: item.id\n      }))),\n      title: this.props.intl.formatMessage(messages.renameItems),\n      schema: {\n        fieldsets: [{\n          id: 'default',\n          title: this.props.intl.formatMessage(messages.default),\n          fields: _concat(..._map(this.props.items, (item, index) => [`${index}_title`, `${index}_id`]))\n        }],\n        properties: _merge(..._map(this.props.items, (item, index) => ({\n          [`${index}_title`]: {\n            title: this.props.intl.formatMessage(messages.title),\n            type: 'string',\n            description: ''\n          },\n          [`${index}_id`]: {\n            title: this.props.intl.formatMessage(messages.shortName),\n            type: 'id',\n            description: this.props.intl.formatMessage(messages.shortNameDescription)\n          }\n        }))),\n        required: []\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }\n    });\n  }\n}\n_defineProperty(ContentsRenameModal, \"propTypes\", {\n  updateContent: PropTypes.func.isRequired,\n  items: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string,\n    title: PropTypes.string,\n    url: PropTypes.string\n  })).isRequired,\n  request: PropTypes.shape({\n    loading: PropTypes.bool,\n    loaded: PropTypes.bool\n  }).isRequired,\n  open: PropTypes.bool.isRequired,\n  onOk: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired\n});\nexport default compose(injectIntl, connect(state => ({\n  request: state.content.update\n}), {\n  updateContent\n}))(ContentsRenameModal);","map":{"version":3,"names":["React","Component","PropTypes","connect","compose","defineMessages","injectIntl","updateContent","ModalForm","messages","renameItems","default","title","shortName","shortNameDescription","loadingMessage","ContentsRenameModal","constructor","props","onSubmit","bind","UNSAFE_componentWillReceiveProps","nextProps","request","loading","loaded","onOk","data","items","item","url","index","id","render","open","intl","formatMessage","onCancel","fieldsets","fields","properties","type","description","required","func","isRequired","arrayOf","shape","string","bool","state","content","update"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@plone/volto/src/components/manage/Contents/ContentsRenameModal.jsx"],"sourcesContent":["/**\n * Contents rename modal.\n * @module components/manage/Contents/ContentsRenameModal\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { concat, merge, map } from 'lodash';\nimport { defineMessages, injectIntl } from 'react-intl';\n\nimport { updateContent } from '@plone/volto/actions';\nimport { ModalForm } from '@plone/volto/components';\n\nconst messages = defineMessages({\n  renameItems: {\n    id: 'Rename items',\n    defaultMessage: 'Rename items',\n  },\n  default: {\n    id: 'Default',\n    defaultMessage: 'Default',\n  },\n  title: {\n    id: 'Title',\n    defaultMessage: 'Title',\n  },\n  shortName: {\n    id: 'Short name',\n    defaultMessage: 'Short name',\n  },\n  shortNameDescription: {\n    id: 'This name will be displayed in the URL.',\n    defaultMessage: 'This name will be displayed in the URL.',\n  },\n  loadingMessage: {\n    id: 'Rename Items Loading Message',\n    defaultMessage: 'Renaming items...',\n  },\n});\n\n/**\n * ContentsRenameModal class.\n * @class ContentsRenameModal\n * @extends Component\n */\nclass ContentsRenameModal extends Component {\n  /**\n   * Property types.\n   * @property {Object} propTypes Property types.\n   * @static\n   */\n  static propTypes = {\n    updateContent: PropTypes.func.isRequired,\n    items: PropTypes.arrayOf(\n      PropTypes.shape({\n        id: PropTypes.string,\n        title: PropTypes.string,\n        url: PropTypes.string,\n      }),\n    ).isRequired,\n    request: PropTypes.shape({\n      loading: PropTypes.bool,\n      loaded: PropTypes.bool,\n    }).isRequired,\n    open: PropTypes.bool.isRequired,\n    onOk: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired,\n  };\n\n  /**\n   * Constructor\n   * @method constructor\n   * @param {Object} props Component properties\n   * @constructs ContentsUploadModal\n   */\n  constructor(props) {\n    super(props);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  /**\n   * Component will receive props\n   * @method componentWillReceiveProps\n   * @param {Object} nextProps Next properties\n   * @returns {undefined}\n   */\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (this.props.request.loading && nextProps.request.loaded) {\n      this.props.onOk();\n    }\n  }\n\n  /**\n   * Submit handler\n   * @method onSubmit\n   * @param {Object} data Form data\n   * @returns {undefined}\n   */\n  onSubmit(data) {\n    this.props.updateContent(\n      map(this.props.items, (item) => item.url),\n      map(this.props.items, (item, index) => ({\n        id: data[`${index}_id`],\n        title: data[`${index}_title`],\n      })),\n    );\n  }\n\n  /**\n   * Render method.\n   * @method render\n   * @returns {string} Markup for the component.\n   */\n  render() {\n    return (\n      this.props.open && (\n        <ModalForm\n          open={this.props.open}\n          loading={this.props.request.loading}\n          loadingMessage={this.props.intl.formatMessage(\n            messages.loadingMessage,\n          )}\n          onSubmit={this.onSubmit}\n          onCancel={this.props.onCancel}\n          formData={merge(\n            ...map(this.props.items, (item, index) => ({\n              [`${index}_title`]: item.title,\n              [`${index}_id`]: item.id,\n            })),\n          )}\n          title={this.props.intl.formatMessage(messages.renameItems)}\n          schema={{\n            fieldsets: [\n              {\n                id: 'default',\n                title: this.props.intl.formatMessage(messages.default),\n                fields: concat(\n                  ...map(this.props.items, (item, index) => [\n                    `${index}_title`,\n                    `${index}_id`,\n                  ]),\n                ),\n              },\n            ],\n            properties: merge(\n              ...map(this.props.items, (item, index) => ({\n                [`${index}_title`]: {\n                  title: this.props.intl.formatMessage(messages.title),\n                  type: 'string',\n                  description: '',\n                },\n                [`${index}_id`]: {\n                  title: this.props.intl.formatMessage(messages.shortName),\n                  type: 'id',\n                  description: this.props.intl.formatMessage(\n                    messages.shortNameDescription,\n                  ),\n                },\n              })),\n            ),\n            required: [],\n          }}\n        />\n      )\n    );\n  }\n}\n\nexport default compose(\n  injectIntl,\n  connect(\n    (state) => ({\n      request: state.content.update,\n    }),\n    { updateContent },\n  ),\n)(ContentsRenameModal);\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[{"id":"Rename items","defaultMessage":"Rename items"},{"id":"Default","defaultMessage":"Default"},{"id":"Title","defaultMessage":"Title"},{"id":"Short name","defaultMessage":"Short name"},{"id":"This name will be displayed in the URL.","defaultMessage":"This name will be displayed in the URL."},{"id":"Rename Items Loading Message","defaultMessage":"Renaming items..."}]}},"sourceType":"module","externalDependencies":[]}