{"ast":null,"code":"import _objectSpread from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nvar _jsxFileName = \"/home/tooler/code/work/forests-frontend/src/develop/volto-block-style/src/StyleWrapper/StyleWrapperEdit.jsx\",\n  _this = this,\n  _s = $RefreshSig$();\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { doesNodeContainClick } from 'semantic-ui-react/dist/commonjs/lib';\nimport { Icon, SidebarPopup } from '@plone/volto/components';\nimport InlineForm from '@plone/volto/components/manage/Form/InlineForm';\nimport { StyleSchema } from './schema';\nimport clearSVG from '@plone/volto/icons/clear.svg';\nimport deleteSVG from '@plone/volto/icons/delete.svg';\nvar StyleWrapperEdit = function StyleWrapperEdit(props) {\n  _s();\n  var block = props.block,\n    blockData = props.blockData,\n    selected = props.selected,\n    onChangeBlock = props.onChangeBlock,\n    onChangeValue = props.onChangeValue,\n    data = props.data,\n    isVisible = props.isVisible,\n    setIsVisible = props.setIsVisible;\n  var schema = React.useMemo(function () {\n    return StyleSchema();\n  }, []);\n  var closeSidebar = React.useCallback(function (e) {\n    var clickInSidebars = false;\n    var sidebars = document.querySelectorAll('aside.sidebar-container') || [];\n    sidebars.forEach(function (sidebar) {\n      if (doesNodeContainClick(sidebar, e) && !clickInSidebars) {\n        clickInSidebars = true;\n      }\n    });\n    if (isVisible && !clickInSidebars) {\n      setIsVisible(false);\n    }\n  }, [isVisible, setIsVisible]);\n  var deleteAllStyle = React.useCallback(function () {\n    var newData = _objectSpread({}, blockData);\n    delete newData.styles;\n    onChangeBlock(block, newData);\n  }, [block, blockData, onChangeBlock]);\n  React.useEffect(function () {\n    document.addEventListener('click', closeSidebar, false);\n    return function () {\n      document.removeEventListener('click', closeSidebar);\n    };\n  }, [closeSidebar]);\n  return selected && isVisible ? __jsx(SidebarPopup, {\n    open: selected && isVisible,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }, __jsx(InlineForm, {\n    schema: schema,\n    title: __jsx(React.Fragment, null, schema.title, __jsx(\"button\", {\n      onClick: function onClick() {\n        setIsVisible(false);\n      },\n      style: {\n        \"float\": 'right'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }\n    }, __jsx(Icon, {\n      name: clearSVG,\n      size: \"24px\",\n      title: \"Close\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 15\n      }\n    })), __jsx(\"button\", {\n      onClick: deleteAllStyle,\n      style: {\n        \"float\": 'right'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }\n    }, __jsx(Icon, {\n      name: deleteSVG,\n      size: \"24px\",\n      title: \"Delete block style\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 15\n      }\n    }))),\n    onChangeField: function onChangeField(id, value) {\n      onChangeValue(id, value);\n    },\n    formData: data,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  })) : '';\n};\n_s(StyleWrapperEdit, \"G/QES/hi+lC/nYqjMSSgxbILYtg=\");\n_c = StyleWrapperEdit;\nexport default StyleWrapperEdit;\nvar _c;\n$RefreshReg$(_c, \"StyleWrapperEdit\");","map":{"version":3,"names":["React","doesNodeContainClick","Icon","SidebarPopup","InlineForm","StyleSchema","clearSVG","deleteSVG","StyleWrapperEdit","props","block","blockData","selected","onChangeBlock","onChangeValue","data","isVisible","setIsVisible","schema","useMemo","closeSidebar","useCallback","e","clickInSidebars","sidebars","document","querySelectorAll","forEach","sidebar","deleteAllStyle","newData","styles","useEffect","addEventListener","removeEventListener","title","id","value"],"sources":["/home/tooler/code/work/forests-frontend/src/develop/volto-block-style/src/StyleWrapper/StyleWrapperEdit.jsx"],"sourcesContent":["import React from 'react';\nimport { doesNodeContainClick } from 'semantic-ui-react/dist/commonjs/lib';\nimport { Icon, SidebarPopup } from '@plone/volto/components';\nimport InlineForm from '@plone/volto/components/manage/Form/InlineForm';\nimport { StyleSchema } from './schema';\nimport clearSVG from '@plone/volto/icons/clear.svg';\nimport deleteSVG from '@plone/volto/icons/delete.svg';\n\nconst StyleWrapperEdit = (props) => {\n  const {\n    block,\n    blockData,\n    selected,\n    onChangeBlock,\n    onChangeValue,\n    data,\n    isVisible,\n    setIsVisible,\n  } = props;\n\n  const schema = React.useMemo(() => StyleSchema(), []);\n\n  const closeSidebar = React.useCallback(\n    (e) => {\n      let clickInSidebars = false;\n      const sidebars =\n        document.querySelectorAll('aside.sidebar-container') || [];\n      sidebars.forEach((sidebar) => {\n        if (doesNodeContainClick(sidebar, e) && !clickInSidebars) {\n          clickInSidebars = true;\n        }\n      });\n      if (isVisible && !clickInSidebars) {\n        setIsVisible(false);\n      }\n    },\n    [isVisible, setIsVisible],\n  );\n\n  const deleteAllStyle = React.useCallback(() => {\n    const newData = {\n      ...blockData,\n    };\n    delete newData.styles;\n    onChangeBlock(block, newData);\n  }, [block, blockData, onChangeBlock]);\n\n  React.useEffect(() => {\n    document.addEventListener('click', closeSidebar, false);\n    return () => {\n      document.removeEventListener('click', closeSidebar);\n    };\n  }, [closeSidebar]);\n\n  return selected && isVisible ? (\n    <SidebarPopup open={selected && isVisible}>\n      <InlineForm\n        schema={schema}\n        title={\n          <>\n            {schema.title}\n            <button\n              onClick={() => {\n                setIsVisible(false);\n              }}\n              style={{ float: 'right' }}\n            >\n              <Icon name={clearSVG} size=\"24px\" title=\"Close\" />\n            </button>\n            <button onClick={deleteAllStyle} style={{ float: 'right' }}>\n              <Icon name={deleteSVG} size=\"24px\" title=\"Delete block style\" />\n            </button>\n          </>\n        }\n        onChangeField={(id, value) => {\n          onChangeValue(id, value);\n        }}\n        formData={data}\n      />\n    </SidebarPopup>\n  ) : (\n    ''\n  );\n};\n\nexport default StyleWrapperEdit;\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}