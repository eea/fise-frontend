{"ast":null,"code":"import { GET_DATA_FROM_PROVIDER } from '../constants';\nexport const dataProvider = middlewares => [store => next => action => {\n  const state = store.getState();\n  if (action.type === GET_DATA_FROM_PROVIDER) {\n    var _action$path;\n    const path = `${(_action$path = action.path) === null || _action$path === void 0 ? void 0 : _action$path.replace('/@connector-data', '')}${action.hashValue ? `#${action.hashValue}` : ''}`;\n    const isPending = state.data_providers.pendingConnectors[path];\n    if (isPending) {\n      return;\n    }\n    store.dispatch({\n      type: `${GET_DATA_FROM_PROVIDER}_PENDING`,\n      path: action.path,\n      hashValue: action.hashValue\n    });\n  }\n  return next(action);\n}, ...middlewares];","map":{"version":3,"names":["GET_DATA_FROM_PROVIDER","dataProvider","middlewares","store","next","action","state","getState","type","path","replace","hashValue","isPending","data_providers","pendingConnectors","dispatch"],"sources":["/home/tooler/code/work/forests-frontend/src/develop/volto-datablocks/src/middlewares/dataProvider.js"],"sourcesContent":["import { GET_DATA_FROM_PROVIDER } from '../constants';\n\nexport const dataProvider = (middlewares) => [\n  (store) => (next) => (action) => {\n    const state = store.getState();\n    if (action.type === GET_DATA_FROM_PROVIDER) {\n      const path = `${action.path?.replace('/@connector-data', '')}${\n        action.hashValue ? `#${action.hashValue}` : ''\n      }`;\n      const isPending = state.data_providers.pendingConnectors[path];\n\n      if (isPending) {\n        return;\n      }\n      store.dispatch({\n        type: `${GET_DATA_FROM_PROVIDER}_PENDING`,\n        path: action.path,\n        hashValue: action.hashValue,\n      });\n    }\n    return next(action);\n  },\n  ...middlewares,\n];\n"],"mappings":"AAAA,SAASA,sBAAsB,QAAQ,cAAc;AAErD,OAAO,MAAMC,YAAY,GAAIC,WAAW,IAAK,CAC1CC,KAAK,IAAMC,IAAI,IAAMC,MAAM,IAAK;EAC/B,MAAMC,KAAK,GAAGH,KAAK,CAACI,QAAQ,EAAE;EAC9B,IAAIF,MAAM,CAACG,IAAI,KAAKR,sBAAsB,EAAE;IAAA;IAC1C,MAAMS,IAAI,GAAI,mBAAEJ,MAAM,CAACI,IAAI,iDAAX,aAAaC,OAAO,CAAC,kBAAkB,EAAE,EAAE,CAAE,GAC3DL,MAAM,CAACM,SAAS,GAAI,IAAGN,MAAM,CAACM,SAAU,EAAC,GAAG,EAC7C,EAAC;IACF,MAAMC,SAAS,GAAGN,KAAK,CAACO,cAAc,CAACC,iBAAiB,CAACL,IAAI,CAAC;IAE9D,IAAIG,SAAS,EAAE;MACb;IACF;IACAT,KAAK,CAACY,QAAQ,CAAC;MACbP,IAAI,EAAG,GAAER,sBAAuB,UAAS;MACzCS,IAAI,EAAEJ,MAAM,CAACI,IAAI;MACjBE,SAAS,EAAEN,MAAM,CAACM;IACpB,CAAC,CAAC;EACJ;EACA,OAAOP,IAAI,CAACC,MAAM,CAAC;AACrB,CAAC,EACD,GAAGH,WAAW,CACf"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}