{"ast":null,"code":"import decorateComponentWithProps from 'decorate-component-with-props';\nimport DefaultLink from './components/Link';\nimport LinkButton from './components/LinkButton';\nimport linkStrategy, { matchesEntityType } from './linkStrategy';\nfunction unboundRemoveEntity(editorState) {\n  const contentState = editorState.getCurrentContent();\n  const selectionState = editorState.getSelection();\n  const startKey = selectionState.getStartKey();\n  const contentBlock = contentState.getBlockForKey(startKey);\n  const startOffset = selectionState.getStartOffset();\n  const entity = contentBlock.getEntityAt(startOffset);\n  if (!entity) {\n    return editorState;\n  }\n  let entitySelection = null;\n  contentBlock.findEntityRanges(character => character.getEntity() === entity, (start, end) => {\n    entitySelection = selectionState.merge({\n      anchorOffset: start,\n      focusOffset: end,\n      isBackward: false\n    });\n  });\n  const newContentState = this.Modifier.applyEntity(contentState, entitySelection, null);\n  const newEditorState = this.EditorState.push(editorState, newContentState, 'apply-entity');\n  return newEditorState;\n}\nexport default ((config = {}) => {\n  // ToDo: Get rif of the remainings of having the original CSS modules\n  const defaultTheme = {};\n  const {\n    theme = defaultTheme,\n    placeholder,\n    Link,\n    linkTarget,\n    libraries\n  } = config;\n  const removeEntity = unboundRemoveEntity.bind(libraries);\n  return {\n    decorators: [{\n      strategy: linkStrategy,\n      matchesEntityType,\n      component: Link || decorateComponentWithProps(DefaultLink, {\n        className: 'link-anchorlink-theme',\n        target: linkTarget\n      })\n    }],\n    LinkButton: decorateComponentWithProps(LinkButton, {\n      ownTheme: theme,\n      placeholder,\n      onRemoveLinkAtSelection: (setEditorState, getEditorState) => setEditorState(removeEntity(getEditorState()))\n    })\n  };\n});","map":{"version":3,"names":["decorateComponentWithProps","DefaultLink","LinkButton","linkStrategy","matchesEntityType","unboundRemoveEntity","editorState","contentState","getCurrentContent","selectionState","getSelection","startKey","getStartKey","contentBlock","getBlockForKey","startOffset","getStartOffset","entity","getEntityAt","entitySelection","findEntityRanges","character","getEntity","start","end","merge","anchorOffset","focusOffset","isBackward","newContentState","Modifier","applyEntity","newEditorState","EditorState","push","config","defaultTheme","theme","placeholder","Link","linkTarget","libraries","removeEntity","bind","decorators","strategy","component","className","target","ownTheme","onRemoveLinkAtSelection","setEditorState","getEditorState"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@plone/volto/src/components/manage/AnchorPlugin/index.jsx"],"sourcesContent":["import decorateComponentWithProps from 'decorate-component-with-props';\n\nimport DefaultLink from './components/Link';\nimport LinkButton from './components/LinkButton';\nimport linkStrategy, { matchesEntityType } from './linkStrategy';\n\nfunction unboundRemoveEntity(editorState) {\n  const contentState = editorState.getCurrentContent();\n  const selectionState = editorState.getSelection();\n  const startKey = selectionState.getStartKey();\n  const contentBlock = contentState.getBlockForKey(startKey);\n  const startOffset = selectionState.getStartOffset();\n  const entity = contentBlock.getEntityAt(startOffset);\n\n  if (!entity) {\n    return editorState;\n  }\n\n  let entitySelection = null;\n\n  contentBlock.findEntityRanges(\n    (character) => character.getEntity() === entity,\n    (start, end) => {\n      entitySelection = selectionState.merge({\n        anchorOffset: start,\n        focusOffset: end,\n        isBackward: false,\n      });\n    },\n  );\n\n  const newContentState = this.Modifier.applyEntity(\n    contentState,\n    entitySelection,\n    null,\n  );\n\n  const newEditorState = this.EditorState.push(\n    editorState,\n    newContentState,\n    'apply-entity',\n  );\n\n  return newEditorState;\n}\n\nexport default (config = {}) => {\n  // ToDo: Get rif of the remainings of having the original CSS modules\n  const defaultTheme = {};\n\n  const {\n    theme = defaultTheme,\n    placeholder,\n    Link,\n    linkTarget,\n    libraries,\n  } = config;\n\n  const removeEntity = unboundRemoveEntity.bind(libraries);\n\n  return {\n    decorators: [\n      {\n        strategy: linkStrategy,\n        matchesEntityType,\n        component:\n          Link ||\n          decorateComponentWithProps(DefaultLink, {\n            className: 'link-anchorlink-theme',\n            target: linkTarget,\n          }),\n      },\n    ],\n\n    LinkButton: decorateComponentWithProps(LinkButton, {\n      ownTheme: theme,\n      placeholder,\n      onRemoveLinkAtSelection: (setEditorState, getEditorState) =>\n        setEditorState(removeEntity(getEditorState())),\n    }),\n  };\n};\n"],"mappings":"AAAA,OAAOA,0BAA0B,MAAM,+BAA+B;AAEtE,OAAOC,WAAW,MAAM,mBAAmB;AAC3C,OAAOC,UAAU,MAAM,yBAAyB;AAChD,OAAOC,YAAY,IAAIC,iBAAiB,QAAQ,gBAAgB;AAEhE,SAASC,mBAAmB,CAACC,WAAW,EAAE;EACxC,MAAMC,YAAY,GAAGD,WAAW,CAACE,iBAAiB,EAAE;EACpD,MAAMC,cAAc,GAAGH,WAAW,CAACI,YAAY,EAAE;EACjD,MAAMC,QAAQ,GAAGF,cAAc,CAACG,WAAW,EAAE;EAC7C,MAAMC,YAAY,GAAGN,YAAY,CAACO,cAAc,CAACH,QAAQ,CAAC;EAC1D,MAAMI,WAAW,GAAGN,cAAc,CAACO,cAAc,EAAE;EACnD,MAAMC,MAAM,GAAGJ,YAAY,CAACK,WAAW,CAACH,WAAW,CAAC;EAEpD,IAAI,CAACE,MAAM,EAAE;IACX,OAAOX,WAAW;EACpB;EAEA,IAAIa,eAAe,GAAG,IAAI;EAE1BN,YAAY,CAACO,gBAAgB,CAC1BC,SAAS,IAAKA,SAAS,CAACC,SAAS,EAAE,KAAKL,MAAM,EAC/C,CAACM,KAAK,EAAEC,GAAG,KAAK;IACdL,eAAe,GAAGV,cAAc,CAACgB,KAAK,CAAC;MACrCC,YAAY,EAAEH,KAAK;MACnBI,WAAW,EAAEH,GAAG;MAChBI,UAAU,EAAE;IACd,CAAC,CAAC;EACJ,CAAC,CACF;EAED,MAAMC,eAAe,GAAG,IAAI,CAACC,QAAQ,CAACC,WAAW,CAC/CxB,YAAY,EACZY,eAAe,EACf,IAAI,CACL;EAED,MAAMa,cAAc,GAAG,IAAI,CAACC,WAAW,CAACC,IAAI,CAC1C5B,WAAW,EACXuB,eAAe,EACf,cAAc,CACf;EAED,OAAOG,cAAc;AACvB;AAEA,gBAAe,CAACG,MAAM,GAAG,CAAC,CAAC,KAAK;EAC9B;EACA,MAAMC,YAAY,GAAG,CAAC,CAAC;EAEvB,MAAM;IACJC,KAAK,GAAGD,YAAY;IACpBE,WAAW;IACXC,IAAI;IACJC,UAAU;IACVC;EACF,CAAC,GAAGN,MAAM;EAEV,MAAMO,YAAY,GAAGrC,mBAAmB,CAACsC,IAAI,CAACF,SAAS,CAAC;EAExD,OAAO;IACLG,UAAU,EAAE,CACV;MACEC,QAAQ,EAAE1C,YAAY;MACtBC,iBAAiB;MACjB0C,SAAS,EACPP,IAAI,IACJvC,0BAA0B,CAACC,WAAW,EAAE;QACtC8C,SAAS,EAAE,uBAAuB;QAClCC,MAAM,EAAER;MACV,CAAC;IACL,CAAC,CACF;IAEDtC,UAAU,EAAEF,0BAA0B,CAACE,UAAU,EAAE;MACjD+C,QAAQ,EAAEZ,KAAK;MACfC,WAAW;MACXY,uBAAuB,EAAE,CAACC,cAAc,EAAEC,cAAc,KACtDD,cAAc,CAACT,YAAY,CAACU,cAAc,EAAE,CAAC;IACjD,CAAC;EACH,CAAC;AACH,CAAC"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}