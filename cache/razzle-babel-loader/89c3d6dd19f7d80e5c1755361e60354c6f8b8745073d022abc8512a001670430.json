{"ast":null,"code":"var _jsxFileName = \"/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-plotlycharts/src/Blocks/PlotlyChart/Edit.jsx\";\nvar __jsx = React.createElement;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nimport React, { Component } from 'react';\nimport { Button, Modal, Grid } from 'semantic-ui-react';\nimport { SidebarPortal } from '@plone/volto/components';\nimport InlineForm from '@plone/volto/components/manage/Form/InlineForm';\nimport { PickObjectWidget } from '@eeacms/volto-datablocks/components';\nimport ChartEditor from '@eeacms/volto-plotlycharts/ChartEditor';\nimport schema from './schema';\nimport View from './View';\nimport '@eeacms/volto-plotlycharts/less/plotly.less';\nclass PlotlyEditorModal extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: props.value\n    };\n  }\n  render() {\n    var _this$state$value;\n    return __jsx(Modal, {\n      open: true,\n      size: \"fullscreen\",\n      className: \"chart-editor-modal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 7\n      }\n    }, __jsx(Modal.Content, {\n      scrolling: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 9\n      }\n    }, __jsx(ChartEditor, {\n      value: this.state.value,\n      onChangeValue: value => {\n        this.setState({\n          value\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 11\n      }\n    })), __jsx(Modal.Actions, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 9\n      }\n    }, __jsx(Grid, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 11\n      }\n    }, __jsx(Grid.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 13\n      }\n    }, __jsx(Grid.Column, {\n      computer: 8,\n      tablet: 12,\n      verticalAlign: \"middle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 15\n      }\n    }, __jsx(PickObjectWidget, {\n      title: \"Select data source\",\n      id: \"provider-data\",\n      onChange: (_, provider_url) => {\n        this.setState({\n          value: _objectSpread(_objectSpread({}, this.state.value), {}, {\n            provider_url\n          })\n        });\n      },\n      value: (_this$state$value = this.state.value) === null || _this$state$value === void 0 ? void 0 : _this$state$value.provider_url,\n      showReload: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 17\n      }\n    })), __jsx(Grid.Column, {\n      computer: 4,\n      tablet: 12,\n      verticalAlign: \"middle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 15\n      }\n    }, __jsx(Button, {\n      primary: true,\n      floated: \"right\",\n      onClick: () => this.props.onChange(this.state.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }\n    }, \"Apply changes\"), __jsx(Button, {\n      floated: \"right\",\n      onClick: this.props.onClose,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }\n    }, \"Close\"))))));\n  }\n}\nclass Edit extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showChartEditor: false\n    };\n  }\n  handleModalChange(value) {\n    const chartData = _objectSpread(_objectSpread({}, value.chartData), {}, {\n      provider_url: value.provider_url\n    });\n    this.props.onChangeBlock(this.props.block, _objectSpread(_objectSpread({}, this.props.data), {}, {\n      visualization: {\n        chartData,\n        provider_url: value.provider_url\n      }\n    }));\n    this.setState({\n      showChartEditor: false\n    });\n  }\n\n  // This is the structure of value\n  // value = {\n  //   chartData: {\n  //     data: data || [],\n  //     layout: layout || {},\n  //     frames: frames || [],\n  //     provider_url: provider_url || undefined\n  //   }\n  //   provider_url: provider_url\n  // }\n\n  render() {\n    const {\n      data = {}\n    } = this.props;\n    const {\n      visualization = {}\n    } = data;\n    if (__SERVER__) return '';\n    return __jsx(React.Fragment, null, __jsx(\"div\", {\n      className: \"wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }\n    }, __jsx(Button, {\n      onClick: e => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n          showChartEditor: true\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }\n    }, \"Open Chart Editor\")), __jsx(View, _extends({}, this.props, {\n      mode: \"edit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }\n    })), this.state.showChartEditor ? __jsx(PlotlyEditorModal, {\n      value: visualization,\n      onChange: changedValue => this.handleModalChange(changedValue),\n      onClose: () => this.setState({\n        showChartEditor: false\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 11\n      }\n    }) : '', __jsx(SidebarPortal, {\n      selected: this.props.selected,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }\n    }, __jsx(InlineForm, {\n      schema: schema,\n      title: schema.title,\n      onChangeField: (id, value) => {\n        this.props.onChangeBlock(this.props.block, _objectSpread(_objectSpread({}, this.props.data), {}, {\n          [id]: value\n        }));\n      },\n      formData: this.props.data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }\n    })));\n  }\n}\nexport default Edit;","map":{"version":3,"names":["React","Component","Button","Modal","Grid","SidebarPortal","InlineForm","PickObjectWidget","ChartEditor","schema","View","PlotlyEditorModal","constructor","props","state","value","render","setState","_","provider_url","onChange","onClose","Edit","showChartEditor","handleModalChange","chartData","onChangeBlock","block","data","visualization","__SERVER__","e","preventDefault","stopPropagation","changedValue","selected","title","id"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-plotlycharts/src/Blocks/PlotlyChart/Edit.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { Button, Modal, Grid } from 'semantic-ui-react';\nimport { SidebarPortal } from '@plone/volto/components';\nimport InlineForm from '@plone/volto/components/manage/Form/InlineForm';\nimport { PickObjectWidget } from '@eeacms/volto-datablocks/components';\nimport ChartEditor from '@eeacms/volto-plotlycharts/ChartEditor';\n\nimport schema from './schema';\nimport View from './View';\n\nimport '@eeacms/volto-plotlycharts/less/plotly.less';\nclass PlotlyEditorModal extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: props.value,\n    };\n  }\n\n  render() {\n    return (\n      <Modal open={true} size=\"fullscreen\" className=\"chart-editor-modal\">\n        <Modal.Content scrolling>\n          <ChartEditor\n            value={this.state.value}\n            onChangeValue={(value) => {\n              this.setState({ value });\n            }}\n          />\n        </Modal.Content>\n        <Modal.Actions>\n          <Grid>\n            <Grid.Row>\n              <Grid.Column computer={8} tablet={12} verticalAlign=\"middle\">\n                <PickObjectWidget\n                  title=\"Select data source\"\n                  id=\"provider-data\"\n                  onChange={(_, provider_url) => {\n                    this.setState({\n                      value: { ...this.state.value, provider_url },\n                    });\n                  }}\n                  value={this.state.value?.provider_url}\n                  showReload={true}\n                />\n              </Grid.Column>\n              <Grid.Column computer={4} tablet={12} verticalAlign=\"middle\">\n                <Button\n                  primary\n                  floated=\"right\"\n                  onClick={() => this.props.onChange(this.state.value)}\n                >\n                  Apply changes\n                </Button>\n                <Button floated=\"right\" onClick={this.props.onClose}>\n                  Close\n                </Button>\n              </Grid.Column>\n            </Grid.Row>\n          </Grid>\n        </Modal.Actions>\n      </Modal>\n    );\n  }\n}\n\nclass Edit extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      showChartEditor: false,\n    };\n  }\n\n  handleModalChange(value) {\n    const chartData = {\n      ...value.chartData,\n      provider_url: value.provider_url,\n    };\n    this.props.onChangeBlock(this.props.block, {\n      ...this.props.data,\n      visualization: {\n        chartData,\n        provider_url: value.provider_url,\n      },\n    });\n    this.setState({\n      showChartEditor: false,\n    });\n  }\n\n  // This is the structure of value\n  // value = {\n  //   chartData: {\n  //     data: data || [],\n  //     layout: layout || {},\n  //     frames: frames || [],\n  //     provider_url: provider_url || undefined\n  //   }\n  //   provider_url: provider_url\n  // }\n\n  render() {\n    const { data = {} } = this.props;\n    const { visualization = {} } = data;\n\n    if (__SERVER__) return '';\n\n    return (\n      <>\n        <div className=\"wrapper\">\n          <Button\n            onClick={(e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              this.setState({ showChartEditor: true });\n            }}\n          >\n            Open Chart Editor\n          </Button>\n        </div>\n        <View {...this.props} mode=\"edit\" />\n        {this.state.showChartEditor ? (\n          <PlotlyEditorModal\n            value={visualization}\n            onChange={(changedValue) => this.handleModalChange(changedValue)}\n            onClose={() =>\n              this.setState({\n                showChartEditor: false,\n              })\n            }\n          />\n        ) : (\n          ''\n        )}\n\n        <SidebarPortal selected={this.props.selected}>\n          <InlineForm\n            schema={schema}\n            title={schema.title}\n            onChangeField={(id, value) => {\n              this.props.onChangeBlock(this.props.block, {\n                ...this.props.data,\n                [id]: value,\n              });\n            }}\n            formData={this.props.data}\n          />\n        </SidebarPortal>\n      </>\n    );\n  }\n}\n\nexport default Edit;\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}