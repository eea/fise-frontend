{"ast":null,"code":"var _jsxFileName = \"/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-forests-theme/src/components/theme/MobileSearchWidget/MobileSearchWidget.jsx\";\nvar __jsx = React.createElement;\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n/**\n * Search widget component.\n * @module components/theme/SearchWidget/SearchWidget\n */\n\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Form, Input } from 'semantic-ui-react';\nimport { compose } from 'redux';\nimport { PropTypes } from 'prop-types';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport { Popup } from 'semantic-ui-react';\nimport { Icon } from '@plone/volto/components';\nimport zoomSVG from '@plone/volto/icons/zoom.svg';\nimport { connect } from 'react-redux';\nconst messages = defineMessages({\n  search: {\n    \"id\": \"Search\",\n    \"defaultMessage\": \"Search\"\n  },\n  searchSite: {\n    \"id\": \"Search Site\",\n    \"defaultMessage\": \"Search website\"\n  }\n});\n\n/**\n * SearchWidget component class.\n * @class SearchWidget\n * @extends Component\n */\nclass MobileSearchWidget extends Component {\n  /**\n   * Property types.\n   * @property {Object} propTypes Property types.\n   * @static\n   */\n\n  /**\n   * Constructor\n   * @method constructor\n   * @param {Object} props Component properties\n   * @constructs WysiwygEditor\n   */\n  constructor(props) {\n    super(props);\n    this.onChangeText = this.onChangeText.bind(this);\n    this.onChangeSection = this.onChangeSection.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.showSearch = this.showSearch.bind(this);\n    this.handleClickOutsideSearch = this.handleClickOutsideSearch.bind(this);\n    this.state = {\n      text: '',\n      section: false,\n      showSearchField: false\n    };\n  }\n\n  /**\n   * On change text\n   * @method onChangeText\n   * @param {object} event Event object.\n   * @param {string} value Text value.\n   * @returns {undefined}\n   */\n  onChangeText(event, {\n    value\n  }) {\n    this.setState({\n      text: value\n    });\n  }\n\n  /**\n   * On change section\n   * @method onChangeSection\n   * @param {object} event Event object.\n   * @param {bool} checked Section checked.\n   * @returns {undefined}\n   */\n  onChangeSection(event, {\n    checked\n  }) {\n    this.setState({\n      section: checked\n    });\n  }\n\n  /**\n   * Submit handler\n   * @method onSubmit\n   * @param {event} event Event object.\n   * @returns {undefined}\n   */\n  onSubmit(event) {\n    const section = this.state.section ? `&path=${this.props.pathname}` : '';\n    this.props.history.push(`/search?SearchableText=${this.state.text}${section}`);\n    event.preventDefault();\n  }\n  showSearch() {\n    this.setState({\n      showSearchField: true\n    });\n  }\n  componentDidMount() {\n    document.body.addEventListener('click', this.handleClickOutsideSearch);\n  }\n  componentWillUnmount() {\n    document.body.removeEventListener('click', this.handleClickOutsideSearch);\n  }\n  handleClickOutsideSearch(e) {\n    if (this.state.showSearchField === false || document.querySelector('input[name=\"SearchableText\"]').value) return;\n    const selectors = ['.searchInput', 'input[name=\"SearchableText\"]', '.searchbox', '.searchIcon', '.searchIcon svg.icon'];\n    let matchedSelector;\n    for (let selector of selectors) {\n      if (e.target.matches(selector)) {\n        matchedSelector = selector;\n      }\n    }\n    if (!matchedSelector) {\n      this.setState({\n        showSearchField: false\n      });\n    }\n  }\n\n  /**\n   * Render method.\n   * @method render\n   * @returns {string} Markup for the component.\n   */\n  render() {\n    return __jsx(Form, {\n      action: \"/search\",\n      onSubmit: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 7\n      }\n    }, __jsx(Form.Field, {\n      className: \"searchbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }\n    }, __jsx(Input, {\n      className: `searchInput ${this.state.showSearchField ? 'show' : ''}`,\n      \"aria-label\": this.props.intl.formatMessage(messages.search),\n      onChange: this.onChangeText,\n      name: \"SearchableText\",\n      value: this.state.text,\n      transparent: true,\n      placeholder: this.props.intl.formatMessage(messages.searchSite),\n      title: this.props.intl.formatMessage(messages.search),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }\n    }), __jsx(\"button\", {\n      className: \"overSearchIcon ui small basic no-border icon button\",\n      \"aria-label\": this.props.intl.formatMessage(messages.search),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 11\n      }\n    }, __jsx(Icon, {\n      name: zoomSVG,\n      size: \"29px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 13\n      }\n    })), !this.state.showSearchField ? __jsx(Popup, {\n      content: \"Search\",\n      trigger: __jsx(\"button\", {\n        onClick: this.showSearch,\n        className: \"overSearchIcon ui small basic no-border icon button\",\n        \"aria-label\": this.props.intl.formatMessage(messages.search),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 17\n        }\n      }, __jsx(Icon, {\n        name: zoomSVG,\n        size: \"2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 19\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 13\n      }\n    }) : ''));\n  }\n}\n_defineProperty(MobileSearchWidget, \"propTypes\", {\n  token: PropTypes.string,\n  pathname: PropTypes.string.isRequired\n});\n_defineProperty(MobileSearchWidget, \"defaultProps\", {\n  token: null\n});\nexport default compose(connect(state => ({\n  token: state.userSession.token\n})), withRouter, injectIntl)(MobileSearchWidget);","map":{"version":3,"names":["React","Component","withRouter","Form","Input","compose","PropTypes","defineMessages","injectIntl","Popup","Icon","zoomSVG","connect","messages","search","searchSite","MobileSearchWidget","constructor","props","onChangeText","bind","onChangeSection","onSubmit","showSearch","handleClickOutsideSearch","state","text","section","showSearchField","event","value","setState","checked","pathname","history","push","preventDefault","componentDidMount","document","body","addEventListener","componentWillUnmount","removeEventListener","e","querySelector","selectors","matchedSelector","selector","target","matches","render","intl","formatMessage","token","string","isRequired","userSession"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-forests-theme/src/components/theme/MobileSearchWidget/MobileSearchWidget.jsx"],"sourcesContent":["/**\n * Search widget component.\n * @module components/theme/SearchWidget/SearchWidget\n */\n\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Form, Input } from 'semantic-ui-react';\nimport { compose } from 'redux';\nimport { PropTypes } from 'prop-types';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport { Popup } from 'semantic-ui-react';\nimport { Icon } from '@plone/volto/components';\nimport zoomSVG from '@plone/volto/icons/zoom.svg';\nimport { connect } from 'react-redux';\n\nconst messages = defineMessages({\n  search: {\n    id: 'Search',\n    defaultMessage: 'Search',\n  },\n  searchSite: {\n    id: 'Search Site',\n    defaultMessage: 'Search website',\n  },\n});\n\n/**\n * SearchWidget component class.\n * @class SearchWidget\n * @extends Component\n */\nclass MobileSearchWidget extends Component {\n  /**\n   * Property types.\n   * @property {Object} propTypes Property types.\n   * @static\n   */\n  static propTypes = {\n    token: PropTypes.string,\n    pathname: PropTypes.string.isRequired,\n  };\n  static defaultProps = {\n    token: null,\n  };\n\n  /**\n   * Constructor\n   * @method constructor\n   * @param {Object} props Component properties\n   * @constructs WysiwygEditor\n   */\n  constructor(props) {\n    super(props);\n    this.onChangeText = this.onChangeText.bind(this);\n    this.onChangeSection = this.onChangeSection.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.showSearch = this.showSearch.bind(this);\n    this.handleClickOutsideSearch = this.handleClickOutsideSearch.bind(this);\n    this.state = {\n      text: '',\n      section: false,\n      showSearchField: false,\n    };\n  }\n\n  /**\n   * On change text\n   * @method onChangeText\n   * @param {object} event Event object.\n   * @param {string} value Text value.\n   * @returns {undefined}\n   */\n  onChangeText(event, { value }) {\n    this.setState({\n      text: value,\n    });\n  }\n\n  /**\n   * On change section\n   * @method onChangeSection\n   * @param {object} event Event object.\n   * @param {bool} checked Section checked.\n   * @returns {undefined}\n   */\n  onChangeSection(event, { checked }) {\n    this.setState({\n      section: checked,\n    });\n  }\n\n  /**\n   * Submit handler\n   * @method onSubmit\n   * @param {event} event Event object.\n   * @returns {undefined}\n   */\n  onSubmit(event) {\n    const section = this.state.section ? `&path=${this.props.pathname}` : '';\n    this.props.history.push(\n      `/search?SearchableText=${this.state.text}${section}`,\n    );\n    event.preventDefault();\n  }\n\n  showSearch() {\n    this.setState({ showSearchField: true });\n  }\n  componentDidMount() {\n    document.body.addEventListener('click', this.handleClickOutsideSearch);\n  }\n  componentWillUnmount() {\n    document.body.removeEventListener('click', this.handleClickOutsideSearch);\n  }\n  handleClickOutsideSearch(e) {\n    if (\n      this.state.showSearchField === false ||\n      document.querySelector('input[name=\"SearchableText\"]').value\n    )\n      return;\n    const selectors = [\n      '.searchInput',\n      'input[name=\"SearchableText\"]',\n      '.searchbox',\n      '.searchIcon',\n      '.searchIcon svg.icon',\n    ];\n    let matchedSelector;\n    for (let selector of selectors) {\n      if (e.target.matches(selector)) {\n        matchedSelector = selector;\n      }\n    }\n    if (!matchedSelector) {\n      this.setState({ showSearchField: false });\n    }\n  }\n\n  /**\n   * Render method.\n   * @method render\n   * @returns {string} Markup for the component.\n   */\n  render() {\n    return (\n      <Form action=\"/search\" onSubmit={this.onSubmit}>\n        <Form.Field className=\"searchbox\">\n          <Input\n            className={`searchInput ${\n              this.state.showSearchField ? 'show' : ''\n            }`}\n            aria-label={this.props.intl.formatMessage(messages.search)}\n            onChange={this.onChangeText}\n            name=\"SearchableText\"\n            value={this.state.text}\n            transparent\n            placeholder={this.props.intl.formatMessage(messages.searchSite)}\n            title={this.props.intl.formatMessage(messages.search)}\n          />\n          <button\n            className=\"overSearchIcon ui small basic no-border icon button\"\n            aria-label={this.props.intl.formatMessage(messages.search)}\n          >\n            <Icon name={zoomSVG} size=\"29px\" />\n          </button>\n          {!this.state.showSearchField ? (\n            <Popup\n              content=\"Search\"\n              trigger={\n                <button\n                  onClick={this.showSearch}\n                  className=\"overSearchIcon ui small basic no-border icon button\"\n                  aria-label={this.props.intl.formatMessage(messages.search)}\n                >\n                  <Icon name={zoomSVG} size=\"2\" />\n                </button>\n              }\n            />\n          ) : (\n            ''\n          )}\n        </Form.Field>\n      </Form>\n    );\n  }\n}\n\nexport default compose(\n  connect((state) => ({\n    token: state.userSession.token,\n  })),\n  withRouter,\n  injectIntl,\n)(MobileSearchWidget);\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[{"id":"Search","defaultMessage":"Search"},{"id":"Search Site","defaultMessage":"Search website"}]}},"sourceType":"module","externalDependencies":[]}