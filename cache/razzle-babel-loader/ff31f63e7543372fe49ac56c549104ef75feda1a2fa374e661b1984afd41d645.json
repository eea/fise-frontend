{"ast":null,"code":"import _objectSpread from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport React from 'react';\nimport { compose } from 'redux';\nimport { connectToProviderData } from '@eeacms/volto-datablocks/hocs';\nvar SchemaProvider = /*#__PURE__*/function (_React$Component) {\n  _inherits(SchemaProvider, _React$Component);\n  var _super = _createSuper(SchemaProvider);\n  function SchemaProvider() {\n    var _this;\n    _classCallCheck(this, SchemaProvider);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"getSchema\", function () {\n      var schema = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (!_this.props.provider_data) return schema;\n      var provider_data = _this.props.provider_data || {};\n      var column = _this.props.data.column;\n      var columns = Array.from(new Set(Object.keys(provider_data || {}))).map(function (n) {\n        return [n, n];\n      });\n      var rows = column && provider_data[column] ? provider_data[column].map(function (value, index) {\n        return [\"row-\".concat(index + 1), value];\n      }) : [];\n      return _objectSpread(_objectSpread({}, schema), {}, {\n        properties: _objectSpread(_objectSpread({}, schema.properties), {}, {\n          column: _objectSpread(_objectSpread({}, schema.properties.column), {}, {\n            choices: columns\n          }),\n          row: _objectSpread(_objectSpread({}, schema.properties.row), {}, {\n            \"default\": rows !== null && rows !== void 0 && rows.length ? 'row-1' : null,\n            choices: rows\n          })\n        })\n      });\n    });\n    return _this;\n  }\n  _createClass(SchemaProvider, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n        editSchema = _this$props.editSchema,\n        children = _this$props.children;\n      return children(this.getSchema(editSchema));\n    }\n  }]);\n  return SchemaProvider;\n}(React.Component);\nexport default compose(connectToProviderData(function (props) {\n  return {\n    provider_url: props.data.provider_url\n  };\n}))(SchemaProvider);","map":{"version":3,"names":["React","compose","connectToProviderData","SchemaProvider","schema","props","provider_data","column","data","columns","Array","from","Set","Object","keys","map","n","rows","value","index","properties","choices","row","length","editSchema","children","getSchema","Component","provider_url"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-slate-dataentity/src/DataEntity/SchemaProvider.jsx"],"sourcesContent":["import React from 'react';\nimport { compose } from 'redux';\nimport { connectToProviderData } from '@eeacms/volto-datablocks/hocs';\n\nclass SchemaProvider extends React.Component {\n  getSchema = (schema = {}) => {\n    if (!this.props.provider_data) return schema;\n    const provider_data = this.props.provider_data || {};\n    const column = this.props.data.column;\n\n    const columns = Array.from(\n      new Set(Object.keys(provider_data || {})),\n    ).map((n) => [n, n]);\n\n    const rows =\n      column && provider_data[column]\n        ? provider_data[column].map((value, index) => [\n            `row-${index + 1}`,\n            value,\n          ])\n        : [];\n\n    return {\n      ...schema,\n      properties: {\n        ...schema.properties,\n        column: {\n          ...schema.properties.column,\n          choices: columns,\n        },\n        row: {\n          ...schema.properties.row,\n          default: rows?.length ? 'row-1' : null,\n          choices: rows,\n        },\n      },\n    };\n  };\n\n  render() {\n    const { editSchema, children } = this.props;\n    return children(this.getSchema(editSchema));\n  }\n}\n\nexport default compose(\n  connectToProviderData((props) => {\n    return {\n      provider_url: props.data.provider_url,\n    };\n  }),\n)(SchemaProvider);\n"],"mappings":";;;;;;;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,OAAO;AAC/B,SAASC,qBAAqB,QAAQ,+BAA+B;AAAC,IAEhEC,cAAc;EAAA;EAAA;EAAA;IAAA;IAAA;IAAA;MAAA;IAAA;IAAA;IAAA,4DACN,YAAiB;MAAA,IAAhBC,MAAM,uEAAG,CAAC,CAAC;MACtB,IAAI,CAAC,MAAKC,KAAK,CAACC,aAAa,EAAE,OAAOF,MAAM;MAC5C,IAAME,aAAa,GAAG,MAAKD,KAAK,CAACC,aAAa,IAAI,CAAC,CAAC;MACpD,IAAMC,MAAM,GAAG,MAAKF,KAAK,CAACG,IAAI,CAACD,MAAM;MAErC,IAAME,OAAO,GAAGC,KAAK,CAACC,IAAI,CACxB,IAAIC,GAAG,CAACC,MAAM,CAACC,IAAI,CAACR,aAAa,IAAI,CAAC,CAAC,CAAC,CAAC,CAC1C,CAACS,GAAG,CAAC,UAACC,CAAC;QAAA,OAAK,CAACA,CAAC,EAAEA,CAAC,CAAC;MAAA,EAAC;MAEpB,IAAMC,IAAI,GACRV,MAAM,IAAID,aAAa,CAACC,MAAM,CAAC,GAC3BD,aAAa,CAACC,MAAM,CAAC,CAACQ,GAAG,CAAC,UAACG,KAAK,EAAEC,KAAK;QAAA,OAAK,eACnCA,KAAK,GAAG,CAAC,GAChBD,KAAK,CACN;MAAA,EAAC,GACF,EAAE;MAER,uCACKd,MAAM;QACTgB,UAAU,kCACLhB,MAAM,CAACgB,UAAU;UACpBb,MAAM,kCACDH,MAAM,CAACgB,UAAU,CAACb,MAAM;YAC3Bc,OAAO,EAAEZ;UAAO,EACjB;UACDa,GAAG,kCACElB,MAAM,CAACgB,UAAU,CAACE,GAAG;YACxB,WAASL,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEM,MAAM,GAAG,OAAO,GAAG,IAAI;YACtCF,OAAO,EAAEJ;UAAI;QACd;MACF;IAEL,CAAC;IAAA;EAAA;EAAA;IAAA;IAAA,OAED,kBAAS;MACP,kBAAiC,IAAI,CAACZ,KAAK;QAAnCmB,UAAU,eAAVA,UAAU;QAAEC,QAAQ,eAARA,QAAQ;MAC5B,OAAOA,QAAQ,CAAC,IAAI,CAACC,SAAS,CAACF,UAAU,CAAC,CAAC;IAC7C;EAAC;EAAA;AAAA,EAtC0BxB,KAAK,CAAC2B,SAAS;AAyC5C,eAAe1B,OAAO,CACpBC,qBAAqB,CAAC,UAACG,KAAK,EAAK;EAC/B,OAAO;IACLuB,YAAY,EAAEvB,KAAK,CAACG,IAAI,CAACoB;EAC3B,CAAC;AACH,CAAC,CAAC,CACH,CAACzB,cAAc,CAAC"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}