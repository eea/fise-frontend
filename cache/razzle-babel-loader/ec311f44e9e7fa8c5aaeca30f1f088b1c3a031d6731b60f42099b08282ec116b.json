{"ast":null,"code":"import _objectSpread from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _join from \"lodash/join\";\nvar _jsxFileName = \"/home/tooler/code/work/forests-frontend/node_modules/@plone/volto/src/components/manage/Sidebar/ObjectBrowserBody.jsx\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { defineMessages, FormattedMessage, injectIntl } from 'react-intl';\nimport { Input, Segment, Breadcrumb } from 'semantic-ui-react';\n// These absolute imports (without using the corresponding centralized index.js) are required\n// to cut circular import problems, this file should never use them. This is because of\n// the very nature of the functionality of the component and its relationship with others\nimport { searchContent } from '@plone/volto/actions/search/search';\nimport Icon from '@plone/volto/components/theme/Icon/Icon';\nimport { flattenToAppURL, isInternalURL } from '@plone/volto/helpers/Url/Url';\nimport config from '@plone/volto/registry';\nimport backSVG from '@plone/volto/icons/back.svg';\nimport folderSVG from '@plone/volto/icons/folder.svg';\nimport clearSVG from '@plone/volto/icons/clear.svg';\nimport searchSVG from '@plone/volto/icons/zoom.svg';\nimport linkSVG from '@plone/volto/icons/link.svg';\nimport homeSVG from '@plone/volto/icons/home.svg';\nimport ObjectBrowserNav from '@plone/volto/components/manage/Sidebar/ObjectBrowserNav';\nvar messages = defineMessages({\n  SearchInputPlaceholder: {\n    \"id\": \"Search content\",\n    \"defaultMessage\": \"Search content\"\n  },\n  SelectedItems: {\n    \"id\": \"Selected items\",\n    \"defaultMessage\": \"Selected items\"\n  },\n  back: {\n    \"id\": \"Back\",\n    \"defaultMessage\": \"Back\"\n  },\n  search: {\n    \"id\": \"Search SVG\",\n    \"defaultMessage\": \"Search SVG\"\n  },\n  of: {\n    \"id\": \"Selected items - x of y\",\n    \"defaultMessage\": \"of\"\n  }\n});\nfunction getParentURL(url) {\n  return flattenToAppURL(\"\".concat(_join(url.split('/').slice(0, -1), '/'))) || '/';\n}\n\n/**\n * ObjectBrowserBody container class.\n * @class ObjectBrowserBody\n * @extends Component\n */\nvar ObjectBrowserBody = /*#__PURE__*/function (_Component) {\n  _inherits(ObjectBrowserBody, _Component);\n  var _super = _createSuper(ObjectBrowserBody);\n  /**\n   * Property types.\n   * @property {Object} propTypes Property types.\n   * @static\n   */\n\n  /**\n   * Default properties.\n   * @property {Object} defaultProps Default properties.\n   * @static\n   */\n\n  /**\n   * Constructor\n   * @method constructor\n   * @param {Object} props Component properties\n   * @constructs WysiwygEditor\n   */\n  function ObjectBrowserBody(props) {\n    var _this$props$data, _this$props$data2, _this$props$data3, _this$props$data4;\n    var _this;\n    _classCallCheck(this, ObjectBrowserBody);\n    _this = _super.call(this, props);\n    _defineProperty(_assertThisInitialized(_this), \"initialSearch\", function (mode) {\n      var currentSelected = mode === 'multiple' ? '' : mode === 'image' ? _this.state.selectedImage : _this.state.selectedHref;\n      if (currentSelected && isInternalURL(currentSelected)) {\n        _this.props.searchContent(getParentURL(currentSelected), {\n          'path.depth': 1,\n          sort_on: 'getObjPositionInParent',\n          metadata_fields: '_all',\n          b_size: 1000\n        }, \"\".concat(_this.props.block, \"-\").concat(mode));\n      } else {\n        _this.props.searchContent(_this.state.currentFolder, {\n          'path.depth': 1,\n          sort_on: 'getObjPositionInParent',\n          metadata_fields: '_all',\n          b_size: 1000\n        }, \"\".concat(_this.props.block, \"-\").concat(mode));\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"navigateTo\", function (id) {\n      _this.props.searchContent(id, {\n        'path.depth': 1,\n        sort_on: 'getObjPositionInParent',\n        metadata_fields: '_all',\n        b_size: 1000\n      }, \"\".concat(_this.props.block, \"-\").concat(_this.props.mode));\n      var parent = \"\".concat(_join(id.split('/').slice(0, -1), '/')) || '/';\n      _this.setState(function () {\n        return {\n          parentFolder: parent,\n          currentFolder: id || '/'\n        };\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"toggleSearchInput\", function () {\n      return _this.setState(function (prevState) {\n        return {\n          showSearchInput: !prevState.showSearchInput\n        };\n      }, function () {\n        var _this$searchInputRef;\n        if ((_this$searchInputRef = _this.searchInputRef) !== null && _this$searchInputRef !== void 0 && _this$searchInputRef.current) _this.searchInputRef.current.focus();\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onSearch\", function (e) {\n      var text = flattenToAppURL(e.target.value);\n      if (text.startsWith('/')) {\n        _this.setState({\n          currentFolder: text\n        });\n        _this.props.searchContent(text, {\n          'path.depth': 1,\n          sort_on: 'getObjPositionInParent',\n          metadata_fields: '_all',\n          portal_type: _this.state.searchableTypes\n        }, \"\".concat(_this.props.block, \"-\").concat(_this.props.mode));\n      } else {\n        text.length > 2 ? _this.props.searchContent('/', {\n          SearchableText: \"\".concat(text, \"*\"),\n          metadata_fields: '_all',\n          portal_type: _this.state.searchableTypes\n        }, \"\".concat(_this.props.block, \"-\").concat(_this.props.mode)) : _this.props.searchContent('/', {\n          'path.depth': 1,\n          sort_on: 'getObjPositionInParent',\n          metadata_fields: '_all',\n          portal_type: _this.state.searchableTypes\n        }, \"\".concat(_this.props.block, \"-\").concat(_this.props.mode));\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onSelectItem\", function (item) {\n      var url = item['@id'];\n      var _this$props = _this.props,\n        block = _this$props.block,\n        data = _this$props.data,\n        mode = _this$props.mode,\n        dataName = _this$props.dataName,\n        onChangeBlock = _this$props.onChangeBlock;\n      var updateState = function updateState(mode) {\n        switch (mode) {\n          case 'image':\n            _this.setState({\n              selectedImage: url,\n              currentImageFolder: getParentURL(url)\n            });\n            break;\n          case 'link':\n            _this.setState({\n              selectedHref: url,\n              currentLinkFolder: getParentURL(url)\n            });\n            break;\n          default:\n            break;\n        }\n      };\n      if (dataName) {\n        onChangeBlock(block, _objectSpread(_objectSpread({}, data), {}, _defineProperty({}, dataName, url)));\n      } else if (_this.props.onSelectItem) {\n        _this.props.onSelectItem(url, item);\n      } else if (mode === 'image') {\n        onChangeBlock(block, _objectSpread(_objectSpread({}, data), {}, {\n          url: flattenToAppURL(item.getURL),\n          alt: ''\n        }));\n      } else if (mode === 'link') {\n        onChangeBlock(block, _objectSpread(_objectSpread({}, data), {}, {\n          href: flattenToAppURL(url)\n        }));\n      }\n      updateState(mode);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onChangeBlockData\", function (key, value) {\n      _this.props.onChangeBlock(_this.props.block, _objectSpread(_objectSpread({}, _this.props.data), {}, _defineProperty({}, key, value)));\n    });\n    _defineProperty(_assertThisInitialized(_this), \"isSelectable\", function (item) {\n      return _this.props.selectableTypes.length > 0 ? _this.props.selectableTypes.indexOf(item['@type']) >= 0 : true;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleClickOnItem\", function (item) {\n      if (_this.props.mode === 'image') {\n        if (item.is_folderish) {\n          _this.navigateTo(item['@id']);\n        }\n        if (config.settings.imageObjects.includes(item['@type'])) {\n          _this.onSelectItem(item);\n        }\n      } else {\n        if (_this.isSelectable(item)) {\n          if (!_this.props.maximumSelectionSize || _this.props.mode === 'multiple' || !_this.props.data || _this.props.data.length < _this.props.maximumSelectionSize) {\n            _this.onSelectItem(item);\n            var length = _this.props.data ? _this.props.data.length : 0;\n            var stopSelecting = _this.props.mode !== 'multiple' || _this.props.maximumSelectionSize > 0 && length + 1 >= _this.props.maximumSelectionSize;\n            if (stopSelecting) {\n              _this.props.closeObjectBrowser();\n            }\n          } else {\n            _this.props.closeObjectBrowser();\n          }\n        } else {\n          _this.navigateTo(item['@id']);\n        }\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleDoubleClickOnItem\", function (item) {\n      if (_this.props.mode === 'image') {\n        if (item.is_folderish) {\n          _this.navigateTo(item['@id']);\n        }\n        if (config.settings.imageObjects.includes(item['@type'])) {\n          _this.onSelectItem(item);\n          _this.props.closeObjectBrowser();\n        }\n      } else {\n        if (_this.isSelectable(item)) {\n          if (_this.props.data.length < _this.props.maximumSelectionSize) {\n            _this.onSelectItem(item);\n          }\n          _this.props.closeObjectBrowser();\n        } else {\n          _this.navigateTo(item['@id']);\n        }\n      }\n    });\n    _this.state = {\n      currentFolder: _this.props.mode === 'multiple' ? '/' : _this.props.contextURL || '/',\n      currentImageFolder: _this.props.mode === 'multiple' ? '/' : _this.props.mode === 'image' && (_this$props$data = _this.props.data) !== null && _this$props$data !== void 0 && _this$props$data.url ? getParentURL(_this.props.data.url) : '/',\n      currentLinkFolder: _this.props.mode === 'multiple' ? '/' : _this.props.mode === 'link' && (_this$props$data2 = _this.props.data) !== null && _this$props$data2 !== void 0 && _this$props$data2.href ? getParentURL(_this.props.data.href) : '/',\n      parentFolder: '',\n      selectedImage: _this.props.mode === 'multiple' ? '' : _this.props.mode === 'image' && (_this$props$data3 = _this.props.data) !== null && _this$props$data3 !== void 0 && _this$props$data3.url ? flattenToAppURL(_this.props.data.url) : '',\n      selectedHref: _this.props.mode === 'multiple' ? '' : _this.props.mode === 'link' && (_this$props$data4 = _this.props.data) !== null && _this$props$data4 !== void 0 && _this$props$data4.href ? flattenToAppURL(_this.props.data.href) : '',\n      showSearchInput: false,\n      // In image mode, the searchable types default to the image types which\n      // can be overridden with the property if specified.\n      searchableTypes: _this.props.mode === 'image' ? _this.props.searchableTypes || config.settings.imageObjects : _this.props.searchableTypes\n    };\n    _this.searchInputRef = /*#__PURE__*/React.createRef();\n    return _this;\n  }\n\n  /**\n   * Component did mount\n   * @method componentDidMount\n   * @returns {undefined}\n   */\n  _createClass(ObjectBrowserBody, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.initialSearch(this.props.mode);\n    }\n  }, {\n    key: \"render\",\n    value:\n    /**\n     * Render method.\n     * @method render\n     * @returns {string} Markup for the component.\n     */\n    function render() {\n      var _this2 = this,\n        _this$props$data5;\n      return __jsx(Segment.Group, {\n        raised: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 7\n        }\n      }, __jsx(\"header\", {\n        className: \"header pulled\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 9\n        }\n      }, __jsx(\"div\", {\n        className: \"vertical divider\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 11\n        }\n      }), this.state.currentFolder === '/' ? __jsx(React.Fragment, null, this.props.mode === 'image' ? __jsx(Icon, {\n        name: folderSVG,\n        size: \"24px\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 17\n        }\n      }) : __jsx(Icon, {\n        name: linkSVG,\n        size: \"24px\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 17\n        }\n      })) : __jsx(\"button\", {\n        \"aria-label\": this.props.intl.formatMessage(messages.back),\n        onClick: function onClick() {\n          return _this2.navigateTo(_this2.state.parentFolder);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 13\n        }\n      }, __jsx(Icon, {\n        name: backSVG,\n        size: \"24px\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 15\n        }\n      })), this.state.showSearchInput ? __jsx(Input, {\n        className: \"search\",\n        ref: this.searchInputRef,\n        onChange: this.onSearch,\n        placeholder: this.props.intl.formatMessage(messages.SearchInputPlaceholder),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 13\n        }\n      }) : this.props.mode === 'image' ? __jsx(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 13\n        }\n      }, __jsx(FormattedMessage, {\n        id: \"Choose Image\",\n        defaultMessage: \"Choose Image\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 15\n        }\n      })) : __jsx(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 13\n        }\n      }, __jsx(FormattedMessage, {\n        id: \"Choose Target\",\n        defaultMessage: \"Choose Target\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 15\n        }\n      })), __jsx(\"button\", {\n        \"aria-label\": this.props.intl.formatMessage(messages.search),\n        onClick: this.toggleSearchInput,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 11\n        }\n      }, __jsx(Icon, {\n        name: searchSVG,\n        size: \"24px\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 13\n        }\n      })), __jsx(\"button\", {\n        className: \"clearSVG\",\n        onClick: this.props.closeObjectBrowser,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 11\n        }\n      }, __jsx(Icon, {\n        name: clearSVG,\n        size: \"24px\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 13\n        }\n      }))), __jsx(Segment, {\n        secondary: true,\n        className: \"breadcrumbs\",\n        vertical: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 9\n        }\n      }, __jsx(Breadcrumb, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 11\n        }\n      }, this.state.currentFolder !== '/' ? this.state.currentFolder.split('/').map(function (item, index, items) {\n        return __jsx(React.Fragment, {\n          key: \"divider-\".concat(item, \"-\").concat(index),\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 19\n          }\n        }, index === 0 ? __jsx(Breadcrumb.Section, {\n          onClick: function onClick() {\n            return _this2.navigateTo('/');\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 23\n          }\n        }, __jsx(Icon, {\n          className: \"home-icon\",\n          name: homeSVG,\n          size: \"18px\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 25\n          }\n        })) : __jsx(React.Fragment, null, __jsx(Breadcrumb.Divider, {\n          key: \"divider-\".concat(item.url),\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 25\n          }\n        }), __jsx(Breadcrumb.Section, {\n          onClick: function onClick() {\n            return _this2.navigateTo(items.slice(0, index + 1).join('/'));\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 25\n          }\n        }, item)));\n      }) : __jsx(Breadcrumb.Section, {\n        onClick: function onClick() {\n          return _this2.navigateTo('/');\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 15\n        }\n      }, __jsx(Icon, {\n        className: \"home-icon\",\n        name: homeSVG,\n        size: \"18px\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 17\n        }\n      })))), this.props.mode === 'multiple' && __jsx(Segment, {\n        className: \"infos\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 11\n        }\n      }, this.props.intl.formatMessage(messages.SelectedItems), \":\", ' ', (_this$props$data5 = this.props.data) === null || _this$props$data5 === void 0 ? void 0 : _this$props$data5.length, this.props.maximumSelectionSize > 0 && __jsx(React.Fragment, null, ' ', this.props.intl.formatMessage(messages.of), ' ', this.props.maximumSelectionSize)), __jsx(ObjectBrowserNav, {\n        currentSearchResults: this.props.searchSubrequests[\"\".concat(this.props.block, \"-\").concat(this.props.mode)],\n        selected: this.props.mode === 'multiple' ? this.props.data : [{\n          '@id': this.props.mode === 'image' ? this.state.selectedImage : this.state.selectedHref\n        }],\n        handleClickOnItem: this.handleClickOnItem,\n        handleDoubleClickOnItem: this.handleDoubleClickOnItem,\n        mode: this.props.mode,\n        navigateTo: this.navigateTo,\n        isSelectable: this.isSelectable,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n  return ObjectBrowserBody;\n}(Component);\n_defineProperty(ObjectBrowserBody, \"propTypes\", {\n  block: PropTypes.string.isRequired,\n  mode: PropTypes.string.isRequired,\n  data: PropTypes.any.isRequired,\n  searchSubrequests: PropTypes.objectOf(PropTypes.any).isRequired,\n  searchContent: PropTypes.func.isRequired,\n  closeObjectBrowser: PropTypes.func.isRequired,\n  onChangeBlock: PropTypes.func.isRequired,\n  onSelectItem: PropTypes.func,\n  dataName: PropTypes.string,\n  maximumSelectionSize: PropTypes.number,\n  contextURL: PropTypes.string,\n  searchableTypes: PropTypes.arrayOf(PropTypes.string)\n});\n_defineProperty(ObjectBrowserBody, \"defaultProps\", {\n  image: '',\n  href: '',\n  onSelectItem: null,\n  dataName: null,\n  selectableTypes: [],\n  searchableTypes: null,\n  maximumSelectionSize: null\n});\nexport default compose(injectIntl, connect(function (state) {\n  return {\n    searchSubrequests: state.search.subrequests\n  };\n}, {\n  searchContent: searchContent\n}))(ObjectBrowserBody);","map":{"version":3,"names":["React","Component","PropTypes","compose","connect","defineMessages","FormattedMessage","injectIntl","Input","Segment","Breadcrumb","searchContent","Icon","flattenToAppURL","isInternalURL","config","backSVG","folderSVG","clearSVG","searchSVG","linkSVG","homeSVG","ObjectBrowserNav","messages","SearchInputPlaceholder","SelectedItems","back","search","of","getParentURL","url","split","slice","ObjectBrowserBody","props","mode","currentSelected","state","selectedImage","selectedHref","sort_on","metadata_fields","b_size","block","currentFolder","id","parent","setState","parentFolder","prevState","showSearchInput","searchInputRef","current","focus","e","text","target","value","startsWith","portal_type","searchableTypes","length","SearchableText","item","data","dataName","onChangeBlock","updateState","currentImageFolder","currentLinkFolder","onSelectItem","getURL","alt","href","key","selectableTypes","indexOf","is_folderish","navigateTo","settings","imageObjects","includes","isSelectable","maximumSelectionSize","stopSelecting","closeObjectBrowser","contextURL","createRef","initialSearch","intl","formatMessage","onSearch","toggleSearchInput","map","index","items","join","searchSubrequests","handleClickOnItem","handleDoubleClickOnItem","string","isRequired","any","objectOf","func","number","arrayOf","image","subrequests"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@plone/volto/src/components/manage/Sidebar/ObjectBrowserBody.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { defineMessages, FormattedMessage, injectIntl } from 'react-intl';\nimport { Input, Segment, Breadcrumb } from 'semantic-ui-react';\n\nimport { join } from 'lodash';\n\n// These absolute imports (without using the corresponding centralized index.js) are required\n// to cut circular import problems, this file should never use them. This is because of\n// the very nature of the functionality of the component and its relationship with others\nimport { searchContent } from '@plone/volto/actions/search/search';\nimport Icon from '@plone/volto/components/theme/Icon/Icon';\nimport { flattenToAppURL, isInternalURL } from '@plone/volto/helpers/Url/Url';\nimport config from '@plone/volto/registry';\n\nimport backSVG from '@plone/volto/icons/back.svg';\nimport folderSVG from '@plone/volto/icons/folder.svg';\nimport clearSVG from '@plone/volto/icons/clear.svg';\nimport searchSVG from '@plone/volto/icons/zoom.svg';\nimport linkSVG from '@plone/volto/icons/link.svg';\nimport homeSVG from '@plone/volto/icons/home.svg';\n\nimport ObjectBrowserNav from '@plone/volto/components/manage/Sidebar/ObjectBrowserNav';\n\nconst messages = defineMessages({\n  SearchInputPlaceholder: {\n    id: 'Search content',\n    defaultMessage: 'Search content',\n  },\n  SelectedItems: {\n    id: 'Selected items',\n    defaultMessage: 'Selected items',\n  },\n  back: {\n    id: 'Back',\n    defaultMessage: 'Back',\n  },\n  search: {\n    id: 'Search SVG',\n    defaultMessage: 'Search SVG',\n  },\n  of: { id: 'Selected items - x of y', defaultMessage: 'of' },\n});\n\nfunction getParentURL(url) {\n  return flattenToAppURL(`${join(url.split('/').slice(0, -1), '/')}`) || '/';\n}\n\n/**\n * ObjectBrowserBody container class.\n * @class ObjectBrowserBody\n * @extends Component\n */\nclass ObjectBrowserBody extends Component {\n  /**\n   * Property types.\n   * @property {Object} propTypes Property types.\n   * @static\n   */\n  static propTypes = {\n    block: PropTypes.string.isRequired,\n    mode: PropTypes.string.isRequired,\n    data: PropTypes.any.isRequired,\n    searchSubrequests: PropTypes.objectOf(PropTypes.any).isRequired,\n    searchContent: PropTypes.func.isRequired,\n    closeObjectBrowser: PropTypes.func.isRequired,\n    onChangeBlock: PropTypes.func.isRequired,\n    onSelectItem: PropTypes.func,\n    dataName: PropTypes.string,\n    maximumSelectionSize: PropTypes.number,\n    contextURL: PropTypes.string,\n    searchableTypes: PropTypes.arrayOf(PropTypes.string),\n  };\n\n  /**\n   * Default properties.\n   * @property {Object} defaultProps Default properties.\n   * @static\n   */\n  static defaultProps = {\n    image: '',\n    href: '',\n    onSelectItem: null,\n    dataName: null,\n    selectableTypes: [],\n    searchableTypes: null,\n    maximumSelectionSize: null,\n  };\n\n  /**\n   * Constructor\n   * @method constructor\n   * @param {Object} props Component properties\n   * @constructs WysiwygEditor\n   */\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentFolder:\n        this.props.mode === 'multiple' ? '/' : this.props.contextURL || '/',\n      currentImageFolder:\n        this.props.mode === 'multiple'\n          ? '/'\n          : this.props.mode === 'image' && this.props.data?.url\n          ? getParentURL(this.props.data.url)\n          : '/',\n      currentLinkFolder:\n        this.props.mode === 'multiple'\n          ? '/'\n          : this.props.mode === 'link' && this.props.data?.href\n          ? getParentURL(this.props.data.href)\n          : '/',\n      parentFolder: '',\n      selectedImage:\n        this.props.mode === 'multiple'\n          ? ''\n          : this.props.mode === 'image' && this.props.data?.url\n          ? flattenToAppURL(this.props.data.url)\n          : '',\n      selectedHref:\n        this.props.mode === 'multiple'\n          ? ''\n          : this.props.mode === 'link' && this.props.data?.href\n          ? flattenToAppURL(this.props.data.href)\n          : '',\n      showSearchInput: false,\n      // In image mode, the searchable types default to the image types which\n      // can be overridden with the property if specified.\n      searchableTypes:\n        this.props.mode === 'image'\n          ? this.props.searchableTypes || config.settings.imageObjects\n          : this.props.searchableTypes,\n    };\n    this.searchInputRef = React.createRef();\n  }\n\n  /**\n   * Component did mount\n   * @method componentDidMount\n   * @returns {undefined}\n   */\n  componentDidMount() {\n    this.initialSearch(this.props.mode);\n  }\n\n  initialSearch = (mode) => {\n    const currentSelected =\n      mode === 'multiple'\n        ? ''\n        : mode === 'image'\n        ? this.state.selectedImage\n        : this.state.selectedHref;\n    if (currentSelected && isInternalURL(currentSelected)) {\n      this.props.searchContent(\n        getParentURL(currentSelected),\n        {\n          'path.depth': 1,\n          sort_on: 'getObjPositionInParent',\n          metadata_fields: '_all',\n          b_size: 1000,\n        },\n        `${this.props.block}-${mode}`,\n      );\n    } else {\n      this.props.searchContent(\n        this.state.currentFolder,\n        {\n          'path.depth': 1,\n          sort_on: 'getObjPositionInParent',\n          metadata_fields: '_all',\n          b_size: 1000,\n        },\n        `${this.props.block}-${mode}`,\n      );\n    }\n  };\n\n  navigateTo = (id) => {\n    this.props.searchContent(\n      id,\n      {\n        'path.depth': 1,\n        sort_on: 'getObjPositionInParent',\n        metadata_fields: '_all',\n        b_size: 1000,\n      },\n      `${this.props.block}-${this.props.mode}`,\n    );\n    const parent = `${join(id.split('/').slice(0, -1), '/')}` || '/';\n    this.setState(() => ({\n      parentFolder: parent,\n      currentFolder: id || '/',\n    }));\n  };\n\n  toggleSearchInput = () =>\n    this.setState(\n      (prevState) => ({\n        showSearchInput: !prevState.showSearchInput,\n      }),\n      () => {\n        if (this.searchInputRef?.current) this.searchInputRef.current.focus();\n      },\n    );\n\n  onSearch = (e) => {\n    const text = flattenToAppURL(e.target.value);\n    if (text.startsWith('/')) {\n      this.setState({ currentFolder: text });\n      this.props.searchContent(\n        text,\n        {\n          'path.depth': 1,\n          sort_on: 'getObjPositionInParent',\n          metadata_fields: '_all',\n          portal_type: this.state.searchableTypes,\n        },\n        `${this.props.block}-${this.props.mode}`,\n      );\n    } else {\n      text.length > 2\n        ? this.props.searchContent(\n            '/',\n            {\n              SearchableText: `${text}*`,\n              metadata_fields: '_all',\n              portal_type: this.state.searchableTypes,\n            },\n            `${this.props.block}-${this.props.mode}`,\n          )\n        : this.props.searchContent(\n            '/',\n            {\n              'path.depth': 1,\n              sort_on: 'getObjPositionInParent',\n              metadata_fields: '_all',\n              portal_type: this.state.searchableTypes,\n            },\n            `${this.props.block}-${this.props.mode}`,\n          );\n    }\n  };\n\n  onSelectItem = (item) => {\n    const url = item['@id'];\n    const { block, data, mode, dataName, onChangeBlock } = this.props;\n\n    const updateState = (mode) => {\n      switch (mode) {\n        case 'image':\n          this.setState({\n            selectedImage: url,\n            currentImageFolder: getParentURL(url),\n          });\n          break;\n        case 'link':\n          this.setState({\n            selectedHref: url,\n            currentLinkFolder: getParentURL(url),\n          });\n          break;\n        default:\n          break;\n      }\n    };\n\n    if (dataName) {\n      onChangeBlock(block, {\n        ...data,\n        [dataName]: url,\n      });\n    } else if (this.props.onSelectItem) {\n      this.props.onSelectItem(url, item);\n    } else if (mode === 'image') {\n      onChangeBlock(block, {\n        ...data,\n        url: flattenToAppURL(item.getURL),\n        alt: '',\n      });\n    } else if (mode === 'link') {\n      onChangeBlock(block, {\n        ...data,\n        href: flattenToAppURL(url),\n      });\n    }\n    updateState(mode);\n  };\n\n  onChangeBlockData = (key, value) => {\n    this.props.onChangeBlock(this.props.block, {\n      ...this.props.data,\n      [key]: value,\n    });\n  };\n\n  isSelectable = (item) => {\n    return this.props.selectableTypes.length > 0\n      ? this.props.selectableTypes.indexOf(item['@type']) >= 0\n      : true;\n  };\n\n  handleClickOnItem = (item) => {\n    if (this.props.mode === 'image') {\n      if (item.is_folderish) {\n        this.navigateTo(item['@id']);\n      }\n      if (config.settings.imageObjects.includes(item['@type'])) {\n        this.onSelectItem(item);\n      }\n    } else {\n      if (this.isSelectable(item)) {\n        if (\n          !this.props.maximumSelectionSize ||\n          this.props.mode === 'multiple' ||\n          !this.props.data ||\n          this.props.data.length < this.props.maximumSelectionSize\n        ) {\n          this.onSelectItem(item);\n          let length = this.props.data ? this.props.data.length : 0;\n\n          let stopSelecting =\n            this.props.mode !== 'multiple' ||\n            (this.props.maximumSelectionSize > 0 &&\n              length + 1 >= this.props.maximumSelectionSize);\n\n          if (stopSelecting) {\n            this.props.closeObjectBrowser();\n          }\n        } else {\n          this.props.closeObjectBrowser();\n        }\n      } else {\n        this.navigateTo(item['@id']);\n      }\n    }\n  };\n\n  handleDoubleClickOnItem = (item) => {\n    if (this.props.mode === 'image') {\n      if (item.is_folderish) {\n        this.navigateTo(item['@id']);\n      }\n      if (config.settings.imageObjects.includes(item['@type'])) {\n        this.onSelectItem(item);\n        this.props.closeObjectBrowser();\n      }\n    } else {\n      if (this.isSelectable(item)) {\n        if (this.props.data.length < this.props.maximumSelectionSize) {\n          this.onSelectItem(item);\n        }\n        this.props.closeObjectBrowser();\n      } else {\n        this.navigateTo(item['@id']);\n      }\n    }\n  };\n\n  /**\n   * Render method.\n   * @method render\n   * @returns {string} Markup for the component.\n   */\n  render() {\n    return (\n      <Segment.Group raised>\n        <header className=\"header pulled\">\n          <div className=\"vertical divider\" />\n          {this.state.currentFolder === '/' ? (\n            <>\n              {this.props.mode === 'image' ? (\n                <Icon name={folderSVG} size=\"24px\" />\n              ) : (\n                <Icon name={linkSVG} size=\"24px\" />\n              )}\n            </>\n          ) : (\n            <button\n              aria-label={this.props.intl.formatMessage(messages.back)}\n              onClick={() => this.navigateTo(this.state.parentFolder)}\n            >\n              <Icon name={backSVG} size=\"24px\" />\n            </button>\n          )}\n          {this.state.showSearchInput ? (\n            <Input\n              className=\"search\"\n              ref={this.searchInputRef}\n              onChange={this.onSearch}\n              placeholder={this.props.intl.formatMessage(\n                messages.SearchInputPlaceholder,\n              )}\n            />\n          ) : this.props.mode === 'image' ? (\n            <h2>\n              <FormattedMessage\n                id=\"Choose Image\"\n                defaultMessage=\"Choose Image\"\n              />\n            </h2>\n          ) : (\n            <h2>\n              <FormattedMessage\n                id=\"Choose Target\"\n                defaultMessage=\"Choose Target\"\n              />\n            </h2>\n          )}\n\n          <button\n            aria-label={this.props.intl.formatMessage(messages.search)}\n            onClick={this.toggleSearchInput}\n          >\n            <Icon name={searchSVG} size=\"24px\" />\n          </button>\n          <button className=\"clearSVG\" onClick={this.props.closeObjectBrowser}>\n            <Icon name={clearSVG} size=\"24px\" />\n          </button>\n        </header>\n        <Segment secondary className=\"breadcrumbs\" vertical>\n          <Breadcrumb>\n            {this.state.currentFolder !== '/' ? (\n              this.state.currentFolder.split('/').map((item, index, items) => {\n                return (\n                  <React.Fragment key={`divider-${item}-${index}`}>\n                    {index === 0 ? (\n                      <Breadcrumb.Section onClick={() => this.navigateTo('/')}>\n                        <Icon\n                          className=\"home-icon\"\n                          name={homeSVG}\n                          size=\"18px\"\n                        />\n                      </Breadcrumb.Section>\n                    ) : (\n                      <>\n                        <Breadcrumb.Divider key={`divider-${item.url}`} />\n                        <Breadcrumb.Section\n                          onClick={() =>\n                            this.navigateTo(items.slice(0, index + 1).join('/'))\n                          }\n                        >\n                          {item}\n                        </Breadcrumb.Section>\n                      </>\n                    )}\n                  </React.Fragment>\n                );\n              })\n            ) : (\n              <Breadcrumb.Section onClick={() => this.navigateTo('/')}>\n                <Icon className=\"home-icon\" name={homeSVG} size=\"18px\" />\n              </Breadcrumb.Section>\n            )}\n          </Breadcrumb>\n        </Segment>\n        {this.props.mode === 'multiple' && (\n          <Segment className=\"infos\">\n            {this.props.intl.formatMessage(messages.SelectedItems)}:{' '}\n            {this.props.data?.length}\n            {this.props.maximumSelectionSize > 0 && (\n              <>\n                {' '}\n                {this.props.intl.formatMessage(messages.of)}{' '}\n                {this.props.maximumSelectionSize}\n              </>\n            )}\n          </Segment>\n        )}\n        <ObjectBrowserNav\n          currentSearchResults={\n            this.props.searchSubrequests[\n              `${this.props.block}-${this.props.mode}`\n            ]\n          }\n          selected={\n            this.props.mode === 'multiple'\n              ? this.props.data\n              : [\n                  {\n                    '@id':\n                      this.props.mode === 'image'\n                        ? this.state.selectedImage\n                        : this.state.selectedHref,\n                  },\n                ]\n          }\n          handleClickOnItem={this.handleClickOnItem}\n          handleDoubleClickOnItem={this.handleDoubleClickOnItem}\n          mode={this.props.mode}\n          navigateTo={this.navigateTo}\n          isSelectable={this.isSelectable}\n        />\n      </Segment.Group>\n    );\n  }\n}\n\nexport default compose(\n  injectIntl,\n  connect(\n    (state) => ({\n      searchSubrequests: state.search.subrequests,\n    }),\n    { searchContent },\n  ),\n)(ObjectBrowserBody);\n"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,OAAO,QAAQ,OAAO;AAC/B,SAASC,OAAO,QAAQ,aAAa;AACrC,SAASC,cAAc,EAAEC,gBAAgB,EAAEC,UAAU,QAAQ,YAAY;AACzE,SAASC,KAAK,EAAEC,OAAO,EAAEC,UAAU,QAAQ,mBAAmB;AAI9D;AACA;AACA;AACA,SAASC,aAAa,QAAQ,oCAAoC;AAClE,OAAOC,IAAI,MAAM,yCAAyC;AAC1D,SAASC,eAAe,EAAEC,aAAa,QAAQ,8BAA8B;AAC7E,OAAOC,MAAM,MAAM,uBAAuB;AAE1C,OAAOC,OAAO,MAAM,6BAA6B;AACjD,OAAOC,SAAS,MAAM,+BAA+B;AACrD,OAAOC,QAAQ,MAAM,8BAA8B;AACnD,OAAOC,SAAS,MAAM,6BAA6B;AACnD,OAAOC,OAAO,MAAM,6BAA6B;AACjD,OAAOC,OAAO,MAAM,6BAA6B;AAEjD,OAAOC,gBAAgB,MAAM,yDAAyD;AAEtF,IAAMC,QAAQ,GAAGlB,cAAc,CAAC;EAC9BmB,sBAAsB;IAAA;IAAA;EAAA,CAGrB;EACDC,aAAa;IAAA;IAAA;EAAA,CAGZ;EACDC,IAAI;IAAA;IAAA;EAAA,CAGH;EACDC,MAAM;IAAA;IAAA;EAAA,CAGL;EACDC,EAAE;IAAA;IAAA;EAAA;AACJ,CAAC,CAAC;AAEF,SAASC,YAAY,CAACC,GAAG,EAAE;EACzB,OAAOjB,eAAe,WAAI,MAAKiB,GAAG,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,EAAG,IAAI,GAAG;AAC5E;;AAEA;AACA;AACA;AACA;AACA;AAJA,IAKMC,iBAAiB;EAAA;EAAA;EACrB;AACF;AACA;AACA;AACA;;EAgBE;AACF;AACA;AACA;AACA;;EAWE;AACF;AACA;AACA;AACA;AACA;EACE,2BAAYC,KAAK,EAAE;IAAA;IAAA;IAAA;IACjB,0BAAMA,KAAK;IAAE,gEAiDC,UAACC,IAAI,EAAK;MACxB,IAAMC,eAAe,GACnBD,IAAI,KAAK,UAAU,GACf,EAAE,GACFA,IAAI,KAAK,OAAO,GAChB,MAAKE,KAAK,CAACC,aAAa,GACxB,MAAKD,KAAK,CAACE,YAAY;MAC7B,IAAIH,eAAe,IAAItB,aAAa,CAACsB,eAAe,CAAC,EAAE;QACrD,MAAKF,KAAK,CAACvB,aAAa,CACtBkB,YAAY,CAACO,eAAe,CAAC,EAC7B;UACE,YAAY,EAAE,CAAC;UACfI,OAAO,EAAE,wBAAwB;UACjCC,eAAe,EAAE,MAAM;UACvBC,MAAM,EAAE;QACV,CAAC,YACE,MAAKR,KAAK,CAACS,KAAK,cAAIR,IAAI,EAC5B;MACH,CAAC,MAAM;QACL,MAAKD,KAAK,CAACvB,aAAa,CACtB,MAAK0B,KAAK,CAACO,aAAa,EACxB;UACE,YAAY,EAAE,CAAC;UACfJ,OAAO,EAAE,wBAAwB;UACjCC,eAAe,EAAE,MAAM;UACvBC,MAAM,EAAE;QACV,CAAC,YACE,MAAKR,KAAK,CAACS,KAAK,cAAIR,IAAI,EAC5B;MACH;IACF,CAAC;IAAA,6DAEY,UAACU,EAAE,EAAK;MACnB,MAAKX,KAAK,CAACvB,aAAa,CACtBkC,EAAE,EACF;QACE,YAAY,EAAE,CAAC;QACfL,OAAO,EAAE,wBAAwB;QACjCC,eAAe,EAAE,MAAM;QACvBC,MAAM,EAAE;MACV,CAAC,YACE,MAAKR,KAAK,CAACS,KAAK,cAAI,MAAKT,KAAK,CAACC,IAAI,EACvC;MACD,IAAMW,MAAM,GAAG,UAAG,MAAKD,EAAE,CAACd,KAAK,CAAC,GAAG,CAAC,CAACC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,KAAM,GAAG;MAChE,MAAKe,QAAQ,CAAC;QAAA,OAAO;UACnBC,YAAY,EAAEF,MAAM;UACpBF,aAAa,EAAEC,EAAE,IAAI;QACvB,CAAC;MAAA,CAAC,CAAC;IACL,CAAC;IAAA,oEAEmB;MAAA,OAClB,MAAKE,QAAQ,CACX,UAACE,SAAS;QAAA,OAAM;UACdC,eAAe,EAAE,CAACD,SAAS,CAACC;QAC9B,CAAC;MAAA,CAAC,EACF,YAAM;QAAA;QACJ,4BAAI,MAAKC,cAAc,iDAAnB,qBAAqBC,OAAO,EAAE,MAAKD,cAAc,CAACC,OAAO,CAACC,KAAK,EAAE;MACvE,CAAC,CACF;IAAA;IAAA,2DAEQ,UAACC,CAAC,EAAK;MAChB,IAAMC,IAAI,GAAG1C,eAAe,CAACyC,CAAC,CAACE,MAAM,CAACC,KAAK,CAAC;MAC5C,IAAIF,IAAI,CAACG,UAAU,CAAC,GAAG,CAAC,EAAE;QACxB,MAAKX,QAAQ,CAAC;UAAEH,aAAa,EAAEW;QAAK,CAAC,CAAC;QACtC,MAAKrB,KAAK,CAACvB,aAAa,CACtB4C,IAAI,EACJ;UACE,YAAY,EAAE,CAAC;UACff,OAAO,EAAE,wBAAwB;UACjCC,eAAe,EAAE,MAAM;UACvBkB,WAAW,EAAE,MAAKtB,KAAK,CAACuB;QAC1B,CAAC,YACE,MAAK1B,KAAK,CAACS,KAAK,cAAI,MAAKT,KAAK,CAACC,IAAI,EACvC;MACH,CAAC,MAAM;QACLoB,IAAI,CAACM,MAAM,GAAG,CAAC,GACX,MAAK3B,KAAK,CAACvB,aAAa,CACtB,GAAG,EACH;UACEmD,cAAc,YAAKP,IAAI,MAAG;UAC1Bd,eAAe,EAAE,MAAM;UACvBkB,WAAW,EAAE,MAAKtB,KAAK,CAACuB;QAC1B,CAAC,YACE,MAAK1B,KAAK,CAACS,KAAK,cAAI,MAAKT,KAAK,CAACC,IAAI,EACvC,GACD,MAAKD,KAAK,CAACvB,aAAa,CACtB,GAAG,EACH;UACE,YAAY,EAAE,CAAC;UACf6B,OAAO,EAAE,wBAAwB;UACjCC,eAAe,EAAE,MAAM;UACvBkB,WAAW,EAAE,MAAKtB,KAAK,CAACuB;QAC1B,CAAC,YACE,MAAK1B,KAAK,CAACS,KAAK,cAAI,MAAKT,KAAK,CAACC,IAAI,EACvC;MACP;IACF,CAAC;IAAA,+DAEc,UAAC4B,IAAI,EAAK;MACvB,IAAMjC,GAAG,GAAGiC,IAAI,CAAC,KAAK,CAAC;MACvB,kBAAuD,MAAK7B,KAAK;QAAzDS,KAAK,eAALA,KAAK;QAAEqB,IAAI,eAAJA,IAAI;QAAE7B,IAAI,eAAJA,IAAI;QAAE8B,QAAQ,eAARA,QAAQ;QAAEC,aAAa,eAAbA,aAAa;MAElD,IAAMC,WAAW,GAAG,SAAdA,WAAW,CAAIhC,IAAI,EAAK;QAC5B,QAAQA,IAAI;UACV,KAAK,OAAO;YACV,MAAKY,QAAQ,CAAC;cACZT,aAAa,EAAER,GAAG;cAClBsC,kBAAkB,EAAEvC,YAAY,CAACC,GAAG;YACtC,CAAC,CAAC;YACF;UACF,KAAK,MAAM;YACT,MAAKiB,QAAQ,CAAC;cACZR,YAAY,EAAET,GAAG;cACjBuC,iBAAiB,EAAExC,YAAY,CAACC,GAAG;YACrC,CAAC,CAAC;YACF;UACF;YACE;QAAM;MAEZ,CAAC;MAED,IAAImC,QAAQ,EAAE;QACZC,aAAa,CAACvB,KAAK,kCACdqB,IAAI,2BACNC,QAAQ,EAAGnC,GAAG,GACf;MACJ,CAAC,MAAM,IAAI,MAAKI,KAAK,CAACoC,YAAY,EAAE;QAClC,MAAKpC,KAAK,CAACoC,YAAY,CAACxC,GAAG,EAAEiC,IAAI,CAAC;MACpC,CAAC,MAAM,IAAI5B,IAAI,KAAK,OAAO,EAAE;QAC3B+B,aAAa,CAACvB,KAAK,kCACdqB,IAAI;UACPlC,GAAG,EAAEjB,eAAe,CAACkD,IAAI,CAACQ,MAAM,CAAC;UACjCC,GAAG,EAAE;QAAE,GACP;MACJ,CAAC,MAAM,IAAIrC,IAAI,KAAK,MAAM,EAAE;QAC1B+B,aAAa,CAACvB,KAAK,kCACdqB,IAAI;UACPS,IAAI,EAAE5D,eAAe,CAACiB,GAAG;QAAC,GAC1B;MACJ;MACAqC,WAAW,CAAChC,IAAI,CAAC;IACnB,CAAC;IAAA,oEAEmB,UAACuC,GAAG,EAAEjB,KAAK,EAAK;MAClC,MAAKvB,KAAK,CAACgC,aAAa,CAAC,MAAKhC,KAAK,CAACS,KAAK,kCACpC,MAAKT,KAAK,CAAC8B,IAAI,2BACjBU,GAAG,EAAGjB,KAAK,GACZ;IACJ,CAAC;IAAA,+DAEc,UAACM,IAAI,EAAK;MACvB,OAAO,MAAK7B,KAAK,CAACyC,eAAe,CAACd,MAAM,GAAG,CAAC,GACxC,MAAK3B,KAAK,CAACyC,eAAe,CAACC,OAAO,CAACb,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,GACtD,IAAI;IACV,CAAC;IAAA,oEAEmB,UAACA,IAAI,EAAK;MAC5B,IAAI,MAAK7B,KAAK,CAACC,IAAI,KAAK,OAAO,EAAE;QAC/B,IAAI4B,IAAI,CAACc,YAAY,EAAE;UACrB,MAAKC,UAAU,CAACf,IAAI,CAAC,KAAK,CAAC,CAAC;QAC9B;QACA,IAAIhD,MAAM,CAACgE,QAAQ,CAACC,YAAY,CAACC,QAAQ,CAAClB,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE;UACxD,MAAKO,YAAY,CAACP,IAAI,CAAC;QACzB;MACF,CAAC,MAAM;QACL,IAAI,MAAKmB,YAAY,CAACnB,IAAI,CAAC,EAAE;UAC3B,IACE,CAAC,MAAK7B,KAAK,CAACiD,oBAAoB,IAChC,MAAKjD,KAAK,CAACC,IAAI,KAAK,UAAU,IAC9B,CAAC,MAAKD,KAAK,CAAC8B,IAAI,IAChB,MAAK9B,KAAK,CAAC8B,IAAI,CAACH,MAAM,GAAG,MAAK3B,KAAK,CAACiD,oBAAoB,EACxD;YACA,MAAKb,YAAY,CAACP,IAAI,CAAC;YACvB,IAAIF,MAAM,GAAG,MAAK3B,KAAK,CAAC8B,IAAI,GAAG,MAAK9B,KAAK,CAAC8B,IAAI,CAACH,MAAM,GAAG,CAAC;YAEzD,IAAIuB,aAAa,GACf,MAAKlD,KAAK,CAACC,IAAI,KAAK,UAAU,IAC7B,MAAKD,KAAK,CAACiD,oBAAoB,GAAG,CAAC,IAClCtB,MAAM,GAAG,CAAC,IAAI,MAAK3B,KAAK,CAACiD,oBAAqB;YAElD,IAAIC,aAAa,EAAE;cACjB,MAAKlD,KAAK,CAACmD,kBAAkB,EAAE;YACjC;UACF,CAAC,MAAM;YACL,MAAKnD,KAAK,CAACmD,kBAAkB,EAAE;UACjC;QACF,CAAC,MAAM;UACL,MAAKP,UAAU,CAACf,IAAI,CAAC,KAAK,CAAC,CAAC;QAC9B;MACF;IACF,CAAC;IAAA,0EAEyB,UAACA,IAAI,EAAK;MAClC,IAAI,MAAK7B,KAAK,CAACC,IAAI,KAAK,OAAO,EAAE;QAC/B,IAAI4B,IAAI,CAACc,YAAY,EAAE;UACrB,MAAKC,UAAU,CAACf,IAAI,CAAC,KAAK,CAAC,CAAC;QAC9B;QACA,IAAIhD,MAAM,CAACgE,QAAQ,CAACC,YAAY,CAACC,QAAQ,CAAClB,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE;UACxD,MAAKO,YAAY,CAACP,IAAI,CAAC;UACvB,MAAK7B,KAAK,CAACmD,kBAAkB,EAAE;QACjC;MACF,CAAC,MAAM;QACL,IAAI,MAAKH,YAAY,CAACnB,IAAI,CAAC,EAAE;UAC3B,IAAI,MAAK7B,KAAK,CAAC8B,IAAI,CAACH,MAAM,GAAG,MAAK3B,KAAK,CAACiD,oBAAoB,EAAE;YAC5D,MAAKb,YAAY,CAACP,IAAI,CAAC;UACzB;UACA,MAAK7B,KAAK,CAACmD,kBAAkB,EAAE;QACjC,CAAC,MAAM;UACL,MAAKP,UAAU,CAACf,IAAI,CAAC,KAAK,CAAC,CAAC;QAC9B;MACF;IACF,CAAC;IAnQC,MAAK1B,KAAK,GAAG;MACXO,aAAa,EACX,MAAKV,KAAK,CAACC,IAAI,KAAK,UAAU,GAAG,GAAG,GAAG,MAAKD,KAAK,CAACoD,UAAU,IAAI,GAAG;MACrElB,kBAAkB,EAChB,MAAKlC,KAAK,CAACC,IAAI,KAAK,UAAU,GAC1B,GAAG,GACH,MAAKD,KAAK,CAACC,IAAI,KAAK,OAAO,wBAAI,MAAKD,KAAK,CAAC8B,IAAI,6CAAf,iBAAiBlC,GAAG,GACnDD,YAAY,CAAC,MAAKK,KAAK,CAAC8B,IAAI,CAAClC,GAAG,CAAC,GACjC,GAAG;MACTuC,iBAAiB,EACf,MAAKnC,KAAK,CAACC,IAAI,KAAK,UAAU,GAC1B,GAAG,GACH,MAAKD,KAAK,CAACC,IAAI,KAAK,MAAM,yBAAI,MAAKD,KAAK,CAAC8B,IAAI,8CAAf,kBAAiBS,IAAI,GACnD5C,YAAY,CAAC,MAAKK,KAAK,CAAC8B,IAAI,CAACS,IAAI,CAAC,GAClC,GAAG;MACTzB,YAAY,EAAE,EAAE;MAChBV,aAAa,EACX,MAAKJ,KAAK,CAACC,IAAI,KAAK,UAAU,GAC1B,EAAE,GACF,MAAKD,KAAK,CAACC,IAAI,KAAK,OAAO,yBAAI,MAAKD,KAAK,CAAC8B,IAAI,8CAAf,kBAAiBlC,GAAG,GACnDjB,eAAe,CAAC,MAAKqB,KAAK,CAAC8B,IAAI,CAAClC,GAAG,CAAC,GACpC,EAAE;MACRS,YAAY,EACV,MAAKL,KAAK,CAACC,IAAI,KAAK,UAAU,GAC1B,EAAE,GACF,MAAKD,KAAK,CAACC,IAAI,KAAK,MAAM,yBAAI,MAAKD,KAAK,CAAC8B,IAAI,8CAAf,kBAAiBS,IAAI,GACnD5D,eAAe,CAAC,MAAKqB,KAAK,CAAC8B,IAAI,CAACS,IAAI,CAAC,GACrC,EAAE;MACRvB,eAAe,EAAE,KAAK;MACtB;MACA;MACAU,eAAe,EACb,MAAK1B,KAAK,CAACC,IAAI,KAAK,OAAO,GACvB,MAAKD,KAAK,CAAC0B,eAAe,IAAI7C,MAAM,CAACgE,QAAQ,CAACC,YAAY,GAC1D,MAAK9C,KAAK,CAAC0B;IACnB,CAAC;IACD,MAAKT,cAAc,gBAAGnD,KAAK,CAACuF,SAAS,EAAE;IAAC;EAC1C;;EAEA;AACF;AACA;AACA;AACA;EAJE;IAAA;IAAA,OAKA,6BAAoB;MAClB,IAAI,CAACC,aAAa,CAAC,IAAI,CAACtD,KAAK,CAACC,IAAI,CAAC;IACrC;EAAC;IAAA;IAAA;IAuND;AACF;AACA;AACA;AACA;IACE,kBAAS;MAAA;QAAA;MACP,OACE,MAAC,OAAO,CAAC,KAAK;QAAC,MAAM;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,GACnB;QAAQ,SAAS,EAAC,eAAe;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,GAC/B;QAAK,SAAS,EAAC,kBAAkB;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EAAG,EACnC,IAAI,CAACE,KAAK,CAACO,aAAa,KAAK,GAAG,GAC/B,4BACG,IAAI,CAACV,KAAK,CAACC,IAAI,KAAK,OAAO,GAC1B,MAAC,IAAI;QAAC,IAAI,EAAElB,SAAU;QAAC,IAAI,EAAC,MAAM;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EAAG,GAErC,MAAC,IAAI;QAAC,IAAI,EAAEG,OAAQ;QAAC,IAAI,EAAC,MAAM;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EACjC,CACA,GAEH;QACE,cAAY,IAAI,CAACc,KAAK,CAACuD,IAAI,CAACC,aAAa,CAACnE,QAAQ,CAACG,IAAI,CAAE;QACzD,OAAO,EAAE;UAAA,OAAM,MAAI,CAACoD,UAAU,CAAC,MAAI,CAACzC,KAAK,CAACW,YAAY,CAAC;QAAA,CAAC;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,GAExD,MAAC,IAAI;QAAC,IAAI,EAAEhC,OAAQ;QAAC,IAAI,EAAC,MAAM;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EAAG,CAEtC,EACA,IAAI,CAACqB,KAAK,CAACa,eAAe,GACzB,MAAC,KAAK;QACJ,SAAS,EAAC,QAAQ;QAClB,GAAG,EAAE,IAAI,CAACC,cAAe;QACzB,QAAQ,EAAE,IAAI,CAACwC,QAAS;QACxB,WAAW,EAAE,IAAI,CAACzD,KAAK,CAACuD,IAAI,CAACC,aAAa,CACxCnE,QAAQ,CAACC,sBAAsB,CAC/B;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EACF,GACA,IAAI,CAACU,KAAK,CAACC,IAAI,KAAK,OAAO,GAC7B;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,GACE,MAAC,gBAAgB;QACf,EAAE,EAAC,cAAc;QACjB,cAAc,EAAC,cAAc;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EAC7B,CACC,GAEL;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,GACE,MAAC,gBAAgB;QACf,EAAE,EAAC,eAAe;QAClB,cAAc,EAAC,eAAe;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EAC9B,CAEL,EAED;QACE,cAAY,IAAI,CAACD,KAAK,CAACuD,IAAI,CAACC,aAAa,CAACnE,QAAQ,CAACI,MAAM,CAAE;QAC3D,OAAO,EAAE,IAAI,CAACiE,iBAAkB;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,GAEhC,MAAC,IAAI;QAAC,IAAI,EAAEzE,SAAU;QAAC,IAAI,EAAC,MAAM;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EAAG,CAC9B,EACT;QAAQ,SAAS,EAAC,UAAU;QAAC,OAAO,EAAE,IAAI,CAACe,KAAK,CAACmD,kBAAmB;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,GAClE,MAAC,IAAI;QAAC,IAAI,EAAEnE,QAAS;QAAC,IAAI,EAAC,MAAM;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EAAG,CAC7B,CACF,EACT,MAAC,OAAO;QAAC,SAAS;QAAC,SAAS,EAAC,aAAa;QAAC,QAAQ;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,GACjD,MAAC,UAAU;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,GACR,IAAI,CAACmB,KAAK,CAACO,aAAa,KAAK,GAAG,GAC/B,IAAI,CAACP,KAAK,CAACO,aAAa,CAACb,KAAK,CAAC,GAAG,CAAC,CAAC8D,GAAG,CAAC,UAAC9B,IAAI,EAAE+B,KAAK,EAAEC,KAAK,EAAK;QAC9D,OACE,MAAC,KAAK,CAAC,QAAQ;UAAC,GAAG,oBAAahC,IAAI,cAAI+B,KAAK,CAAG;UAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QAAA,GAC7CA,KAAK,KAAK,CAAC,GACV,MAAC,UAAU,CAAC,OAAO;UAAC,OAAO,EAAE;YAAA,OAAM,MAAI,CAAChB,UAAU,CAAC,GAAG,CAAC;UAAA,CAAC;UAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QAAA,GACtD,MAAC,IAAI;UACH,SAAS,EAAC,WAAW;UACrB,IAAI,EAAEzD,OAAQ;UACd,IAAI,EAAC,MAAM;UAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QAAA,EACX,CACiB,GAErB,4BACE,MAAC,UAAU,CAAC,OAAO;UAAC,GAAG,oBAAa0C,IAAI,CAACjC,GAAG,CAAG;UAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QAAA,EAAG,EAClD,MAAC,UAAU,CAAC,OAAO;UACjB,OAAO,EAAE;YAAA,OACP,MAAI,CAACgD,UAAU,CAACiB,KAAK,CAAC/D,KAAK,CAAC,CAAC,EAAE8D,KAAK,GAAG,CAAC,CAAC,CAACE,IAAI,CAAC,GAAG,CAAC,CAAC;UAAA,CACrD;UAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QAAA,GAEAjC,IAAI,CACc,CAExB,CACc;MAErB,CAAC,CAAC,GAEF,MAAC,UAAU,CAAC,OAAO;QAAC,OAAO,EAAE;UAAA,OAAM,MAAI,CAACe,UAAU,CAAC,GAAG,CAAC;QAAA,CAAC;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,GACtD,MAAC,IAAI;QAAC,SAAS,EAAC,WAAW;QAAC,IAAI,EAAEzD,OAAQ;QAAC,IAAI,EAAC,MAAM;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EAAG,CAE5D,CACU,CACL,EACT,IAAI,CAACa,KAAK,CAACC,IAAI,KAAK,UAAU,IAC7B,MAAC,OAAO;QAAC,SAAS,EAAC,OAAO;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,GACvB,IAAI,CAACD,KAAK,CAACuD,IAAI,CAACC,aAAa,CAACnE,QAAQ,CAACE,aAAa,CAAC,OAAG,GAAG,uBAC3D,IAAI,CAACS,KAAK,CAAC8B,IAAI,sDAAf,kBAAiBH,MAAM,EACvB,IAAI,CAAC3B,KAAK,CAACiD,oBAAoB,GAAG,CAAC,IAClC,4BACG,GAAG,EACH,IAAI,CAACjD,KAAK,CAACuD,IAAI,CAACC,aAAa,CAACnE,QAAQ,CAACK,EAAE,CAAC,EAAE,GAAG,EAC/C,IAAI,CAACM,KAAK,CAACiD,oBAAoB,CAEnC,CAEJ,EACD,MAAC,gBAAgB;QACf,oBAAoB,EAClB,IAAI,CAACjD,KAAK,CAAC+D,iBAAiB,WACvB,IAAI,CAAC/D,KAAK,CAACS,KAAK,cAAI,IAAI,CAACT,KAAK,CAACC,IAAI,EAEzC;QACD,QAAQ,EACN,IAAI,CAACD,KAAK,CAACC,IAAI,KAAK,UAAU,GAC1B,IAAI,CAACD,KAAK,CAAC8B,IAAI,GACf,CACE;UACE,KAAK,EACH,IAAI,CAAC9B,KAAK,CAACC,IAAI,KAAK,OAAO,GACvB,IAAI,CAACE,KAAK,CAACC,aAAa,GACxB,IAAI,CAACD,KAAK,CAACE;QACnB,CAAC,CAER;QACD,iBAAiB,EAAE,IAAI,CAAC2D,iBAAkB;QAC1C,uBAAuB,EAAE,IAAI,CAACC,uBAAwB;QACtD,IAAI,EAAE,IAAI,CAACjE,KAAK,CAACC,IAAK;QACtB,UAAU,EAAE,IAAI,CAAC2C,UAAW;QAC5B,YAAY,EAAE,IAAI,CAACI,YAAa;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EAChC,CACY;IAEpB;EAAC;EAAA;AAAA,EAzb6BjF,SAAS;AAAA,gBAAnCgC,iBAAiB,eAMF;EACjBU,KAAK,EAAEzC,SAAS,CAACkG,MAAM,CAACC,UAAU;EAClClE,IAAI,EAAEjC,SAAS,CAACkG,MAAM,CAACC,UAAU;EACjCrC,IAAI,EAAE9D,SAAS,CAACoG,GAAG,CAACD,UAAU;EAC9BJ,iBAAiB,EAAE/F,SAAS,CAACqG,QAAQ,CAACrG,SAAS,CAACoG,GAAG,CAAC,CAACD,UAAU;EAC/D1F,aAAa,EAAET,SAAS,CAACsG,IAAI,CAACH,UAAU;EACxChB,kBAAkB,EAAEnF,SAAS,CAACsG,IAAI,CAACH,UAAU;EAC7CnC,aAAa,EAAEhE,SAAS,CAACsG,IAAI,CAACH,UAAU;EACxC/B,YAAY,EAAEpE,SAAS,CAACsG,IAAI;EAC5BvC,QAAQ,EAAE/D,SAAS,CAACkG,MAAM;EAC1BjB,oBAAoB,EAAEjF,SAAS,CAACuG,MAAM;EACtCnB,UAAU,EAAEpF,SAAS,CAACkG,MAAM;EAC5BxC,eAAe,EAAE1D,SAAS,CAACwG,OAAO,CAACxG,SAAS,CAACkG,MAAM;AACrD,CAAC;AAAA,gBAnBGnE,iBAAiB,kBA0BC;EACpB0E,KAAK,EAAE,EAAE;EACTlC,IAAI,EAAE,EAAE;EACRH,YAAY,EAAE,IAAI;EAClBL,QAAQ,EAAE,IAAI;EACdU,eAAe,EAAE,EAAE;EACnBf,eAAe,EAAE,IAAI;EACrBuB,oBAAoB,EAAE;AACxB,CAAC;AA0ZH,eAAehF,OAAO,CACpBI,UAAU,EACVH,OAAO,CACL,UAACiC,KAAK;EAAA,OAAM;IACV4D,iBAAiB,EAAE5D,KAAK,CAACV,MAAM,CAACiF;EAClC,CAAC;AAAA,CAAC,EACF;EAAEjG,aAAa,EAAbA;AAAc,CAAC,CAClB,CACF,CAACsB,iBAAiB,CAAC"},"metadata":{"react-intl":{"messages":[{"id":"Search content","defaultMessage":"Search content"},{"id":"Selected items","defaultMessage":"Selected items"},{"id":"Back","defaultMessage":"Back"},{"id":"Search SVG","defaultMessage":"Search SVG"},{"id":"Selected items - x of y","defaultMessage":"of"},{"id":"Choose Image","defaultMessage":"Choose Image"},{"id":"Choose Target","defaultMessage":"Choose Target"}]}},"sourceType":"module","externalDependencies":[]}