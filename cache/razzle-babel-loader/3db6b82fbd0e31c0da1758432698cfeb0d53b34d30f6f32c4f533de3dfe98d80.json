{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nimport { GET_QUERYSTRING_RESULTS } from '@plone/volto/constants/ActionTypes';\nimport config from '@plone/volto/registry';\n\n/**\n * Get querystring results.\n * @function getQueryStringResults\n * @param {Object} data Data.\n * @returns {Object} Get querystringsearch results action.\n */\nexport function getQueryStringResults(path, data, subrequest, page) {\n  const {\n    settings\n  } = config;\n\n  // fixes https://github.com/plone/volto/issues/1059\n  let requestData = JSON.parse(JSON.stringify(data));\n  if ((data === null || data === void 0 ? void 0 : data.depth) != null) {\n    delete requestData.depth;\n    requestData.query.forEach(q => {\n      if (q.i === 'path') {\n        q.v += '::' + data.depth;\n      }\n    });\n  }\n\n  // fixes https://github.com/plone/volto/issues/2397\n  if ((requestData === null || requestData === void 0 ? void 0 : requestData.sort_order) !== null) {\n    if (typeof requestData.sort_order === 'boolean') {\n      requestData.sort_order = requestData.sort_order ? 'descending' : 'ascending';\n    }\n  }\n  return {\n    type: GET_QUERYSTRING_RESULTS,\n    subrequest,\n    request: {\n      op: 'post',\n      path: `${path}/@querystring-search`,\n      data: _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, requestData), !requestData.b_size && {\n        b_size: settings.defaultPageSize\n      }), page && {\n        b_start: requestData.b_size ? data.b_size * (page - 1) : settings.defaultPageSize * (page - 1)\n      }), {}, {\n        query: requestData === null || requestData === void 0 ? void 0 : requestData.query\n      })\n    }\n  };\n}","map":{"version":3,"names":["GET_QUERYSTRING_RESULTS","config","getQueryStringResults","path","data","subrequest","page","settings","requestData","JSON","parse","stringify","depth","query","forEach","q","i","v","sort_order","type","request","op","b_size","defaultPageSize","b_start"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@plone/volto/src/actions/querystringsearch/querystringsearch.js"],"sourcesContent":["import { GET_QUERYSTRING_RESULTS } from '@plone/volto/constants/ActionTypes';\nimport config from '@plone/volto/registry';\n\n/**\n * Get querystring results.\n * @function getQueryStringResults\n * @param {Object} data Data.\n * @returns {Object} Get querystringsearch results action.\n */\nexport function getQueryStringResults(path, data, subrequest, page) {\n  const { settings } = config;\n\n  // fixes https://github.com/plone/volto/issues/1059\n  let requestData = JSON.parse(JSON.stringify(data));\n\n  if (data?.depth != null) {\n    delete requestData.depth;\n    requestData.query.forEach((q) => {\n      if (q.i === 'path') {\n        q.v += '::' + data.depth;\n      }\n    });\n  }\n\n  // fixes https://github.com/plone/volto/issues/2397\n  if (requestData?.sort_order !== null) {\n    if (typeof requestData.sort_order === 'boolean') {\n      requestData.sort_order = requestData.sort_order\n        ? 'descending'\n        : 'ascending';\n    }\n  }\n\n  return {\n    type: GET_QUERYSTRING_RESULTS,\n    subrequest,\n    request: {\n      op: 'post',\n      path: `${path}/@querystring-search`,\n      data: {\n        ...requestData,\n        ...(!requestData.b_size && {\n          b_size: settings.defaultPageSize,\n        }),\n        ...(page && {\n          b_start: requestData.b_size\n            ? data.b_size * (page - 1)\n            : settings.defaultPageSize * (page - 1),\n        }),\n        query: requestData?.query,\n      },\n    },\n  };\n}\n"],"mappings":";;;AAAA,SAASA,uBAAuB,QAAQ,oCAAoC;AAC5E,OAAOC,MAAM,MAAM,uBAAuB;;AAE1C;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,qBAAqB,CAACC,IAAI,EAAEC,IAAI,EAAEC,UAAU,EAAEC,IAAI,EAAE;EAClE,MAAM;IAAEC;EAAS,CAAC,GAAGN,MAAM;;EAE3B;EACA,IAAIO,WAAW,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACP,IAAI,CAAC,CAAC;EAElD,IAAI,CAAAA,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEQ,KAAK,KAAI,IAAI,EAAE;IACvB,OAAOJ,WAAW,CAACI,KAAK;IACxBJ,WAAW,CAACK,KAAK,CAACC,OAAO,CAAEC,CAAC,IAAK;MAC/B,IAAIA,CAAC,CAACC,CAAC,KAAK,MAAM,EAAE;QAClBD,CAAC,CAACE,CAAC,IAAI,IAAI,GAAGb,IAAI,CAACQ,KAAK;MAC1B;IACF,CAAC,CAAC;EACJ;;EAEA;EACA,IAAI,CAAAJ,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEU,UAAU,MAAK,IAAI,EAAE;IACpC,IAAI,OAAOV,WAAW,CAACU,UAAU,KAAK,SAAS,EAAE;MAC/CV,WAAW,CAACU,UAAU,GAAGV,WAAW,CAACU,UAAU,GAC3C,YAAY,GACZ,WAAW;IACjB;EACF;EAEA,OAAO;IACLC,IAAI,EAAEnB,uBAAuB;IAC7BK,UAAU;IACVe,OAAO,EAAE;MACPC,EAAE,EAAE,MAAM;MACVlB,IAAI,EAAG,GAAEA,IAAK,sBAAqB;MACnCC,IAAI,8DACCI,WAAW,GACV,CAACA,WAAW,CAACc,MAAM,IAAI;QACzBA,MAAM,EAAEf,QAAQ,CAACgB;MACnB,CAAC,GACGjB,IAAI,IAAI;QACVkB,OAAO,EAAEhB,WAAW,CAACc,MAAM,GACvBlB,IAAI,CAACkB,MAAM,IAAIhB,IAAI,GAAG,CAAC,CAAC,GACxBC,QAAQ,CAACgB,eAAe,IAAIjB,IAAI,GAAG,CAAC;MAC1C,CAAC;QACDO,KAAK,EAAEL,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEK;MAAK;IAE7B;EACF,CAAC;AACH"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}