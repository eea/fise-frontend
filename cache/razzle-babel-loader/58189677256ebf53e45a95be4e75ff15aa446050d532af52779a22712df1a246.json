{"ast":null,"code":"import _extends from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/extends.js\";\nimport _classCallCheck from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nvar _jsxFileName = \"/home/tooler/code/work/forests-frontend/src/develop/volto-forests-theme/src/customizations/volto/components/theme/View/View.jsx\";\nvar __jsx = React.createElement;\n/**\n * Customized View to include Header image and Portlets\n *\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { Portal } from 'react-portal';\nimport { injectIntl } from 'react-intl';\nimport qs from 'query-string';\nimport { Dimmer, Loader } from 'semantic-ui-react';\nimport { trackEvent } from '@eeacms/volto-matomo/utils';\nimport { ContentMetadataTags, Comments, Tags, Toolbar, Icon } from '@plone/volto/components';\nimport { listActions, getContent } from '@plone/volto/actions';\nimport { BodyClass, getBaseUrl, getLayoutFieldname } from '@plone/volto/helpers';\nimport config from '@plone/volto/registry';\nimport printer from '@plone/volto/icons/printer.svg';\n\n/**\n * View container class.\n * @class View\n * @extends Component\n */\nvar View = /*#__PURE__*/function (_Component) {\n  _inherits(View, _Component);\n  var _super = _createSuper(View);\n  function View() {\n    var _this;\n    _classCallCheck(this, View);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      hasObjectButtons: null,\n      isClient: false\n    });\n    _defineProperty(_assertThisInitialized(_this), \"getViewDefault\", function () {\n      return config.views.defaultView;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"getViewByType\", function () {\n      return config.views.contentTypesViews[_this.props.content['@type']] || null;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"getViewByLayout\", function () {\n      if (_this.props.pathname === '/') {\n        return config.views.layoutViews['document_view_wide'];\n      }\n      return config.views.layoutViews[_this.props.content[getLayoutFieldname(_this.props.content)]] || null;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"cleanViewName\", function (dirtyDisplayName) {\n      return dirtyDisplayName.replace('Connect(', '').replace('injectIntl(', '').replace(')', '').replace('connect(', '').toLowerCase();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"sortHtmlCollectionByPosition\", function (collection, patterns) {\n      var first = []; //  ~follow the pattern\n      var seccond = []; //   follow the pattern\n      if (collection && !collection.classList.contains('__sorted')) {\n        Array.prototype.forEach.call(collection.children, function (child) {\n          patterns.forEach(function (pattern) {\n            if (pattern.requirement === 'has' && child.classList.contains(pattern[\"class\"])) {\n              seccond.push({\n                item: child,\n                offsetTop: child.offsetTop,\n                offsetHeight: child.offsetHeight\n              });\n            } else first.push(child);\n          });\n        });\n        seccond.sort(function (a, b) {\n          return a.offsetTop - b.offsetTop;\n        });\n        for (var i = 0; i < seccond.length - 1; i++) {\n          for (var j = 0; j < seccond.length - 1 - i; j++) {\n            if (seccond[j].offsetHeight > seccond[j + 1].offsetTop && seccond[j].offsetTop < seccond[j + 1].offsetTop) {\n              var tmp = seccond[j];\n              seccond[j] = seccond[j + 1];\n              seccond[j + 1] = tmp;\n            }\n          }\n        }\n        collection.innerHTML = '';\n        first.forEach(function (item) {\n          collection.appendChild(item);\n        });\n        seccond.forEach(function (data) {\n          collection.appendChild(data.item);\n        });\n        collection.classList.add('__sorted');\n        return true;\n      }\n      return false;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"printDocument\", function () {\n      // const mosaicView = document.querySelector(\n      //   '#mosaic-view .mosaic_view .react-grid-layout',\n      // );\n      // this.sortHtmlCollectionByPosition(mosaicView, [\n      //   { class: 'react-grid-item', requirement: 'has' },\n      // ]);\n      trackEvent({\n        category: 'Print',\n        action: 'Click',\n        name: document.title\n      });\n      document.getElementById('main').classList.add('print');\n      setTimeout(function () {\n        window.print();\n      }, 1000);\n      window.onafterprint = function () {\n        return document.getElementById('main').classList.remove('print');\n      };\n    });\n    return _this;\n  }\n  _createClass(View, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.listActions(getBaseUrl(this.props.pathname));\n      this.props.getContent(getBaseUrl(this.props.pathname), this.props.versionId);\n      this.setState({\n        isClient: true\n      });\n    }\n\n    /**\n     * Component will receive props\n     * @method componentWillReceiveProps\n     * @param {Object} nextProps Next properties\n     * @returns {undefined}\n     */\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      if (nextProps.pathname !== this.props.pathname) {\n        this.props.listActions(getBaseUrl(nextProps.pathname));\n        this.props.getContent(getBaseUrl(nextProps.pathname), this.props.versionId);\n      }\n      if (nextProps.actions.object_buttons) {\n        var objectButtons = nextProps.actions.object_buttons;\n        this.setState({\n          hasObjectButtons: !!objectButtons.length\n        });\n      }\n    }\n\n    /**\n     * Default fallback view\n     * @method getViewDefault\n     * @returns {string} Markup for component.\n     */\n  }, {\n    key: \"render\",\n    value:\n    /**\n     * Render method.\n     * @method render\n     * @returns {string} Markup for the component.\n     */\n    function render() {\n      var views = config.views;\n      if (this.props.error && !this.props.connectionRefused) {\n        var FoundView;\n        if (this.props.error.status === undefined) {\n          // For some reason, while development and if CORS is in place and the\n          // requested resource is 404, it returns undefined as status, then the\n          // next statement will fail\n          FoundView = views.errorViews.corsError;\n        } else {\n          FoundView = views.errorViews[this.props.error.status.toString()];\n        }\n        if (!FoundView) {\n          FoundView = views.errorViews['404']; // default to 404\n        }\n\n        return __jsx(\"div\", {\n          id: \"view\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 9\n          }\n        }, __jsx(FoundView, _extends({}, this.props, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 11\n          }\n        })));\n      }\n      if (!this.props.content) {\n        return __jsx(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 14\n          }\n        });\n      }\n      var RenderedView = this.getViewByType() || this.getViewByLayout() || this.getViewDefault();\n      return __jsx(\"div\", {\n        id: \"view\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 7\n        }\n      }, __jsx(ContentMetadataTags, {\n        content: this.props.content,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 9\n        }\n      }), __jsx(BodyClass, {\n        className: RenderedView.displayName ? \"view-\".concat(this.cleanViewName(RenderedView.displayName)) : null,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 9\n        }\n      }), this.props.loading && __jsx(Dimmer, {\n        active: true,\n        inverted: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 11\n        }\n      }, __jsx(Loader, {\n        size: \"massive\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 13\n        }\n      })), __jsx(RenderedView, {\n        content: this.props.content,\n        location: this.props.location,\n        token: this.props.token,\n        history: this.props.history,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 9\n        }\n      }), __jsx(\"div\", {\n        className: \"print-button\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 9\n        }\n      }, __jsx(Icon, {\n        onClick: this.printDocument,\n        name: printer,\n        size: \"32px\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 11\n        }\n      })), this.props.content.subjects && this.props.content.subjects.length > 0 && __jsx(Tags, {\n        tags: this.props.content.subjects,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 13\n        }\n      }), this.props.content.allow_discussion && __jsx(Comments, {\n        pathname: this.props.pathname,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 11\n        }\n      }), this.state.isClient && __jsx(Portal, {\n        node: document.getElementById('toolbar'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }\n      }, __jsx(Toolbar, {\n        pathname: this.props.pathname,\n        inner: __jsx(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 60\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 13\n        }\n      })), __CLIENT__ && document.querySelector('.header-image-wrapper .header-image-content') && __jsx(Portal, {\n        node: __CLIENT__ && document.querySelector('.header-image-wrapper .header-image-content'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 13\n        }\n      }, __jsx(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 15\n        }\n      }, this.props.content.title), __jsx(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 15\n        }\n      }, this.props.content.description)));\n    }\n  }]);\n  return View;\n}(Component);\n_defineProperty(View, \"propTypes\", {\n  actions: PropTypes.shape({\n    object: PropTypes.arrayOf(PropTypes.object),\n    object_buttons: PropTypes.arrayOf(PropTypes.object),\n    user: PropTypes.arrayOf(PropTypes.object)\n  }),\n  listActions: PropTypes.func.isRequired,\n  /**\n   * Action to get the content\n   */\n  getContent: PropTypes.func.isRequired,\n  /**\n   * Pathname of the object\n   */\n  pathname: PropTypes.string.isRequired,\n  location: PropTypes.shape({\n    search: PropTypes.string,\n    pathname: PropTypes.string\n  }).isRequired,\n  /**\n   * Version id of the object\n   */\n  versionId: PropTypes.string,\n  /**\n   * Content of the object\n   */\n  content: PropTypes.shape({\n    /**\n     * Layout of the object\n     */\n    layout: PropTypes.string,\n    /**\n     * Allow discussion of the object\n     */\n    allow_discussion: PropTypes.bool,\n    /**\n     * Title of the object\n     */\n    title: PropTypes.string,\n    /**\n     * Description of the object\n     */\n    description: PropTypes.string,\n    /**\n     * Type of the object\n     */\n    '@type': PropTypes.string,\n    /**\n     * Subjects of the object\n     */\n    subjects: PropTypes.arrayOf(PropTypes.string),\n    is_folderish: PropTypes.bool\n  }),\n  error: PropTypes.shape({\n    /**\n     * Error type\n     */\n    status: PropTypes.number\n  })\n});\n_defineProperty(View, \"defaultProps\", {\n  actions: null,\n  content: null,\n  versionId: null,\n  error: null\n});\nexport default compose(injectIntl, connect(function (state, props) {\n  var _state$content$get;\n  return {\n    state: state,\n    actions: state.actions.actions,\n    token: state.userSession.token,\n    content: state.content.data,\n    error: state.content.get.error,\n    apiError: state.apierror.error,\n    connectionRefused: state.apierror.connectionRefused,\n    pathname: props.location.pathname,\n    loading: (_state$content$get = state.content.get) === null || _state$content$get === void 0 ? void 0 : _state$content$get.loading,\n    versionId: qs.parse(props.location.search) && qs.parse(props.location.search).version\n  };\n}, {\n  listActions: listActions,\n  getContent: getContent\n}))(View);","map":{"version":3,"names":["React","Component","PropTypes","connect","compose","Portal","injectIntl","qs","Dimmer","Loader","trackEvent","ContentMetadataTags","Comments","Tags","Toolbar","Icon","listActions","getContent","BodyClass","getBaseUrl","getLayoutFieldname","config","printer","View","hasObjectButtons","isClient","views","defaultView","contentTypesViews","props","content","pathname","layoutViews","dirtyDisplayName","replace","toLowerCase","collection","patterns","first","seccond","classList","contains","Array","prototype","forEach","call","children","child","pattern","requirement","push","item","offsetTop","offsetHeight","sort","a","b","i","length","j","tmp","innerHTML","appendChild","data","add","category","action","name","document","title","getElementById","setTimeout","window","print","onafterprint","remove","versionId","setState","nextProps","actions","object_buttons","objectButtons","error","connectionRefused","FoundView","status","undefined","errorViews","corsError","toString","RenderedView","getViewByType","getViewByLayout","getViewDefault","displayName","cleanViewName","loading","location","token","history","printDocument","subjects","allow_discussion","state","__CLIENT__","querySelector","description","shape","object","arrayOf","user","func","isRequired","string","search","layout","bool","is_folderish","number","userSession","get","apiError","apierror","parse","version"],"sources":["/home/tooler/code/work/forests-frontend/src/develop/volto-forests-theme/src/customizations/volto/components/theme/View/View.jsx"],"sourcesContent":["/**\n * Customized View to include Header image and Portlets\n *\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { Portal } from 'react-portal';\nimport { injectIntl } from 'react-intl';\nimport qs from 'query-string';\nimport { Dimmer, Loader } from 'semantic-ui-react';\nimport { trackEvent } from '@eeacms/volto-matomo/utils';\n\nimport {\n  ContentMetadataTags,\n  Comments,\n  Tags,\n  Toolbar,\n  Icon,\n} from '@plone/volto/components';\nimport { listActions, getContent } from '@plone/volto/actions';\nimport {\n  BodyClass,\n  getBaseUrl,\n  getLayoutFieldname,\n} from '@plone/volto/helpers';\n\nimport config from '@plone/volto/registry';\n\nimport printer from '@plone/volto/icons/printer.svg';\n\n/**\n * View container class.\n * @class View\n * @extends Component\n */\nclass View extends Component {\n  /**\n   * Property types.\n   * @property {Object} propTypes Property types.\n   * @static\n   */\n  static propTypes = {\n    actions: PropTypes.shape({\n      object: PropTypes.arrayOf(PropTypes.object),\n      object_buttons: PropTypes.arrayOf(PropTypes.object),\n      user: PropTypes.arrayOf(PropTypes.object),\n    }),\n    listActions: PropTypes.func.isRequired,\n    /**\n     * Action to get the content\n     */\n    getContent: PropTypes.func.isRequired,\n    /**\n     * Pathname of the object\n     */\n    pathname: PropTypes.string.isRequired,\n    location: PropTypes.shape({\n      search: PropTypes.string,\n      pathname: PropTypes.string,\n    }).isRequired,\n    /**\n     * Version id of the object\n     */\n    versionId: PropTypes.string,\n    /**\n     * Content of the object\n     */\n    content: PropTypes.shape({\n      /**\n       * Layout of the object\n       */\n      layout: PropTypes.string,\n      /**\n       * Allow discussion of the object\n       */\n      allow_discussion: PropTypes.bool,\n      /**\n       * Title of the object\n       */\n      title: PropTypes.string,\n      /**\n       * Description of the object\n       */\n      description: PropTypes.string,\n      /**\n       * Type of the object\n       */\n      '@type': PropTypes.string,\n      /**\n       * Subjects of the object\n       */\n      subjects: PropTypes.arrayOf(PropTypes.string),\n      is_folderish: PropTypes.bool,\n    }),\n    error: PropTypes.shape({\n      /**\n       * Error type\n       */\n      status: PropTypes.number,\n    }),\n  };\n\n  /**\n   * Default properties.\n   * @property {Object} defaultProps Default properties.\n   * @static\n   */\n  static defaultProps = {\n    actions: null,\n    content: null,\n    versionId: null,\n    error: null,\n  };\n\n  state = {\n    hasObjectButtons: null,\n    isClient: false,\n  };\n\n  componentDidMount() {\n    this.props.listActions(getBaseUrl(this.props.pathname));\n    this.props.getContent(\n      getBaseUrl(this.props.pathname),\n      this.props.versionId,\n    );\n    this.setState({ isClient: true });\n  }\n\n  /**\n   * Component will receive props\n   * @method componentWillReceiveProps\n   * @param {Object} nextProps Next properties\n   * @returns {undefined}\n   */\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.pathname !== this.props.pathname) {\n      this.props.listActions(getBaseUrl(nextProps.pathname));\n      this.props.getContent(\n        getBaseUrl(nextProps.pathname),\n        this.props.versionId,\n      );\n    }\n\n    if (nextProps.actions.object_buttons) {\n      const objectButtons = nextProps.actions.object_buttons;\n      this.setState({\n        hasObjectButtons: !!objectButtons.length,\n      });\n    }\n  }\n\n  /**\n   * Default fallback view\n   * @method getViewDefault\n   * @returns {string} Markup for component.\n   */\n  getViewDefault = () => config.views.defaultView;\n\n  /**\n   * Get view by content type\n   * @method getViewByType\n   * @returns {string} Markup for component.\n   */\n  getViewByType = () =>\n    config.views.contentTypesViews[this.props.content['@type']] || null;\n\n  /**\n   * Get view by content layout property\n   * @method getViewByLayout\n   * @returns {string} Markup for component.\n   */\n  getViewByLayout = () => {\n    if (this.props.pathname === '/') {\n      return config.views.layoutViews['document_view_wide'];\n    }\n\n    return (\n      config.views.layoutViews[\n        this.props.content[getLayoutFieldname(this.props.content)]\n      ] || null\n    );\n  };\n\n  /**\n   * Cleans the component displayName (specially for connected components)\n   * which have the Connect(componentDisplayName)\n   * @method cleanViewName\n   * @param  {string} dirtyDisplayName The displayName\n   * @returns {string} Clean displayName (no Connect(...)).\n   */\n  cleanViewName = (dirtyDisplayName) =>\n    dirtyDisplayName\n      .replace('Connect(', '')\n      .replace('injectIntl(', '')\n      .replace(')', '')\n      .replace('connect(', '')\n      .toLowerCase();\n\n  sortHtmlCollectionByPosition = (collection, patterns) => {\n    const first = []; //  ~follow the pattern\n    const seccond = []; //   follow the pattern\n    if (collection && !collection.classList.contains('__sorted')) {\n      Array.prototype.forEach.call(collection.children, (child) => {\n        patterns.forEach((pattern) => {\n          if (\n            pattern.requirement === 'has' &&\n            child.classList.contains(pattern.class)\n          ) {\n            seccond.push({\n              item: child,\n              offsetTop: child.offsetTop,\n              offsetHeight: child.offsetHeight,\n            });\n          } else first.push(child);\n        });\n      });\n      seccond.sort((a, b) => a.offsetTop - b.offsetTop);\n      for (let i = 0; i < seccond.length - 1; i++) {\n        for (let j = 0; j < seccond.length - 1 - i; j++) {\n          if (\n            seccond[j].offsetHeight > seccond[j + 1].offsetTop &&\n            seccond[j].offsetTop < seccond[j + 1].offsetTop\n          ) {\n            let tmp = seccond[j];\n            seccond[j] = seccond[j + 1];\n            seccond[j + 1] = tmp;\n          }\n        }\n      }\n      collection.innerHTML = '';\n      first.forEach((item) => {\n        collection.appendChild(item);\n      });\n      seccond.forEach((data) => {\n        collection.appendChild(data.item);\n      });\n      collection.classList.add('__sorted');\n      return true;\n    }\n    return false;\n  };\n\n  printDocument = () => {\n    // const mosaicView = document.querySelector(\n    //   '#mosaic-view .mosaic_view .react-grid-layout',\n    // );\n    // this.sortHtmlCollectionByPosition(mosaicView, [\n    //   { class: 'react-grid-item', requirement: 'has' },\n    // ]);\n    trackEvent({\n      category: 'Print',\n      action: 'Click',\n      name: document.title,\n    });\n    document.getElementById('main').classList.add('print');\n    setTimeout(() => {\n      window.print();\n    }, 1000);\n    window.onafterprint = () =>\n      document.getElementById('main').classList.remove('print');\n  };\n  /**\n   * Render method.\n   * @method render\n   * @returns {string} Markup for the component.\n   */\n  render() {\n    const { views } = config;\n    if (this.props.error && !this.props.connectionRefused) {\n      let FoundView;\n      if (this.props.error.status === undefined) {\n        // For some reason, while development and if CORS is in place and the\n        // requested resource is 404, it returns undefined as status, then the\n        // next statement will fail\n        FoundView = views.errorViews.corsError;\n      } else {\n        FoundView = views.errorViews[this.props.error.status.toString()];\n      }\n      if (!FoundView) {\n        FoundView = views.errorViews['404']; // default to 404\n      }\n      return (\n        <div id=\"view\">\n          <FoundView {...this.props} />\n        </div>\n      );\n    }\n    if (!this.props.content) {\n      return <span />;\n    }\n    const RenderedView =\n      this.getViewByType() || this.getViewByLayout() || this.getViewDefault();\n\n    return (\n      <div id=\"view\">\n        <ContentMetadataTags content={this.props.content} />\n        {/* Body class if displayName in component is set */}\n        <BodyClass\n          className={\n            RenderedView.displayName\n              ? `view-${this.cleanViewName(RenderedView.displayName)}`\n              : null\n          }\n        />\n        {this.props.loading && (\n          <Dimmer active inverted>\n            <Loader size=\"massive\" />\n          </Dimmer>\n        )}\n\n        <RenderedView\n          content={this.props.content}\n          location={this.props.location}\n          token={this.props.token}\n          history={this.props.history}\n        />\n        <div className=\"print-button\">\n          <Icon onClick={this.printDocument} name={printer} size=\"32px\" />\n        </div>\n\n        {this.props.content.subjects &&\n          this.props.content.subjects.length > 0 && (\n            <Tags tags={this.props.content.subjects} />\n          )}\n        {/* Add opt-in social sharing if required, disabled by default */}\n        {/* In the future this might be parameterized from the app config */}\n        {/* <SocialSharing\n          url={typeof window === 'undefined' ? '' : window.location.href}\n          title={this.props.content.title}\n          description={this.props.content.description || ''}\n        /> */}\n        {this.props.content.allow_discussion && (\n          <Comments pathname={this.props.pathname} />\n        )}\n        {this.state.isClient && (\n          <Portal node={document.getElementById('toolbar')}>\n            <Toolbar pathname={this.props.pathname} inner={<span />} />\n          </Portal>\n        )}\n\n        {__CLIENT__ &&\n          document.querySelector(\n            '.header-image-wrapper .header-image-content',\n          ) && (\n            <Portal\n              node={\n                __CLIENT__ &&\n                document.querySelector(\n                  '.header-image-wrapper .header-image-content',\n                )\n              }\n            >\n              <h1>{this.props.content.title}</h1>\n              <p>{this.props.content.description}</p>\n            </Portal>\n          )}\n      </div>\n    );\n  }\n}\n\nexport default compose(\n  injectIntl,\n  connect(\n    (state, props) => ({\n      state,\n      actions: state.actions.actions,\n      token: state.userSession.token,\n      content: state.content.data,\n      error: state.content.get.error,\n      apiError: state.apierror.error,\n      connectionRefused: state.apierror.connectionRefused,\n      pathname: props.location.pathname,\n      loading: state.content.get?.loading,\n      versionId:\n        qs.parse(props.location.search) &&\n        qs.parse(props.location.search).version,\n    }),\n    {\n      listActions,\n      getContent,\n    },\n  ),\n)(View);\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}