{"ast":null,"code":"var _jsxFileName = \"/home/tooler/code/work/forests-frontend/src/develop/volto-tabs-block/src/components/templates/accordion/View.jsx\";\nvar __jsx = React.createElement;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport React from 'react';\nimport cx from 'classnames';\nimport { compose } from 'redux';\nimport { withRouter } from 'react-router';\nimport Tabs from 'react-responsive-tabs';\nimport AnimateHeight from 'react-animate-height';\nimport { Icon } from 'semantic-ui-react';\nimport config from '@plone/volto/registry';\nimport { Icon as VoltoIcon, RenderBlocks } from '@plone/volto/components';\nimport { TABS_BLOCK } from '@eeacms/volto-tabs-block/constants';\nimport { withScrollToTarget } from '@eeacms/volto-tabs-block/hocs';\nimport 'react-responsive-tabs/styles.css';\nimport '@eeacms/volto-tabs-block/less/menu.less';\nclass Tab extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      height: 0\n    };\n  }\n  componentDidMount() {\n    if (this.state.height === 0) {\n      requestAnimationFrame(() => {\n        this.setState({\n          height: 'auto'\n        });\n      });\n    }\n  }\n  render() {\n    return __jsx(AnimateHeight, {\n      animateOpacity: true,\n      duration: 500,\n      height: this.state.height,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 7\n      }\n    }, __jsx(RenderBlocks, _extends({}, this.props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }\n    })));\n  }\n}\nconst View = props => {\n  var _config$blocks$blocks;\n  const {\n    data = {},\n    tabsList = [],\n    tabs = {},\n    activeTabIndex = 0,\n    setActiveTab = () => {}\n  } = props;\n  const accordionConfig = ((_config$blocks$blocks = config.blocks.blocksConfig[TABS_BLOCK].templates) === null || _config$blocks$blocks === void 0 ? void 0 : _config$blocks$blocks['accordion']) || {};\n  const {\n    icons,\n    semanticIcon,\n    transformWidth = 800\n  } = accordionConfig;\n  const tabsContainer = React.useRef();\n  const [mounted, setMounted] = React.useState(false);\n  const [initialWidth, setInitialWidth] = React.useState(transformWidth);\n  const schema = React.useMemo(() => {\n    var _config$blocks$blocks2, _config$blocks$blocks3;\n    return ((_config$blocks$blocks2 = config.blocks.blocksConfig[TABS_BLOCK].templates) === null || _config$blocks$blocks2 === void 0 ? void 0 : (_config$blocks$blocks3 = _config$blocks$blocks2['default']) === null || _config$blocks$blocks3 === void 0 ? void 0 : _config$blocks$blocks3.schema(config, props)) || {};\n  }, [props]);\n  const getDataValue = React.useCallback(key => {\n    var _ref, _schema$properties$ke, _schema$properties$ke2;\n    return (_ref = ((_schema$properties$ke = schema.properties[key]) === null || _schema$properties$ke === void 0 ? void 0 : _schema$properties$ke.value) || data[key]) !== null && _ref !== void 0 ? _ref : (_schema$properties$ke2 = schema.properties[key]) === null || _schema$properties$ke2 === void 0 ? void 0 : _schema$properties$ke2.defaultValue;\n  }, [schema, data]);\n  const items = tabsList.map((tab, index) => {\n    const title = tabs[tab].title;\n    const defaultTitle = `Tab ${index + 1}`;\n    const active = activeTabIndex === index;\n    return {\n      title: __jsx(React.Fragment, null, semanticIcon ? __jsx(Icon, {\n        className: active ? semanticIcon.opened : semanticIcon.closed,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }\n      }) : __jsx(VoltoIcon, {\n        name: active ? icons.opened : icons.closed,\n        size: icons.size,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }\n      }), title || defaultTitle, ' '),\n      getContent: () => __jsx(Tab, _extends({}, props, {\n        tab: tab,\n        content: tabs[tab],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 25\n        }\n      })),\n      key: tab,\n      tabClassName: cx('ui button item title', {\n        active\n      }),\n      panelClassName: cx('ui bottom attached segment tab', {\n        active\n      })\n    };\n  });\n  React.useEffect(() => {\n    setMounted(true);\n  }, []);\n  React.useEffect(() => {\n    var _tabsContainer$curren;\n    if (!mounted) return;\n    const {\n      blockWidth,\n      tabsTotalWidth\n    } = ((_tabsContainer$curren = tabsContainer.current) === null || _tabsContainer$curren === void 0 ? void 0 : _tabsContainer$curren.state) || {};\n    setInitialWidth(tabsTotalWidth < blockWidth ? tabsTotalWidth + 1 : blockWidth + 1);\n  }, [mounted]);\n  return __jsx(React.Fragment, null, __jsx(Tabs, {\n    ref: tabsContainer,\n    transformWidth: initialWidth,\n    className: \"tabs aa\",\n    selectedTabKey: tabsList[activeTabIndex],\n    items: items,\n    onChange: tab => {\n      if (tab !== tabsList[activeTabIndex]) {\n        setActiveTab(tab);\n      } else {\n        setActiveTab(null);\n      }\n    },\n    tabsWrapperClass: cx('ui pointing secondary menu', getDataValue('menuColor'), {\n      inverted: getDataValue('menuInverted')\n    }),\n    showMore: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }\n  }));\n};\nexport default compose(withScrollToTarget, withRouter)(View);","map":{"version":3,"names":["React","cx","compose","withRouter","Tabs","AnimateHeight","Icon","config","VoltoIcon","RenderBlocks","TABS_BLOCK","withScrollToTarget","Tab","Component","constructor","state","height","componentDidMount","requestAnimationFrame","setState","render","props","View","data","tabsList","tabs","activeTabIndex","setActiveTab","accordionConfig","blocks","blocksConfig","templates","icons","semanticIcon","transformWidth","tabsContainer","useRef","mounted","setMounted","useState","initialWidth","setInitialWidth","schema","useMemo","getDataValue","useCallback","key","properties","value","defaultValue","items","map","tab","index","title","defaultTitle","active","opened","closed","size","getContent","tabClassName","panelClassName","useEffect","blockWidth","tabsTotalWidth","current","inverted"],"sources":["/home/tooler/code/work/forests-frontend/src/develop/volto-tabs-block/src/components/templates/accordion/View.jsx"],"sourcesContent":["import React from 'react';\nimport cx from 'classnames';\nimport { compose } from 'redux';\nimport { withRouter } from 'react-router';\nimport Tabs from 'react-responsive-tabs';\nimport AnimateHeight from 'react-animate-height';\nimport { Icon } from 'semantic-ui-react';\nimport config from '@plone/volto/registry';\nimport { Icon as VoltoIcon, RenderBlocks } from '@plone/volto/components';\nimport { TABS_BLOCK } from '@eeacms/volto-tabs-block/constants';\nimport { withScrollToTarget } from '@eeacms/volto-tabs-block/hocs';\n\nimport 'react-responsive-tabs/styles.css';\nimport '@eeacms/volto-tabs-block/less/menu.less';\n\nclass Tab extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      height: 0,\n    };\n  }\n\n  componentDidMount() {\n    if (this.state.height === 0) {\n      requestAnimationFrame(() => {\n        this.setState({ height: 'auto' });\n      });\n    }\n  }\n\n  render() {\n    return (\n      <AnimateHeight animateOpacity duration={500} height={this.state.height}>\n        <RenderBlocks {...this.props} />\n      </AnimateHeight>\n    );\n  }\n}\n\nconst View = (props) => {\n  const {\n    data = {},\n    tabsList = [],\n    tabs = {},\n    activeTabIndex = 0,\n    setActiveTab = () => {},\n  } = props;\n  const accordionConfig =\n    config.blocks.blocksConfig[TABS_BLOCK].templates?.['accordion'] || {};\n  const { icons, semanticIcon, transformWidth = 800 } = accordionConfig;\n\n  const tabsContainer = React.useRef();\n  const [mounted, setMounted] = React.useState(false);\n  const [initialWidth, setInitialWidth] = React.useState(transformWidth);\n\n  const schema = React.useMemo(\n    () =>\n      config.blocks.blocksConfig[TABS_BLOCK].templates?.['default']?.schema(\n        config,\n        props,\n      ) || {},\n    [props],\n  );\n\n  const getDataValue = React.useCallback(\n    (key) => {\n      return (\n        (schema.properties[key]?.value || data[key]) ??\n        schema.properties[key]?.defaultValue\n      );\n    },\n    [schema, data],\n  );\n\n  const items = tabsList.map((tab, index) => {\n    const title = tabs[tab].title;\n    const defaultTitle = `Tab ${index + 1}`;\n    const active = activeTabIndex === index;\n\n    return {\n      title: (\n        <>\n          {semanticIcon ? (\n            <Icon\n              className={active ? semanticIcon.opened : semanticIcon.closed}\n            />\n          ) : (\n            <VoltoIcon\n              name={active ? icons.opened : icons.closed}\n              size={icons.size}\n            />\n          )}\n          {title || defaultTitle}{' '}\n        </>\n      ),\n      getContent: () => <Tab {...props} tab={tab} content={tabs[tab]} />,\n      key: tab,\n      tabClassName: cx('ui button item title', { active }),\n      panelClassName: cx('ui bottom attached segment tab', {\n        active,\n      }),\n    };\n  });\n\n  React.useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  React.useEffect(() => {\n    if (!mounted) return;\n    const { blockWidth, tabsTotalWidth } = tabsContainer.current?.state || {};\n    setInitialWidth(\n      tabsTotalWidth < blockWidth ? tabsTotalWidth + 1 : blockWidth + 1,\n    );\n  }, [mounted]);\n\n  return (\n    <>\n      <Tabs\n        ref={tabsContainer}\n        transformWidth={initialWidth}\n        className=\"tabs aa\"\n        selectedTabKey={tabsList[activeTabIndex]}\n        items={items}\n        onChange={(tab) => {\n          if (tab !== tabsList[activeTabIndex]) {\n            setActiveTab(tab);\n          } else {\n            setActiveTab(null);\n          }\n        }}\n        tabsWrapperClass={cx(\n          'ui pointing secondary menu',\n          getDataValue('menuColor'),\n          {\n            inverted: getDataValue('menuInverted'),\n          },\n        )}\n        showMore={false}\n      />\n    </>\n  );\n};\n\nexport default compose(withScrollToTarget, withRouter)(View);\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}