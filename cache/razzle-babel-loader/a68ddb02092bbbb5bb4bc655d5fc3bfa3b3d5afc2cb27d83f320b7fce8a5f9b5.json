{"ast":null,"code":"import _toConsumableArray from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport { GET_DATA_FROM_PROVIDER } from '../constants';\nexport var dataProvider = function dataProvider(middlewares) {\n  return [function (store) {\n    return function (next) {\n      return function (action) {\n        var state = store.getState();\n        if (action.type === GET_DATA_FROM_PROVIDER) {\n          var _action$path;\n          var path = \"\".concat((_action$path = action.path) === null || _action$path === void 0 ? void 0 : _action$path.replace('/@connector-data', '')).concat(action.hashValue ? \"#\".concat(action.hashValue) : '');\n          var isPending = state.data_providers.pendingConnectors[path];\n          if (isPending) {\n            return;\n          }\n          store.dispatch({\n            type: \"\".concat(GET_DATA_FROM_PROVIDER, \"_PENDING\"),\n            path: action.path,\n            hashValue: action.hashValue\n          });\n        }\n        return next(action);\n      };\n    };\n  }].concat(_toConsumableArray(middlewares));\n};","map":{"version":3,"names":["GET_DATA_FROM_PROVIDER","dataProvider","middlewares","store","next","action","state","getState","type","path","replace","hashValue","isPending","data_providers","pendingConnectors","dispatch"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-datablocks/src/middlewares/dataProvider.js"],"sourcesContent":["import { GET_DATA_FROM_PROVIDER } from '../constants';\n\nexport const dataProvider = (middlewares) => [\n  (store) => (next) => (action) => {\n    const state = store.getState();\n    if (action.type === GET_DATA_FROM_PROVIDER) {\n      const path = `${action.path?.replace('/@connector-data', '')}${\n        action.hashValue ? `#${action.hashValue}` : ''\n      }`;\n      const isPending = state.data_providers.pendingConnectors[path];\n\n      if (isPending) {\n        return;\n      }\n      store.dispatch({\n        type: `${GET_DATA_FROM_PROVIDER}_PENDING`,\n        path: action.path,\n        hashValue: action.hashValue,\n      });\n    }\n    return next(action);\n  },\n  ...middlewares,\n];\n"],"mappings":";AAAA,SAASA,sBAAsB,QAAQ,cAAc;AAErD,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAY,CAAIC,WAAW;EAAA,QACtC,UAACC,KAAK;IAAA,OAAK,UAACC,IAAI;MAAA,OAAK,UAACC,MAAM,EAAK;QAC/B,IAAMC,KAAK,GAAGH,KAAK,CAACI,QAAQ,EAAE;QAC9B,IAAIF,MAAM,CAACG,IAAI,KAAKR,sBAAsB,EAAE;UAAA;UAC1C,IAAMS,IAAI,6BAAMJ,MAAM,CAACI,IAAI,iDAAX,aAAaC,OAAO,CAAC,kBAAkB,EAAE,EAAE,CAAC,SAC1DL,MAAM,CAACM,SAAS,cAAON,MAAM,CAACM,SAAS,IAAK,EAAE,CAC9C;UACF,IAAMC,SAAS,GAAGN,KAAK,CAACO,cAAc,CAACC,iBAAiB,CAACL,IAAI,CAAC;UAE9D,IAAIG,SAAS,EAAE;YACb;UACF;UACAT,KAAK,CAACY,QAAQ,CAAC;YACbP,IAAI,YAAKR,sBAAsB,aAAU;YACzCS,IAAI,EAAEJ,MAAM,CAACI,IAAI;YACjBE,SAAS,EAAEN,MAAM,CAACM;UACpB,CAAC,CAAC;QACJ;QACA,OAAOP,IAAI,CAACC,MAAM,CAAC;MACrB,CAAC;IAAA;EAAA,6BACEH,WAAW;AAAA,CACf"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}