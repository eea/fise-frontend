{"ast":null,"code":"import decorateComponentWithProps from 'decorate-component-with-props';\nimport DefaultLink from './components/Link';\nimport LinkButton from './components/LinkButton';\nimport linkStrategy, { matchesEntityType } from './linkStrategy';\nfunction unboundRemoveEntity(editorState) {\n  var contentState = editorState.getCurrentContent();\n  var selectionState = editorState.getSelection();\n  var startKey = selectionState.getStartKey();\n  var contentBlock = contentState.getBlockForKey(startKey);\n  var startOffset = selectionState.getStartOffset();\n  var entity = contentBlock.getEntityAt(startOffset);\n  if (!entity) {\n    return editorState;\n  }\n  var entitySelection = null;\n  contentBlock.findEntityRanges(function (character) {\n    return character.getEntity() === entity;\n  }, function (start, end) {\n    entitySelection = selectionState.merge({\n      anchorOffset: start,\n      focusOffset: end,\n      isBackward: false\n    });\n  });\n  var newContentState = this.Modifier.applyEntity(contentState, entitySelection, null);\n  var newEditorState = this.EditorState.push(editorState, newContentState, 'apply-entity');\n  return newEditorState;\n}\nexport default (function () {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  // ToDo: Get rif of the remainings of having the original CSS modules\n  var defaultTheme = {};\n  var _config$theme = config.theme,\n    theme = _config$theme === void 0 ? defaultTheme : _config$theme,\n    placeholder = config.placeholder,\n    Link = config.Link,\n    linkTarget = config.linkTarget,\n    libraries = config.libraries;\n  var removeEntity = unboundRemoveEntity.bind(libraries);\n  return {\n    decorators: [{\n      strategy: linkStrategy,\n      matchesEntityType: matchesEntityType,\n      component: Link || decorateComponentWithProps(DefaultLink, {\n        className: 'link-anchorlink-theme',\n        target: linkTarget\n      })\n    }],\n    LinkButton: decorateComponentWithProps(LinkButton, {\n      ownTheme: theme,\n      placeholder: placeholder,\n      onRemoveLinkAtSelection: function onRemoveLinkAtSelection(setEditorState, getEditorState) {\n        return setEditorState(removeEntity(getEditorState()));\n      }\n    })\n  };\n});","map":{"version":3,"names":["decorateComponentWithProps","DefaultLink","LinkButton","linkStrategy","matchesEntityType","unboundRemoveEntity","editorState","contentState","getCurrentContent","selectionState","getSelection","startKey","getStartKey","contentBlock","getBlockForKey","startOffset","getStartOffset","entity","getEntityAt","entitySelection","findEntityRanges","character","getEntity","start","end","merge","anchorOffset","focusOffset","isBackward","newContentState","Modifier","applyEntity","newEditorState","EditorState","push","config","defaultTheme","theme","placeholder","Link","linkTarget","libraries","removeEntity","bind","decorators","strategy","component","className","target","ownTheme","onRemoveLinkAtSelection","setEditorState","getEditorState"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@plone/volto/src/components/manage/AnchorPlugin/index.jsx"],"sourcesContent":["import decorateComponentWithProps from 'decorate-component-with-props';\n\nimport DefaultLink from './components/Link';\nimport LinkButton from './components/LinkButton';\nimport linkStrategy, { matchesEntityType } from './linkStrategy';\n\nfunction unboundRemoveEntity(editorState) {\n  const contentState = editorState.getCurrentContent();\n  const selectionState = editorState.getSelection();\n  const startKey = selectionState.getStartKey();\n  const contentBlock = contentState.getBlockForKey(startKey);\n  const startOffset = selectionState.getStartOffset();\n  const entity = contentBlock.getEntityAt(startOffset);\n\n  if (!entity) {\n    return editorState;\n  }\n\n  let entitySelection = null;\n\n  contentBlock.findEntityRanges(\n    (character) => character.getEntity() === entity,\n    (start, end) => {\n      entitySelection = selectionState.merge({\n        anchorOffset: start,\n        focusOffset: end,\n        isBackward: false,\n      });\n    },\n  );\n\n  const newContentState = this.Modifier.applyEntity(\n    contentState,\n    entitySelection,\n    null,\n  );\n\n  const newEditorState = this.EditorState.push(\n    editorState,\n    newContentState,\n    'apply-entity',\n  );\n\n  return newEditorState;\n}\n\nexport default (config = {}) => {\n  // ToDo: Get rif of the remainings of having the original CSS modules\n  const defaultTheme = {};\n\n  const {\n    theme = defaultTheme,\n    placeholder,\n    Link,\n    linkTarget,\n    libraries,\n  } = config;\n\n  const removeEntity = unboundRemoveEntity.bind(libraries);\n\n  return {\n    decorators: [\n      {\n        strategy: linkStrategy,\n        matchesEntityType,\n        component:\n          Link ||\n          decorateComponentWithProps(DefaultLink, {\n            className: 'link-anchorlink-theme',\n            target: linkTarget,\n          }),\n      },\n    ],\n\n    LinkButton: decorateComponentWithProps(LinkButton, {\n      ownTheme: theme,\n      placeholder,\n      onRemoveLinkAtSelection: (setEditorState, getEditorState) =>\n        setEditorState(removeEntity(getEditorState())),\n    }),\n  };\n};\n"],"mappings":"AAAA,OAAOA,0BAA0B,MAAM,+BAA+B;AAEtE,OAAOC,WAAW,MAAM,mBAAmB;AAC3C,OAAOC,UAAU,MAAM,yBAAyB;AAChD,OAAOC,YAAY,IAAIC,iBAAiB,QAAQ,gBAAgB;AAEhE,SAASC,mBAAmB,CAACC,WAAW,EAAE;EACxC,IAAMC,YAAY,GAAGD,WAAW,CAACE,iBAAiB,EAAE;EACpD,IAAMC,cAAc,GAAGH,WAAW,CAACI,YAAY,EAAE;EACjD,IAAMC,QAAQ,GAAGF,cAAc,CAACG,WAAW,EAAE;EAC7C,IAAMC,YAAY,GAAGN,YAAY,CAACO,cAAc,CAACH,QAAQ,CAAC;EAC1D,IAAMI,WAAW,GAAGN,cAAc,CAACO,cAAc,EAAE;EACnD,IAAMC,MAAM,GAAGJ,YAAY,CAACK,WAAW,CAACH,WAAW,CAAC;EAEpD,IAAI,CAACE,MAAM,EAAE;IACX,OAAOX,WAAW;EACpB;EAEA,IAAIa,eAAe,GAAG,IAAI;EAE1BN,YAAY,CAACO,gBAAgB,CAC3B,UAACC,SAAS;IAAA,OAAKA,SAAS,CAACC,SAAS,EAAE,KAAKL,MAAM;EAAA,GAC/C,UAACM,KAAK,EAAEC,GAAG,EAAK;IACdL,eAAe,GAAGV,cAAc,CAACgB,KAAK,CAAC;MACrCC,YAAY,EAAEH,KAAK;MACnBI,WAAW,EAAEH,GAAG;MAChBI,UAAU,EAAE;IACd,CAAC,CAAC;EACJ,CAAC,CACF;EAED,IAAMC,eAAe,GAAG,IAAI,CAACC,QAAQ,CAACC,WAAW,CAC/CxB,YAAY,EACZY,eAAe,EACf,IAAI,CACL;EAED,IAAMa,cAAc,GAAG,IAAI,CAACC,WAAW,CAACC,IAAI,CAC1C5B,WAAW,EACXuB,eAAe,EACf,cAAc,CACf;EAED,OAAOG,cAAc;AACvB;AAEA,gBAAe,YAAiB;EAAA,IAAhBG,MAAM,uEAAG,CAAC,CAAC;EACzB;EACA,IAAMC,YAAY,GAAG,CAAC,CAAC;EAEvB,oBAMID,MAAM,CALRE,KAAK;IAALA,KAAK,8BAAGD,YAAY;IACpBE,WAAW,GAITH,MAAM,CAJRG,WAAW;IACXC,IAAI,GAGFJ,MAAM,CAHRI,IAAI;IACJC,UAAU,GAERL,MAAM,CAFRK,UAAU;IACVC,SAAS,GACPN,MAAM,CADRM,SAAS;EAGX,IAAMC,YAAY,GAAGrC,mBAAmB,CAACsC,IAAI,CAACF,SAAS,CAAC;EAExD,OAAO;IACLG,UAAU,EAAE,CACV;MACEC,QAAQ,EAAE1C,YAAY;MACtBC,iBAAiB,EAAjBA,iBAAiB;MACjB0C,SAAS,EACPP,IAAI,IACJvC,0BAA0B,CAACC,WAAW,EAAE;QACtC8C,SAAS,EAAE,uBAAuB;QAClCC,MAAM,EAAER;MACV,CAAC;IACL,CAAC,CACF;IAEDtC,UAAU,EAAEF,0BAA0B,CAACE,UAAU,EAAE;MACjD+C,QAAQ,EAAEZ,KAAK;MACfC,WAAW,EAAXA,WAAW;MACXY,uBAAuB,EAAE,iCAACC,cAAc,EAAEC,cAAc;QAAA,OACtDD,cAAc,CAACT,YAAY,CAACU,cAAc,EAAE,CAAC,CAAC;MAAA;IAClD,CAAC;EACH,CAAC;AACH,CAAC"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}