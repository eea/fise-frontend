{"ast":null,"code":"var _jsxFileName = \"/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-plotlycharts/src/Blocks/EmbedEEAVisualization/Edit.jsx\";\nvar __jsx = React.createElement;\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nimport React from 'react';\nimport { SidebarPortal } from '@plone/volto/components';\nimport BlockDataForm from '@plone/volto/components/manage/Form/BlockDataForm';\nimport ConnectedChart2 from '@eeacms/volto-plotlycharts/ConnectedChart2';\nimport '@eeacms/volto-plotlycharts/less/visualization.less';\nimport Schema from './schema';\nconst Edit = props => {\n  const {\n    data,\n    block,\n    onChangeBlock\n  } = props;\n  const schema = React.useMemo(() => Schema(props), [props]);\n  React.useEffect(() => {\n    if (!Object.hasOwn(data, 'download_button')) {\n      onChangeBlock(block, _objectSpread(_objectSpread({}, data), {}, {\n        download_button: true\n      }));\n    }\n    if (!Object.hasOwn(data, 'show_sources')) {\n      onChangeBlock(block, _objectSpread(_objectSpread({}, data), {}, {\n        show_sources: true\n      }));\n    }\n  }, [block, data, onChangeBlock]);\n  return __jsx(React.Fragment, null, __jsx(ConnectedChart2, {\n    id: props.id,\n    data: {\n      chartSources: data.chartSources,\n      data_query: data.data_query,\n      download_button: data.download_button,\n      has_data_query_by_context: data.has_data_query_by_context,\n      has_data_query_by_provider: data.has_data_query_by_provider,\n      use_live_data: true,\n      vis_url: data.vis_url,\n      with_sources: data.show_sources,\n      include_core_metadata_download: data.include_core_metadata_download\n    },\n    hoverFormatXY: data.hover_format_xy,\n    withSources: data.show_sources,\n    width: data.width,\n    height: data.height,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }\n  }), __jsx(SidebarPortal, {\n    selected: props.selected,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, __jsx(BlockDataForm, {\n    block: block,\n    title: schema.title,\n    schema: schema,\n    onChangeField: (id, value) => {\n      props.onChangeBlock(block, _objectSpread(_objectSpread({}, data), {}, {\n        [id]: value\n      }));\n    },\n    formData: data,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  })));\n};\nexport default Edit;","map":{"version":3,"names":["React","SidebarPortal","BlockDataForm","ConnectedChart2","Schema","Edit","props","data","block","onChangeBlock","schema","useMemo","useEffect","Object","hasOwn","download_button","show_sources","id","chartSources","data_query","has_data_query_by_context","has_data_query_by_provider","use_live_data","vis_url","with_sources","include_core_metadata_download","hover_format_xy","width","height","selected","title","value"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-plotlycharts/src/Blocks/EmbedEEAVisualization/Edit.jsx"],"sourcesContent":["import React from 'react';\nimport { SidebarPortal } from '@plone/volto/components';\nimport BlockDataForm from '@plone/volto/components/manage/Form/BlockDataForm';\nimport ConnectedChart2 from '@eeacms/volto-plotlycharts/ConnectedChart2';\n\nimport '@eeacms/volto-plotlycharts/less/visualization.less';\nimport Schema from './schema';\n\nconst Edit = (props) => {\n  const { data, block, onChangeBlock } = props;\n  const schema = React.useMemo(() => Schema(props), [props]);\n\n  React.useEffect(() => {\n    if (!Object.hasOwn(data, 'download_button')) {\n      onChangeBlock(block, {\n        ...data,\n        download_button: true,\n      });\n    }\n    if (!Object.hasOwn(data, 'show_sources')) {\n      onChangeBlock(block, {\n        ...data,\n        show_sources: true,\n      });\n    }\n  }, [block, data, onChangeBlock]);\n\n  return (\n    <>\n      <ConnectedChart2\n        id={props.id}\n        data={{\n          chartSources: data.chartSources,\n          data_query: data.data_query,\n          download_button: data.download_button,\n          has_data_query_by_context: data.has_data_query_by_context,\n          has_data_query_by_provider: data.has_data_query_by_provider,\n          use_live_data: true,\n          vis_url: data.vis_url,\n          with_sources: data.show_sources,\n          include_core_metadata_download: data.include_core_metadata_download,\n        }}\n        hoverFormatXY={data.hover_format_xy}\n        withSources={data.show_sources}\n        width={data.width}\n        height={data.height}\n      />\n\n      <SidebarPortal selected={props.selected}>\n        <BlockDataForm\n          block={block}\n          title={schema.title}\n          schema={schema}\n          onChangeField={(id, value) => {\n            props.onChangeBlock(block, {\n              ...data,\n              [id]: value,\n            });\n          }}\n          formData={data}\n        />\n      </SidebarPortal>\n    </>\n  );\n};\n\nexport default Edit;\n"],"mappings":";;;;;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,aAAa,QAAQ,yBAAyB;AACvD,OAAOC,aAAa,MAAM,mDAAmD;AAC7E,OAAOC,eAAe,MAAM,4CAA4C;AAExE,OAAO,oDAAoD;AAC3D,OAAOC,MAAM,MAAM,UAAU;AAE7B,MAAMC,IAAI,GAAIC,KAAK,IAAK;EACtB,MAAM;IAAEC,IAAI;IAAEC,KAAK;IAAEC;EAAc,CAAC,GAAGH,KAAK;EAC5C,MAAMI,MAAM,GAAGV,KAAK,CAACW,OAAO,CAAC,MAAMP,MAAM,CAACE,KAAK,CAAC,EAAE,CAACA,KAAK,CAAC,CAAC;EAE1DN,KAAK,CAACY,SAAS,CAAC,MAAM;IACpB,IAAI,CAACC,MAAM,CAACC,MAAM,CAACP,IAAI,EAAE,iBAAiB,CAAC,EAAE;MAC3CE,aAAa,CAACD,KAAK,kCACdD,IAAI;QACPQ,eAAe,EAAE;MAAI,GACrB;IACJ;IACA,IAAI,CAACF,MAAM,CAACC,MAAM,CAACP,IAAI,EAAE,cAAc,CAAC,EAAE;MACxCE,aAAa,CAACD,KAAK,kCACdD,IAAI;QACPS,YAAY,EAAE;MAAI,GAClB;IACJ;EACF,CAAC,EAAE,CAACR,KAAK,EAAED,IAAI,EAAEE,aAAa,CAAC,CAAC;EAEhC,OACE,4BACE,MAAC,eAAe;IACd,EAAE,EAAEH,KAAK,CAACW,EAAG;IACb,IAAI,EAAE;MACJC,YAAY,EAAEX,IAAI,CAACW,YAAY;MAC/BC,UAAU,EAAEZ,IAAI,CAACY,UAAU;MAC3BJ,eAAe,EAAER,IAAI,CAACQ,eAAe;MACrCK,yBAAyB,EAAEb,IAAI,CAACa,yBAAyB;MACzDC,0BAA0B,EAAEd,IAAI,CAACc,0BAA0B;MAC3DC,aAAa,EAAE,IAAI;MACnBC,OAAO,EAAEhB,IAAI,CAACgB,OAAO;MACrBC,YAAY,EAAEjB,IAAI,CAACS,YAAY;MAC/BS,8BAA8B,EAAElB,IAAI,CAACkB;IACvC,CAAE;IACF,aAAa,EAAElB,IAAI,CAACmB,eAAgB;IACpC,WAAW,EAAEnB,IAAI,CAACS,YAAa;IAC/B,KAAK,EAAET,IAAI,CAACoB,KAAM;IAClB,MAAM,EAAEpB,IAAI,CAACqB,MAAO;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EACpB,EAEF,MAAC,aAAa;IAAC,QAAQ,EAAEtB,KAAK,CAACuB,QAAS;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACtC,MAAC,aAAa;IACZ,KAAK,EAAErB,KAAM;IACb,KAAK,EAAEE,MAAM,CAACoB,KAAM;IACpB,MAAM,EAAEpB,MAAO;IACf,aAAa,EAAE,CAACO,EAAE,EAAEc,KAAK,KAAK;MAC5BzB,KAAK,CAACG,aAAa,CAACD,KAAK,kCACpBD,IAAI;QACP,CAACU,EAAE,GAAGc;MAAK,GACX;IACJ,CAAE;IACF,QAAQ,EAAExB,IAAK;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EACf,CACY,CACf;AAEP,CAAC;AAED,eAAeF,IAAI"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}