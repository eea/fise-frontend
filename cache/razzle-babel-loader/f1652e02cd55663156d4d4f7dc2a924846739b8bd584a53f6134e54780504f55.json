{"ast":null,"code":"import _defineProperty from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectSpread from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _isEqual from \"lodash/isEqual\";\nvar _jsxFileName = \"/home/tooler/code/work/forests-frontend/src/develop/volto-eea-map/src/components/Blocks/EmbedEEAMap/Edit.jsx\",\n  _this = this,\n  _s = $RefreshSig$();\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { SidebarPortal } from '@plone/volto/components';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { getContent } from '@plone/volto/actions';\nimport BlockDataForm from '@plone/volto/components/manage/Form/BlockDataForm';\nimport View from './View';\nimport { Schema } from './Schema';\nimport '../../../styles/map.css';\nvar Edit = function Edit(props) {\n  _s();\n  var block = props.block,\n    data = props.data,\n    onChangeBlock = props.onChangeBlock,\n    selected = props.selected,\n    id = props.id;\n  var schema = React.useMemo(function () {\n    return Schema(props);\n  }, [props]);\n  React.useEffect(function () {\n    if (!Object.hasOwn(data, 'show_legend')) {\n      onChangeBlock(block, _objectSpread(_objectSpread({}, data), {}, {\n        show_legend: true\n      }));\n    }\n    if (!Object.hasOwn(data, 'show_sources')) {\n      onChangeBlock(block, _objectSpread(_objectSpread({}, data), {}, {\n        show_sources: true\n      }));\n    }\n    if (!Object.hasOwn(data, 'dataprotection')) {\n      onChangeBlock(block, _objectSpread(_objectSpread({}, data), {}, {\n        dataprotection: {\n          enabled: true\n        }\n      }));\n    }\n\n    //    eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data]);\n  React.useEffect(function () {\n    props.getContent(data.vis_url, null, id);\n    //    eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data.vis_url]);\n  React.useEffect(function () {\n    if (!data.data_query_params || !_isEqual(props.data_query, data.data_query_params)) {\n      onChangeBlock(block, _objectSpread(_objectSpread({}, data), {}, {\n        data_query_params: props.data_query\n      }));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.block, props.data_query, data.data_query_params]);\n  return __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, __jsx(View, {\n    data: data,\n    id: id,\n    isEdit: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }), __jsx(SidebarPortal, {\n    selected: selected,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, __jsx(BlockDataForm, {\n    block: block,\n    title: schema.title,\n    schema: schema,\n    onChangeField: function onChangeField(id, value) {\n      onChangeBlock(block, _objectSpread(_objectSpread({}, data), {}, _defineProperty({}, id, value)));\n    },\n    formData: data,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  })));\n};\n_s(Edit, \"ZV9s4S0HKm35B6ooFlY4YXjqNvo=\");\n_c = Edit;\nexport default compose(connect(function (state, props) {\n  return {\n    block_data: state.content.data,\n    data_query: state.content.data.data_query\n  };\n}, {\n  getContent: getContent\n}))(Edit);\nvar _c;\n$RefreshReg$(_c, \"Edit\");","map":{"version":3,"names":["React","SidebarPortal","connect","compose","getContent","BlockDataForm","View","Schema","Edit","props","block","data","onChangeBlock","selected","id","schema","useMemo","useEffect","Object","hasOwn","show_legend","show_sources","dataprotection","enabled","vis_url","data_query_params","data_query","title","value","state","block_data","content"],"sources":["/home/tooler/code/work/forests-frontend/src/develop/volto-eea-map/src/components/Blocks/EmbedEEAMap/Edit.jsx"],"sourcesContent":["import React from 'react';\nimport { SidebarPortal } from '@plone/volto/components';\n\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\n\nimport { getContent } from '@plone/volto/actions';\n\nimport BlockDataForm from '@plone/volto/components/manage/Form/BlockDataForm';\nimport View from './View';\nimport { Schema } from './Schema';\nimport '../../../styles/map.css';\n\nimport _ from 'lodash';\n\nconst Edit = (props) => {\n  const { block, data, onChangeBlock, selected, id } = props;\n  const schema = React.useMemo(() => Schema(props), [props]);\n\n  React.useEffect(() => {\n    if (!Object.hasOwn(data, 'show_legend')) {\n      onChangeBlock(block, {\n        ...data,\n        show_legend: true,\n      });\n    }\n    if (!Object.hasOwn(data, 'show_sources')) {\n      onChangeBlock(block, {\n        ...data,\n        show_sources: true,\n      });\n    }\n    if (!Object.hasOwn(data, 'dataprotection')) {\n      onChangeBlock(block, {\n        ...data,\n        dataprotection: { enabled: true },\n      });\n    }\n\n    //    eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data]);\n\n  React.useEffect(() => {\n    props.getContent(data.vis_url, null, id);\n    //    eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data.vis_url]);\n\n  React.useEffect(() => {\n    if (\n      !data.data_query_params ||\n      !_.isEqual(props.data_query, data.data_query_params)\n    ) {\n      onChangeBlock(block, {\n        ...data,\n        data_query_params: props.data_query,\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.block, props.data_query, data.data_query_params]);\n  return (\n    <div>\n      <View data={data} id={id} isEdit={true} />\n      <SidebarPortal selected={selected}>\n        <BlockDataForm\n          block={block}\n          title={schema.title}\n          schema={schema}\n          onChangeField={(id, value) => {\n            onChangeBlock(block, {\n              ...data,\n              [id]: value,\n            });\n          }}\n          formData={data}\n        />\n      </SidebarPortal>\n    </div>\n  );\n};\n\nexport default compose(\n  connect(\n    (state, props) => ({\n      block_data: state.content.data,\n      data_query: state.content.data.data_query,\n    }),\n    {\n      getContent,\n    },\n  ),\n)(Edit);\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}