{"ast":null,"code":"import _extends from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/extends.js\";\nimport _objectWithoutProperties from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nvar _excluded = [\"attributes\", \"children\", \"element\", \"mode\"];\nvar _jsxFileName = \"/home/tooler/code/work/forests-frontend/src/develop/volto-slate-dataentity/src/DataEntity/render.jsx\",\n  _this = this;\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { Popup } from 'semantic-ui-react';\nimport { VisibilitySensor } from '@eeacms/volto-datablocks/components';\nimport { DataConnectedValue } from '@eeacms/volto-datablocks/Utils';\nimport { wrapInlineMarkupText } from '@plone/volto-slate/utils';\nimport { v4 as uuid } from 'uuid';\nexport var DataEntityElement = function DataEntityElement(_ref) {\n  var attributes = _ref.attributes,\n    children = _ref.children,\n    element = _ref.element,\n    mode = _ref.mode,\n    rest = _objectWithoutProperties(_ref, _excluded);\n  var _element$data = element.data,\n    data = _element$data === void 0 ? {} : _element$data;\n  var provider_url = data.provider_url,\n    column = data.column,\n    row = data.row,\n    specifier = data.specifier,\n    textTemplate = data.textTemplate,\n    _data$placeholder = data.placeholder,\n    placeholder = _data$placeholder === void 0 ? ' ' : _data$placeholder,\n    _data$withReadmore = data.withReadmore,\n    withReadmore = _data$withReadmore === void 0 ? false : _data$withReadmore,\n    _data$maxChars = data.maxChars,\n    maxChars = _data$maxChars === void 0 ? null : _data$maxChars;\n  return __jsx(React.Fragment, null, mode === 'view' ? __jsx(\"span\", _extends({}, rest, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 9\n    }\n  }), wrapInlineMarkupText(children, function (c) {\n    return __jsx(VisibilitySensor, {\n      Placeholder: function Placeholder() {\n        return __jsx(\"span\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 50\n          }\n        }, \"\\xA0\");\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 13\n      }\n    }, __jsx(DataConnectedValue, {\n      collapsable: withReadmore,\n      collapseLimit: maxChars,\n      column: column,\n      row: row,\n      data: {\n        data_query: data.data_query\n      },\n      key: uuid(),\n      placeholder: placeholder,\n      specifier: specifier,\n      textTemplate: textTemplate,\n      url: provider_url,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 15\n      }\n    }));\n  })) : __jsx(Popup, {\n    content: data.entity,\n    header: \"Data entity\",\n    position: \"bottom left\",\n    trigger: __jsx(\"span\", _extends({}, attributes, {\n      className: \"data-entity data-entity-edit-node\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }\n    }), children),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }));\n};\n_c = DataEntityElement;\nvar _c;\n$RefreshReg$(_c, \"DataEntityElement\");","map":{"version":3,"names":["React","Popup","VisibilitySensor","DataConnectedValue","wrapInlineMarkupText","v4","uuid","DataEntityElement","attributes","children","element","mode","rest","data","provider_url","column","row","specifier","textTemplate","placeholder","withReadmore","maxChars","c","data_query","entity"],"sources":["/home/tooler/code/work/forests-frontend/src/develop/volto-slate-dataentity/src/DataEntity/render.jsx"],"sourcesContent":["import React from 'react';\nimport { Popup } from 'semantic-ui-react';\nimport { VisibilitySensor } from '@eeacms/volto-datablocks/components';\nimport { DataConnectedValue } from '@eeacms/volto-datablocks/Utils';\nimport { wrapInlineMarkupText } from '@plone/volto-slate/utils';\nimport { v4 as uuid } from 'uuid';\n\nexport const DataEntityElement = ({\n  attributes,\n  children,\n  element,\n  mode,\n  ...rest\n}) => {\n  const { data = {} } = element;\n  const {\n    provider_url,\n    column,\n    row,\n    specifier,\n    textTemplate,\n    placeholder = ' ',\n    withReadmore = false,\n    maxChars = null,\n  } = data;\n\n  return (\n    <>\n      {mode === 'view' ? (\n        <span {...rest}>\n          {wrapInlineMarkupText(children, (c) => (\n            <VisibilitySensor Placeholder={() => <span>&nbsp;</span>}>\n              <DataConnectedValue\n                collapsable={withReadmore}\n                collapseLimit={maxChars}\n                column={column}\n                row={row}\n                data={{ data_query: data.data_query }}\n                key={uuid()}\n                placeholder={placeholder}\n                specifier={specifier}\n                textTemplate={textTemplate}\n                url={provider_url}\n              />\n            </VisibilitySensor>\n          ))}\n        </span>\n      ) : (\n        <Popup\n          content={data.entity}\n          header=\"Data entity\"\n          position=\"bottom left\"\n          trigger={\n            <span {...attributes} className=\"data-entity data-entity-edit-node\">\n              {children}\n            </span>\n          }\n        />\n      )}\n    </>\n  );\n};\n"],"mappings":";;;;;;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,KAAK,QAAQ,mBAAmB;AACzC,SAASC,gBAAgB,QAAQ,qCAAqC;AACtE,SAASC,kBAAkB,QAAQ,gCAAgC;AACnE,SAASC,oBAAoB,QAAQ,0BAA0B;AAC/D,SAASC,EAAE,IAAIC,IAAI,QAAQ,MAAM;AAEjC,OAAO,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiB,OAMxB;EAAA,IALJC,UAAU,QAAVA,UAAU;IACVC,QAAQ,QAARA,QAAQ;IACRC,OAAO,QAAPA,OAAO;IACPC,IAAI,QAAJA,IAAI;IACDC,IAAI;EAEP,oBAAsBF,OAAO,CAArBG,IAAI;IAAJA,IAAI,8BAAG,CAAC,CAAC;EACjB,IACEC,YAAY,GAQVD,IAAI,CARNC,YAAY;IACZC,MAAM,GAOJF,IAAI,CAPNE,MAAM;IACNC,GAAG,GAMDH,IAAI,CANNG,GAAG;IACHC,SAAS,GAKPJ,IAAI,CALNI,SAAS;IACTC,YAAY,GAIVL,IAAI,CAJNK,YAAY;IAAA,oBAIVL,IAAI,CAHNM,WAAW;IAAXA,WAAW,kCAAG,GAAG;IAAA,qBAGfN,IAAI,CAFNO,YAAY;IAAZA,YAAY,mCAAG,KAAK;IAAA,iBAElBP,IAAI,CADNQ,QAAQ;IAARA,QAAQ,+BAAG,IAAI;EAGjB,OACE,4BACGV,IAAI,KAAK,MAAM,GACd,2BAAUC,IAAI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,IACXR,oBAAoB,CAACK,QAAQ,EAAE,UAACa,CAAC;IAAA,OAChC,MAAC,gBAAgB;MAAC,WAAW,EAAE;QAAA,OAAM;UAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QAAA,UAAmB;MAAA,CAAC;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GACvD,MAAC,kBAAkB;MACjB,WAAW,EAAEF,YAAa;MAC1B,aAAa,EAAEC,QAAS;MACxB,MAAM,EAAEN,MAAO;MACf,GAAG,EAAEC,GAAI;MACT,IAAI,EAAE;QAAEO,UAAU,EAAEV,IAAI,CAACU;MAAW,CAAE;MACtC,GAAG,EAAEjB,IAAI,EAAG;MACZ,WAAW,EAAEa,WAAY;MACzB,SAAS,EAAEF,SAAU;MACrB,YAAY,EAAEC,YAAa;MAC3B,GAAG,EAAEJ,YAAa;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAClB,CACe;EAAA,CACpB,CAAC,CACG,GAEP,MAAC,KAAK;IACJ,OAAO,EAAED,IAAI,CAACW,MAAO;IACrB,MAAM,EAAC,aAAa;IACpB,QAAQ,EAAC,aAAa;IACtB,OAAO,EACL,2BAAUhB,UAAU;MAAE,SAAS,EAAC,mCAAmC;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,IAChEC,QAAQ,CAEZ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAEJ,CACA;AAEP,CAAC;AAAC,KAtDWF,iBAAiB;AAAA;AAAA"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}