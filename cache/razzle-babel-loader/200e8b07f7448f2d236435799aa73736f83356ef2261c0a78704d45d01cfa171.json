{"ast":null,"code":"import _classCallCheck from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nvar _jsxFileName = \"/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-addons-forest/src/Collection/Filter.jsx\";\nvar __jsx = React.createElement;\nimport { connect } from 'react-redux';\nimport { Portal } from 'react-portal';\nimport React, { Component } from 'react';\nimport { getIndexValues } from '../actions';\nimport { Menu, Label } from 'semantic-ui-react';\nimport { Button } from 'semantic-ui-react';\nvar Filter = /*#__PURE__*/function (_Component) {\n  _inherits(Filter, _Component);\n  var _super = _createSuper(Filter);\n  function Filter() {\n    _classCallCheck(this, Filter);\n    return _super.apply(this, arguments);\n  }\n  _createClass(Filter, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.facetFilter) {\n        this.props.getIndexValues(this.props.facetFilter.token);\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.facetFilter.token !== prevProps.facetFilter.token) {\n        this.props.getIndexValues(this.props.facetFilter.token);\n      }\n    }\n  }, {\n    key: \"computeStats\",\n    value: function computeStats() {\n      var filters = this.props.filters;\n      var results = this.props.results;\n      var facetFilter = this.props.facetFilter;\n      if (!results) return [];\n      var res = {};\n      filters.forEach(function (f) {\n        res[f] = 0;\n      });\n      results.forEach(function (item) {\n        filters.forEach(function (f) {\n          if (item[facetFilter.token] && item[facetFilter.token].indexOf(f) > -1) {\n            res[f] += 1;\n          }\n        });\n      });\n      return res;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n      var stats = this.computeStats();\n      return __CLIENT__ && this.props.facetFilter && document.querySelector('.content-page .inPageNavigation') ? __jsx(Portal, {\n        node: __CLIENT__ && document.querySelector('.content-page .inPageNavigation'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 7\n        }\n      }, __jsx(\"div\", {\n        className: \"headings_navigation\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 9\n        }\n      }, __jsx(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }\n      }, __jsx(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }\n      }, \"Filter by \", this.props.facetFilter.title)), __jsx(Menu, {\n        vertical: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }\n      }, this.props.filters.map(function (item) {\n        return __jsx(Menu.Item, {\n          key: item,\n          name: item,\n          onClick: _this.props.handleSelectFilter,\n          active: _this.props.selectedValue === item,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 15\n          }\n        }, __jsx(Label, {\n          color: \"teal\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 17\n          }\n        }, stats[item]), item);\n      })), this.props.selectedValue ? __jsx(Button, {\n        onClick: function onClick() {\n          return _this.props.handleSelectFilter(null, {\n            name: ''\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }\n      }, \"Clear\") : __jsx(React.Fragment, null))) : '';\n    }\n  }]);\n  return Filter;\n}(Component);\nexport default connect(function (state, props) {\n  return {\n    filters: state.index_values && state.index_values.items || []\n  };\n}, {\n  getIndexValues: getIndexValues\n})(Filter);","map":{"version":3,"names":["connect","Portal","React","Component","getIndexValues","Menu","Label","Button","Filter","props","facetFilter","token","prevProps","filters","results","res","forEach","f","item","indexOf","stats","computeStats","__CLIENT__","document","querySelector","title","map","handleSelectFilter","selectedValue","name","state","index_values","items"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-addons-forest/src/Collection/Filter.jsx"],"sourcesContent":["import { connect } from 'react-redux';\nimport { Portal } from 'react-portal';\nimport React, { Component } from 'react';\nimport { getIndexValues } from '../actions';\nimport { Menu, Label } from 'semantic-ui-react';\nimport { Button } from 'semantic-ui-react';\n\nclass Filter extends Component {\n  componentDidMount() {\n    if (this.props.facetFilter) {\n      this.props.getIndexValues(this.props.facetFilter.token);\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.facetFilter.token !== prevProps.facetFilter.token) {\n      this.props.getIndexValues(this.props.facetFilter.token);\n    }\n  }\n\n  computeStats() {\n    const filters = this.props.filters;\n    const results = this.props.results;\n    const facetFilter = this.props.facetFilter;\n\n    if (!results) return [];\n\n    const res = {};\n    filters.forEach((f) => {\n      res[f] = 0;\n    });\n    results.forEach((item) => {\n      filters.forEach((f) => {\n        if (\n          item[facetFilter.token] &&\n          item[facetFilter.token].indexOf(f) > -1\n        ) {\n          res[f] += 1;\n        }\n      });\n    });\n    return res;\n  }\n\n  render() {\n    const stats = this.computeStats();\n    return __CLIENT__ &&\n      this.props.facetFilter &&\n      document.querySelector('.content-page .inPageNavigation') ? (\n      <Portal\n        node={\n          __CLIENT__ &&\n          document.querySelector('.content-page .inPageNavigation')\n        }\n      >\n        <div className=\"headings_navigation\">\n          <h5>\n            <b>Filter by {this.props.facetFilter.title}</b>\n          </h5>\n          <Menu vertical>\n            {this.props.filters.map((item) => (\n              <Menu.Item\n                key={item}\n                name={item}\n                onClick={this.props.handleSelectFilter}\n                active={this.props.selectedValue === item}\n              >\n                <Label color=\"teal\">{stats[item]}</Label>\n                {item}\n              </Menu.Item>\n            ))}\n          </Menu>\n          {this.props.selectedValue ? (\n            <Button\n              onClick={() => this.props.handleSelectFilter(null, { name: '' })}\n            >\n              Clear\n            </Button>\n          ) : (\n            <></>\n          )}\n        </div>\n      </Portal>\n    ) : (\n      ''\n    );\n  }\n}\n\nexport default connect(\n  (state, props) => {\n    return {\n      filters: (state.index_values && state.index_values.items) || [],\n    };\n  },\n  {\n    getIndexValues,\n  },\n)(Filter);\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}