{"ast":null,"code":"import _objectSpread from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _toConsumableArray from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nvar _jsxFileName = \"/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-slate-zotero/src/plugins/zotero/editor/ZoteroDataWrapper.jsx\",\n  _this = this,\n  _s = $RefreshSig$();\nvar __jsx = React.createElement;\nimport { Icon as VoltoIcon } from '@plone/volto/components';\nimport briefcaseSVG from '@plone/volto/icons/briefcase.svg';\nimport checkSVG from '@plone/volto/icons/check.svg';\nimport clearSVG from '@plone/volto/icons/clear.svg';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { toast } from 'react-toastify';\nimport { Button, Loader } from 'semantic-ui-react';\nimport { fetchOpenairePubSearchItems, fetchOpenaireRsdSearchItems, fetchZoteroCollections, fetchZoteroItemCitation, fetchZoteroItems, fetchZoteroSearchItems, fetchZoteroSubCollections, getZoteroSettings, saveItemToZotero } from './actions';\nimport InlineForm from './InlineForm';\nimport MasterDetailWidget from './MasterDetailWidget';\nimport { findDOI, formatCitation, formatOpenAire, makeOpenAireUrlObj } from './utils';\nvar ZoteroDataWrapper = function ZoteroDataWrapper(props) {\n  _s();\n  var _props$formData, _props$formData2, _props$formData3;\n  var _useState = useState(null),\n    selectedCollection = _useState[0],\n    setSelectedCollection = _useState[1];\n  var _useState2 = useState(null),\n    selectedItem = _useState2[0],\n    setSelectedItem = _useState2[1];\n  var _useState3 = useState(false),\n    showSearchResults = _useState3[0],\n    setShowSearchResults = _useState3[1];\n  var _useState4 = useState(false),\n    hasMultipleDOIs = _useState4[0],\n    setHasMultipleDOIs = _useState4[1];\n  var _useState5 = useState([]),\n    collections = _useState5[0],\n    setCollections = _useState5[1];\n  var _useState6 = useState([]),\n    topCollections = _useState6[0],\n    setTopCollections = _useState6[1];\n  var _useState7 = useState([]),\n    items = _useState7[0],\n    setItems = _useState7[1];\n  var _useState8 = useState([]),\n    composedItems = _useState8[0],\n    setComposedItems = _useState8[1];\n  var _useState9 = useState([]),\n    allSearchResults = _useState9[0],\n    setAllSearchResults = _useState9[1];\n  var _useState10 = useState([]),\n    zoteroSearchResults = _useState10[0],\n    setZoteroSearchResults = _useState10[1];\n  var _useState11 = useState([]),\n    openAireSearchResults = _useState11[0],\n    setOpenAireSearchResults = _useState11[1];\n  var _useState12 = useState(false),\n    loading = _useState12[0],\n    setLoading = _useState12[1];\n  var _useState13 = useState(false),\n    citationLoading = _useState13[0],\n    setCitationLoading = _useState13[1];\n  var _useState14 = useState(false),\n    loadingMore = _useState14[0],\n    setLoadingMore = _useState14[1];\n  var _useState15 = useState(false),\n    topCollectionFlag = _useState15[0],\n    setTopCollectionFlag = _useState15[1];\n  var _useState16 = useState(null),\n    searchTerm = _useState16[0],\n    setSearchTerm = _useState16[1];\n  var _useState17 = useState(props.formData),\n    updatedFormData = _useState17[0],\n    setUpdatedFormData = _useState17[1]; // eslint-disable-line\n  var _useState18 = useState(0),\n    zoteroSearchItemsTotalResultsNumber = _useState18[0],\n    setZoteroSearchItemsTotalResultsNumber = _useState18[1];\n  var _useState19 = useState(0),\n    openAireTotalResultsNumber = _useState19[0],\n    setOpenAireTotalResultsNumber = _useState19[1];\n  var _useState20 = useState(0),\n    openAirePubTotalResultsNumber = _useState20[0],\n    setOpenAirePubTotalResultsNumber = _useState20[1];\n  var _useState21 = useState(0),\n    openAireRsdTotalResultsNumber = _useState21[0],\n    setOpenAireRsdTotalResultsNumber = _useState21[1];\n  var _useState22 = useState(0),\n    zoteroItemsTotalResultsNumber = _useState22[0],\n    setZoteroItemsTotalResultsNumber = _useState22[1];\n  var _useState23 = useState(0),\n    zoteroCollectionsTotalResultsNumber = _useState23[0],\n    setZoteroCollectionsTotalResultsNumber = _useState23[1];\n  var _useState24 = useState(0),\n    zoteroTopCollectionsTotalResultsNumber = _useState24[0],\n    setZoteroTopCollectionsTotalResultsNumber = _useState24[1];\n  var _useState25 = useState(0),\n    zoteroItemsOffset = _useState25[0],\n    setZoteroItemsOffset = _useState25[1];\n  var _useState26 = useState(0),\n    zoteroSearchItemsOffset = _useState26[0],\n    setZoteroSearchItemsOffset = _useState26[1];\n  var _useState27 = useState(0),\n    zoteroCollectionsOffset = _useState27[0],\n    setZoteroCollectionsOffset = _useState27[1];\n  var _useState28 = useState([]),\n    openAirePublicationResults = _useState28[0],\n    setOpenAirePublicationResults = _useState28[1];\n  var _useState29 = useState([]),\n    openAireDataResults = _useState29[0],\n    setOpenAireDataResults = _useState29[1];\n  var zotero_settings = useSelector(function (state) {\n    var _state$zotero_setting;\n    return state === null || state === void 0 ? void 0 : (_state$zotero_setting = state.zotero_settings) === null || _state$zotero_setting === void 0 ? void 0 : _state$zotero_setting.api;\n  });\n  var zotero_search_items = useSelector(function (state) {\n    var _state$zotero_search_;\n    return state === null || state === void 0 ? void 0 : (_state$zotero_search_ = state.zotero_search_items) === null || _state$zotero_search_ === void 0 ? void 0 : _state$zotero_search_.api;\n  });\n  var zotero_collections = useSelector(function (state) {\n    var _state$zotero_collect;\n    return state === null || state === void 0 ? void 0 : (_state$zotero_collect = state.zotero_collections) === null || _state$zotero_collect === void 0 ? void 0 : _state$zotero_collect.api;\n  });\n  var zotero_sub_collections = useSelector(function (state) {\n    var _state$zotero_sub_col;\n    return state === null || state === void 0 ? void 0 : (_state$zotero_sub_col = state.zotero_sub_collections) === null || _state$zotero_sub_col === void 0 ? void 0 : _state$zotero_sub_col.api;\n  });\n  var zotero_items = useSelector(function (state) {\n    var _state$zotero_items;\n    return state === null || state === void 0 ? void 0 : (_state$zotero_items = state.zotero_items) === null || _state$zotero_items === void 0 ? void 0 : _state$zotero_items.api;\n  });\n  var zotero_item_citation = useSelector(function (state) {\n    var _state$zotero_item_ci;\n    return state === null || state === void 0 ? void 0 : (_state$zotero_item_ci = state.zotero_item_citation) === null || _state$zotero_item_ci === void 0 ? void 0 : _state$zotero_item_ci.api;\n  });\n  var zotero_item_saved = useSelector(function (state) {\n    return state === null || state === void 0 ? void 0 : state.zotero_item_saved;\n  });\n  var openaire_items_pub = useSelector(function (state) {\n    return state === null || state === void 0 ? void 0 : state.openaire_items_pub;\n  });\n  var openaire_items_rsd = useSelector(function (state) {\n    return state === null || state === void 0 ? void 0 : state.openaire_items_rsd;\n  });\n  var _useState30 = useState(0),\n    activeTabIndexS = _useState30[0],\n    setActiveTabIndexS = _useState30[1];\n  var _useState31 = useState(1),\n    openAirePage = _useState31[0],\n    setOpenAirePage = _useState31[1];\n  var dispatch = useDispatch();\n  var setActiveTabIndex = function setActiveTabIndex(index) {\n    setActiveTabIndexS(index);\n  };\n  var headers = {\n    Authorization: 'Bearer ' + (zotero_settings === null || zotero_settings === void 0 ? void 0 : zotero_settings.password),\n    'Content-Type': 'application/json'\n  };\n  var zoteroBaseUrl = zotero_settings === null || zotero_settings === void 0 ? void 0 : zotero_settings.server;\n  var zoteroCollectionsTopUrl = \"\".concat(zoteroBaseUrl, \"/collections/top/\");\n  var zoteroCollectionsUrl = \"\".concat(zoteroBaseUrl, \"/collections/\");\n  var zoteroSearchUrl = \"\".concat(zoteroBaseUrl, \"/items?q=\");\n  var fetchCollections = function fetchCollections() {\n    var offset = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var finalUrl = \"\".concat(zoteroCollectionsTopUrl, \"?start=\").concat(offset, \"&limit=10&sort=title\");\n    setTopCollectionFlag(true);\n    dispatch(fetchZoteroCollections(finalUrl, headers));\n  };\n  var fetchItems = function fetchItems(collectionId) {\n    var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var finalUrl = \"\".concat(zoteroCollectionsUrl).concat(collectionId, \"/items/?start=\").concat(offset, \"&limit=10&sort=title\");\n    dispatch(fetchZoteroItems(finalUrl, headers));\n  };\n  var fetchSubCollections = function fetchSubCollections(collectionId) {\n    var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var finalUrl = \"\".concat(zoteroCollectionsUrl).concat(collectionId, \"/collections/?start=\").concat(offset, \"&limit=10&sort=title\");\n    dispatch(fetchZoteroSubCollections(finalUrl, headers));\n  };\n  var fetchZoteroSearch = function fetchZoteroSearch(term) {\n    var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var finalUrl = \"\".concat(zoteroSearchUrl).concat(term, \"&limit=10&start=\").concat(offset, \"&sort=title\");\n    setShowSearchResults(true);\n    setZoteroSearchItemsOffset(offset);\n    dispatch(fetchZoteroSearchItems(finalUrl, headers));\n  };\n  var fetchAireSearch = function fetchAireSearch() {\n    var term = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : searchTerm;\n    setShowSearchResults(true);\n    var filters = ['publications', 'rsd'];\n    var objectTypeUrl = makeOpenAireUrlObj(filters);\n    var searchForDoi = findDOI(term);\n    if (searchForDoi.length > 0) {\n      searchForDoi.forEach(function (doi) {\n        setHasMultipleDOIs(true);\n        var finalPubUrl = \"\".concat(objectTypeUrl[0], \"/?doi=\").concat(doi, \"&format=json\");\n        var finalRsdUrl = \"\".concat(objectTypeUrl[1], \"/?doi=\").concat(doi, \"&format=json\");\n        dispatch(fetchOpenairePubSearchItems([finalPubUrl]));\n        dispatch(fetchOpenaireRsdSearchItems([finalRsdUrl]));\n      });\n    } else {\n      var finalTitlePubUrl = \"\".concat(objectTypeUrl[0], \"/?title=\").concat(term, \"&format=json&size=20&page=\").concat(openAirePage);\n      var finalAuthorPubUrl = \"\".concat(objectTypeUrl[0], \"/?author=\").concat(term, \"&format=json&size=20&page=\").concat(openAirePage);\n      var finalTitleRsdUrl = \"\".concat(objectTypeUrl[1], \"/?title=\").concat(term, \"&format=json&size=20&page=\").concat(openAirePage);\n      var finalAuthorRsdUrl = \"\".concat(objectTypeUrl[1], \"/?author=\").concat(term, \"&format=json&size=20&page=\").concat(openAirePage);\n      dispatch(fetchOpenairePubSearchItems([finalTitlePubUrl, finalAuthorPubUrl]));\n      dispatch(fetchOpenaireRsdSearchItems([finalTitleRsdUrl, finalAuthorRsdUrl]));\n    }\n  };\n  var fetchItemCitation = function fetchItemCitation(zoteroId) {\n    var finalUrl = \"\".concat(zoteroBaseUrl, \"/items/\").concat(zoteroId, \"?format=bib&style=\").concat(zotero_settings === null || zotero_settings === void 0 ? void 0 : zotero_settings.style);\n    dispatch(fetchZoteroItemCitation(finalUrl, headers));\n  };\n  var handleSaveItemToZotero = function handleSaveItemToZotero(itemToSave) {\n    var finalUrl = \"\".concat(zoteroBaseUrl, \"/items/\");\n    var body = JSON.stringify([itemToSave.data]);\n    dispatch(saveItemToZotero(finalUrl, headers, body));\n  };\n  var handleLoadMore = function handleLoadMore() {\n    // load search rezults\n    setLoadingMore(true);\n    setHasMultipleDOIs(false);\n    if (showSearchResults) {\n      switch (activeTabIndexS) {\n        case 0:\n          setOpenAirePage(openAirePage + 1);\n          fetchZoteroSearch(searchTerm, zoteroSearchResults.length);\n          fetchAireSearch(searchTerm);\n          break;\n        case 1:\n          fetchZoteroSearch(searchTerm, zoteroSearchResults.length);\n          break;\n        case 2:\n          setOpenAirePage(openAirePage + 1);\n          fetchAireSearch(searchTerm);\n          break;\n        default:\n          break;\n      }\n    }\n    // load more collections and items\n    else {\n      setZoteroCollectionsOffset(collections.length);\n      setZoteroItemsOffset(items.length);\n      if (topCollectionFlag) {\n        // load more top collections\n        fetchCollections(collections.length);\n      } else {\n        // load more sub-collections and items\n        fetchSubCollections(selectedCollection, collections.length);\n        fetchItems(selectedCollection, items.length);\n      }\n    }\n  };\n  var onChangeSearchTerm = function onChangeSearchTerm(searchTerm) {\n    setLoading(true);\n    setSearchTerm(searchTerm);\n    setZoteroSearchItemsOffset(0);\n    setOpenAirePage(1);\n    setHasMultipleDOIs(false);\n    fetchZoteroSearch(searchTerm);\n    fetchAireSearch(searchTerm);\n  };\n  var pull = function pull() {\n    setSelectedCollection(null);\n    setTopCollectionFlag(true);\n    setCollections(topCollections);\n    setZoteroCollectionsTotalResultsNumber(zoteroTopCollectionsTotalResultsNumber);\n  };\n  var pushCollection = function pushCollection(selectedCollectionIndex) {\n    var selectedCol = collections[selectedCollectionIndex];\n    setLoading(true);\n    setZoteroSearchItemsOffset(0);\n    setZoteroItemsOffset(0);\n    setCollections([]);\n    setZoteroCollectionsTotalResultsNumber(0);\n    setTopCollectionFlag(false);\n    if (selectedCol.meta.numCollections > 0) {\n      fetchSubCollections(selectedCol.key);\n    }\n    fetchItems(selectedCol.key);\n    setSelectedCollection(selectedCol.key);\n  };\n  var showCollections = function showCollections() {\n    setActiveTabIndexS(-1);\n    setShowSearchResults(false);\n    pull();\n  };\n  var pushItem = function pushItem(receivedItem) {\n    setCitationLoading(true);\n    fetchItemCitation(receivedItem.key);\n    setSelectedItem(receivedItem);\n  };\n  var pushSearchItem = function pushSearchItem(receivedItem) {\n    setCitationLoading(true);\n    setSelectedItem(receivedItem);\n    if (!receivedItem.isOpenAire) {\n      fetchItemCitation(receivedItem.key);\n    } else {\n      handleSaveItemToZotero(receivedItem);\n    }\n  };\n\n  /**\n   * Will search for openAire based on received filters\n   * @param {string[]} item\n   */\n  var openAireCallback = function openAireCallback(filterList) {\n    var aireLiteral = {\n      publications: openAirePublicationResults,\n      rsd: openAireDataResults\n    };\n    var aireResults = filterList.reduce(function (accumulator, currentValue) {\n      return [].concat(_toConsumableArray(accumulator), _toConsumableArray(aireLiteral[currentValue]));\n    }, []);\n    setAllSearchResults([].concat(_toConsumableArray(zoteroSearchResults), _toConsumableArray(aireResults)));\n    setOpenAireSearchResults(aireResults);\n  };\n\n  // Similar to componentDidMount and componentDidUpdate:\n  // used only once at mount\n  useEffect(function () {\n    dispatch(getZoteroSettings());\n    // to be used only once at mount\n  }, []); // eslint-disable-line\n\n  useEffect(function () {\n    if (zotero_settings) {\n      setLoading(true);\n      fetchCollections();\n    }\n  }, [zotero_settings]); // eslint-disable-line\n\n  useEffect(function () {\n    if (zotero_collections) {\n      var mergedResult = zoteroCollectionsOffset > 0 ? [].concat(_toConsumableArray(collections), _toConsumableArray(zotero_collections.results)) : zotero_collections.results;\n      setCollections(mergedResult);\n      if (topCollectionFlag) setTopCollections(mergedResult);\n      setZoteroCollectionsTotalResultsNumber(zotero_collections.totalResults);\n      setZoteroTopCollectionsTotalResultsNumber(zotero_collections.totalResults);\n      setLoading(false);\n      setLoadingMore(false);\n    }\n  }, [zotero_collections]); // eslint-disable-line\n\n  useEffect(function () {\n    if (zotero_sub_collections) {\n      var mergedResult = zoteroCollectionsOffset > 0 ? [].concat(_toConsumableArray(collections), _toConsumableArray(zotero_sub_collections.results)) : zotero_sub_collections.results;\n      var formattedResults = mergedResult.map(function (item) {\n        var formattedItem = _objectSpread({}, item);\n        formattedItem.citationTitle = formatCitation(item);\n        return formattedItem;\n      });\n      setCollections(formattedResults);\n      setZoteroCollectionsTotalResultsNumber(zotero_sub_collections.totalResults);\n      setComposedItems([].concat(_toConsumableArray(formattedResults), _toConsumableArray(items)));\n      setLoading(false);\n      setLoadingMore(false);\n    }\n  }, [zotero_sub_collections]); // eslint-disable-line\n\n  useEffect(function () {\n    if (zotero_items) {\n      var mergedResult = zoteroItemsOffset > 0 ? [].concat(_toConsumableArray(items), _toConsumableArray(zotero_items.results)) : zotero_items.results;\n      var formattedResults = mergedResult.map(function (item) {\n        var formattedItem = _objectSpread({}, item);\n        formattedItem.citationTitle = formatCitation(item);\n        return formattedItem;\n      });\n      setItems(formattedResults);\n      setZoteroItemsTotalResultsNumber(zotero_items.totalResults);\n      setComposedItems([].concat(_toConsumableArray(collections), _toConsumableArray(formattedResults)));\n      setLoading(false);\n      setLoadingMore(false);\n    }\n  }, [zotero_items]); // eslint-disable-line\n\n  useEffect(function () {\n    if (zotero_item_citation && selectedItem) {\n      setLoading(false);\n      setLoadingMore(false);\n      setCitationLoading(false);\n      var footnote = zotero_item_citation.result;\n      setUpdatedFormData(updatedFormData.footnote ? _objectSpread(_objectSpread({}, updatedFormData), {}, {\n        extra: [].concat(_toConsumableArray(updatedFormData.extra || []), [{\n          footnote: footnote,\n          zoteroId: selectedItem.key,\n          footnoteTitle: formatCitation(selectedItem)\n        }])\n      }) : _objectSpread(_objectSpread({}, updatedFormData), {\n        footnote: footnote,\n        zoteroId: selectedItem.key,\n        footnoteTitle: formatCitation(selectedItem)\n      }));\n    }\n  }, [zotero_item_citation]); // eslint-disable-line\n\n  useEffect(function () {\n    var _zotero_item_saved$zo;\n    if (zotero_item_saved.api) {\n      var itemId = zotero_item_saved.api.success[0];\n      toast.success('Successfully added to Zotero Library');\n      setLoading(false);\n      fetchItemCitation(itemId);\n    }\n    if (zotero_item_saved !== null && zotero_item_saved !== void 0 && (_zotero_item_saved$zo = zotero_item_saved.zotero) !== null && _zotero_item_saved$zo !== void 0 && _zotero_item_saved$zo.error) {\n      setLoading(false);\n      setLoadingMore(false);\n    }\n  }, [zotero_item_saved]); // eslint-disable-line\n\n  useEffect(function () {\n    if (zotero_search_items) {\n      var finalResult = zoteroSearchItemsOffset > 0 ? [].concat(_toConsumableArray(zoteroSearchResults), _toConsumableArray(zotero_search_items.results)) : zotero_search_items.results;\n      var zoteroResults = finalResult.map(function (item) {\n        var formattedItem = _objectSpread({}, item);\n        formattedItem.citationTitle = formatCitation(item);\n        return formattedItem;\n      });\n      setZoteroSearchItemsTotalResultsNumber(zotero_search_items.totalResults);\n      setZoteroSearchResults(zoteroResults);\n      setAllSearchResults([].concat(_toConsumableArray(zoteroResults), _toConsumableArray(openAirePublicationResults), _toConsumableArray(openAireDataResults)));\n      setLoading(false);\n      setLoadingMore(false);\n    }\n  }, [zotero_search_items]); // eslint-disable-line\n\n  useEffect(function () {\n    if (openaire_items_pub.api) {\n      var formattedResults = openaire_items_pub.api.map(function (item) {\n        return formatOpenAire(item, 'publications', zotero_settings === null || zotero_settings === void 0 ? void 0 : zotero_settings[\"default\"]);\n      });\n      var publicationRestuls = openAirePage > 1 ? [].concat(_toConsumableArray(openAirePublicationResults), _toConsumableArray(formattedResults)) : hasMultipleDOIs ? [].concat(_toConsumableArray(openAirePublicationResults), _toConsumableArray(formattedResults)) : formattedResults;\n      var uniquePublicationRestuls = publicationRestuls.filter(function (result) {\n        return !zoteroSearchResults.find(function (zoteroResult) {\n          return zoteroResult.data.DOI === result.data.DOI;\n        });\n      });\n      setOpenAirePubTotalResultsNumber(openaire_items_pub.totalResults);\n      setOpenAireTotalResultsNumber(openaire_items_pub.totalResults + openAireRsdTotalResultsNumber);\n      setOpenAirePublicationResults(uniquePublicationRestuls);\n      setOpenAireSearchResults([].concat(_toConsumableArray(uniquePublicationRestuls), _toConsumableArray(openAireDataResults)));\n      setAllSearchResults([].concat(_toConsumableArray(zoteroSearchResults), _toConsumableArray(uniquePublicationRestuls), _toConsumableArray(openAireDataResults)));\n      setLoading(false);\n      setLoadingMore(false);\n    }\n  }, [openaire_items_pub]); // eslint-disable-line\n\n  useEffect(function () {\n    if (openaire_items_rsd.api) {\n      var formattedResults = openaire_items_rsd.api.map(function (item) {\n        return formatOpenAire(item, 'rsd', zotero_settings === null || zotero_settings === void 0 ? void 0 : zotero_settings[\"default\"]);\n      });\n      var rsdRestuls = openAirePage > 1 ? [].concat(_toConsumableArray(openAireDataResults), _toConsumableArray(formattedResults)) : hasMultipleDOIs ? [].concat(_toConsumableArray(openAireDataResults), _toConsumableArray(formattedResults)) : formattedResults;\n      var uniqueRsdRestuls = rsdRestuls.filter(function (result) {\n        return !zoteroSearchResults.find(function (zoteroResult) {\n          return zoteroResult.data.DOI === result.data.DOI;\n        });\n      });\n      setOpenAireRsdTotalResultsNumber(openaire_items_rsd.totalResults);\n      setOpenAireTotalResultsNumber(openaire_items_rsd.totalResults + openAirePubTotalResultsNumber);\n      setOpenAireDataResults(uniqueRsdRestuls);\n      setOpenAireSearchResults([].concat(_toConsumableArray(openAirePublicationResults), _toConsumableArray(uniqueRsdRestuls)));\n      setAllSearchResults([].concat(_toConsumableArray(zoteroSearchResults), _toConsumableArray(openAirePublicationResults), _toConsumableArray(uniqueRsdRestuls)));\n      setLoading(false);\n      setLoadingMore(false);\n    }\n  }, [openaire_items_rsd]); // eslint-disable-line\n\n  useEffect(function () {\n    setUpdatedFormData(_objectSpread({}, props.formData));\n    /* eslint-disable */\n  }, [props.formData, (_props$formData = props.formData) === null || _props$formData === void 0 ? void 0 : _props$formData.footnote, (_props$formData2 = props.formData) === null || _props$formData2 === void 0 ? void 0 : _props$formData2.footnoteTitle, (_props$formData3 = props.formData) === null || _props$formData3 === void 0 ? void 0 : _props$formData3.zoteroId]);\n  var deleteItem = function deleteItem(index) {\n    var formDataAfterDelete = null;\n    if (index > -1 && updatedFormData.extra) {\n      formDataAfterDelete = _objectSpread(_objectSpread({}, updatedFormData), {}, {\n        extra: [].concat(_toConsumableArray(updatedFormData.extra.slice(0, index)), _toConsumableArray(updatedFormData.extra.slice(index + 1)))\n      });\n    } else if (index === -1 && (!updatedFormData.extra || updatedFormData.extra.length === 0)) {\n      formDataAfterDelete = {\n        uid: updatedFormData.uid\n      };\n    } else if (index === -1 && updatedFormData.extra && updatedFormData.extra.length > 0) {\n      var firstExtraCitation = updatedFormData.extra.slice(0, 1)[0];\n      var footnote = firstExtraCitation.footnote,\n        footnoteTitle = firstExtraCitation.footnoteTitle,\n        zoteroId = firstExtraCitation.zoteroId;\n      formDataAfterDelete = _objectSpread(_objectSpread(_objectSpread({}, updatedFormData), {\n        footnote: footnote,\n        footnoteTitle: footnoteTitle,\n        zoteroId: zoteroId\n      }), {}, {\n        extra: _toConsumableArray(updatedFormData.extra.slice(1))\n      });\n    }\n    setUpdatedFormData(formDataAfterDelete);\n  };\n  var loadMoreButton = __jsx(Button, {\n    primary: true,\n    loading: loadingMore,\n    onClick: handleLoadMore,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 569,\n      columnNumber: 5\n    }\n  }, \"Load more\");\n  return __jsx(\"div\", {\n    id: \"zotero-comp\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 575,\n      columnNumber: 5\n    }\n  }, __jsx(InlineForm, {\n    schema: props.schema,\n    title: props.title,\n    icon: __jsx(VoltoIcon, {\n      size: \"24px\",\n      name: briefcaseSVG,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 579,\n        columnNumber: 15\n      }\n    }),\n    updatedFormData: updatedFormData,\n    deleteItem: deleteItem,\n    headerActions: __jsx(React.Fragment, null, __jsx(\"button\", {\n      onClick: function onClick(id, value) {\n        props.submitHandler(updatedFormData);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 584,\n        columnNumber: 13\n      }\n    }, !citationLoading ? __jsx(VoltoIcon, {\n      size: \"24px\",\n      name: checkSVG,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 590,\n        columnNumber: 17\n      }\n    }) : __jsx(Loader, {\n      active: true,\n      inline: true,\n      size: \"small\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 592,\n        columnNumber: 17\n      }\n    })), __jsx(\"button\", {\n      onClick: props.clearHandler,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 595,\n        columnNumber: 13\n      }\n    }, __jsx(VoltoIcon, {\n      size: \"24px\",\n      name: clearSVG,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 596,\n        columnNumber: 15\n      }\n    }))),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 576,\n      columnNumber: 7\n    }\n  }), __jsx(MasterDetailWidget, {\n    pull: pull,\n    pushCollection: pushCollection,\n    pushItem: pushItem,\n    items: composedItems,\n    collections: collections,\n    loading: loading,\n    selectedCollection: selectedCollection,\n    onChangeSearchTerm: onChangeSearchTerm,\n    showSearchResults: showSearchResults,\n    allSearchResults: allSearchResults,\n    zoteroSearchResults: zoteroSearchResults,\n    openAireSearchResults: openAireSearchResults,\n    pushSearchItem: pushSearchItem,\n    showCollections: showCollections,\n    setActiveTabIndex: setActiveTabIndex,\n    openAireCallback: openAireCallback,\n    zoteroSearchItemsTotalResultsNumber: zoteroSearchItemsTotalResultsNumber,\n    openAireTotalResultsNumber: openAireTotalResultsNumber,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 601,\n      columnNumber: 7\n    }\n  }), showSearchResults ? allSearchResults.length < openAireTotalResultsNumber ? loadMoreButton : null : topCollectionFlag ? zoteroCollectionsTotalResultsNumber > collections.length ? loadMoreButton : null : zoteroCollectionsTotalResultsNumber + zoteroItemsTotalResultsNumber > composedItems.length ? loadMoreButton : null);\n};\n_s(ZoteroDataWrapper, \"7vThyHMrWSsESuf2dDJYJu+EY2M=\", false, function () {\n  return [useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useDispatch];\n});\n_c = ZoteroDataWrapper;\nexport default ZoteroDataWrapper;\nvar _c;\n$RefreshReg$(_c, \"ZoteroDataWrapper\");","map":{"version":3,"names":["Icon","VoltoIcon","briefcaseSVG","checkSVG","clearSVG","React","useEffect","useState","useDispatch","useSelector","toast","Button","Loader","fetchOpenairePubSearchItems","fetchOpenaireRsdSearchItems","fetchZoteroCollections","fetchZoteroItemCitation","fetchZoteroItems","fetchZoteroSearchItems","fetchZoteroSubCollections","getZoteroSettings","saveItemToZotero","InlineForm","MasterDetailWidget","findDOI","formatCitation","formatOpenAire","makeOpenAireUrlObj","ZoteroDataWrapper","props","selectedCollection","setSelectedCollection","selectedItem","setSelectedItem","showSearchResults","setShowSearchResults","hasMultipleDOIs","setHasMultipleDOIs","collections","setCollections","topCollections","setTopCollections","items","setItems","composedItems","setComposedItems","allSearchResults","setAllSearchResults","zoteroSearchResults","setZoteroSearchResults","openAireSearchResults","setOpenAireSearchResults","loading","setLoading","citationLoading","setCitationLoading","loadingMore","setLoadingMore","topCollectionFlag","setTopCollectionFlag","searchTerm","setSearchTerm","formData","updatedFormData","setUpdatedFormData","zoteroSearchItemsTotalResultsNumber","setZoteroSearchItemsTotalResultsNumber","openAireTotalResultsNumber","setOpenAireTotalResultsNumber","openAirePubTotalResultsNumber","setOpenAirePubTotalResultsNumber","openAireRsdTotalResultsNumber","setOpenAireRsdTotalResultsNumber","zoteroItemsTotalResultsNumber","setZoteroItemsTotalResultsNumber","zoteroCollectionsTotalResultsNumber","setZoteroCollectionsTotalResultsNumber","zoteroTopCollectionsTotalResultsNumber","setZoteroTopCollectionsTotalResultsNumber","zoteroItemsOffset","setZoteroItemsOffset","zoteroSearchItemsOffset","setZoteroSearchItemsOffset","zoteroCollectionsOffset","setZoteroCollectionsOffset","openAirePublicationResults","setOpenAirePublicationResults","openAireDataResults","setOpenAireDataResults","zotero_settings","state","api","zotero_search_items","zotero_collections","zotero_sub_collections","zotero_items","zotero_item_citation","zotero_item_saved","openaire_items_pub","openaire_items_rsd","activeTabIndexS","setActiveTabIndexS","openAirePage","setOpenAirePage","dispatch","setActiveTabIndex","index","headers","Authorization","password","zoteroBaseUrl","server","zoteroCollectionsTopUrl","zoteroCollectionsUrl","zoteroSearchUrl","fetchCollections","offset","finalUrl","fetchItems","collectionId","fetchSubCollections","fetchZoteroSearch","term","fetchAireSearch","filters","objectTypeUrl","searchForDoi","length","forEach","doi","finalPubUrl","finalRsdUrl","finalTitlePubUrl","finalAuthorPubUrl","finalTitleRsdUrl","finalAuthorRsdUrl","fetchItemCitation","zoteroId","style","handleSaveItemToZotero","itemToSave","body","JSON","stringify","data","handleLoadMore","onChangeSearchTerm","pull","pushCollection","selectedCollectionIndex","selectedCol","meta","numCollections","key","showCollections","pushItem","receivedItem","pushSearchItem","isOpenAire","openAireCallback","filterList","aireLiteral","publications","rsd","aireResults","reduce","accumulator","currentValue","mergedResult","results","totalResults","formattedResults","map","item","formattedItem","citationTitle","footnote","result","extra","footnoteTitle","itemId","success","zotero","error","finalResult","zoteroResults","publicationRestuls","uniquePublicationRestuls","filter","find","zoteroResult","DOI","rsdRestuls","uniqueRsdRestuls","deleteItem","formDataAfterDelete","slice","uid","firstExtraCitation","loadMoreButton","schema","title","id","value","submitHandler","clearHandler"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-slate-zotero/src/plugins/zotero/editor/ZoteroDataWrapper.jsx"],"sourcesContent":["import { Icon as VoltoIcon } from '@plone/volto/components';\nimport briefcaseSVG from '@plone/volto/icons/briefcase.svg';\nimport checkSVG from '@plone/volto/icons/check.svg';\nimport clearSVG from '@plone/volto/icons/clear.svg';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { toast } from 'react-toastify';\nimport { Button, Loader } from 'semantic-ui-react';\nimport {\n  fetchOpenairePubSearchItems,\n  fetchOpenaireRsdSearchItems,\n  fetchZoteroCollections,\n  fetchZoteroItemCitation,\n  fetchZoteroItems,\n  fetchZoteroSearchItems,\n  fetchZoteroSubCollections,\n  getZoteroSettings,\n  saveItemToZotero,\n} from './actions';\nimport InlineForm from './InlineForm';\nimport MasterDetailWidget from './MasterDetailWidget';\nimport {\n  findDOI,\n  formatCitation,\n  formatOpenAire,\n  makeOpenAireUrlObj,\n} from './utils';\n\nconst ZoteroDataWrapper = (props) => {\n  const [selectedCollection, setSelectedCollection] = useState(null);\n  const [selectedItem, setSelectedItem] = useState(null);\n  const [showSearchResults, setShowSearchResults] = useState(false);\n  const [hasMultipleDOIs, setHasMultipleDOIs] = useState(false);\n  const [collections, setCollections] = useState([]);\n  const [topCollections, setTopCollections] = useState([]);\n  const [items, setItems] = useState([]);\n  const [composedItems, setComposedItems] = useState([]);\n  const [allSearchResults, setAllSearchResults] = useState([]);\n  const [zoteroSearchResults, setZoteroSearchResults] = useState([]);\n  const [openAireSearchResults, setOpenAireSearchResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [citationLoading, setCitationLoading] = useState(false);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [topCollectionFlag, setTopCollectionFlag] = useState(false);\n  const [searchTerm, setSearchTerm] = useState(null);\n  const [updatedFormData, setUpdatedFormData] = useState(props.formData); // eslint-disable-line\n  const [\n    zoteroSearchItemsTotalResultsNumber,\n    setZoteroSearchItemsTotalResultsNumber,\n  ] = useState(0);\n  const [openAireTotalResultsNumber, setOpenAireTotalResultsNumber] = useState(\n    0,\n  );\n  const [\n    openAirePubTotalResultsNumber,\n    setOpenAirePubTotalResultsNumber,\n  ] = useState(0);\n  const [\n    openAireRsdTotalResultsNumber,\n    setOpenAireRsdTotalResultsNumber,\n  ] = useState(0);\n  const [\n    zoteroItemsTotalResultsNumber,\n    setZoteroItemsTotalResultsNumber,\n  ] = useState(0);\n  const [\n    zoteroCollectionsTotalResultsNumber,\n    setZoteroCollectionsTotalResultsNumber,\n  ] = useState(0);\n  const [\n    zoteroTopCollectionsTotalResultsNumber,\n    setZoteroTopCollectionsTotalResultsNumber,\n  ] = useState(0);\n  const [zoteroItemsOffset, setZoteroItemsOffset] = useState(0);\n  const [zoteroSearchItemsOffset, setZoteroSearchItemsOffset] = useState(0);\n  const [zoteroCollectionsOffset, setZoteroCollectionsOffset] = useState(0);\n  const [openAirePublicationResults, setOpenAirePublicationResults] = useState(\n    [],\n  );\n  const [openAireDataResults, setOpenAireDataResults] = useState([]);\n  const zotero_settings = useSelector((state) => state?.zotero_settings?.api);\n  const zotero_search_items = useSelector(\n    (state) => state?.zotero_search_items?.api,\n  );\n  const zotero_collections = useSelector(\n    (state) => state?.zotero_collections?.api,\n  );\n  const zotero_sub_collections = useSelector(\n    (state) => state?.zotero_sub_collections?.api,\n  );\n  const zotero_items = useSelector((state) => state?.zotero_items?.api);\n  const zotero_item_citation = useSelector(\n    (state) => state?.zotero_item_citation?.api,\n  );\n  const zotero_item_saved = useSelector((state) => state?.zotero_item_saved);\n  const openaire_items_pub = useSelector((state) => state?.openaire_items_pub);\n  const openaire_items_rsd = useSelector((state) => state?.openaire_items_rsd);\n  const [activeTabIndexS, setActiveTabIndexS] = useState(0);\n  const [openAirePage, setOpenAirePage] = useState(1);\n  const dispatch = useDispatch();\n  const setActiveTabIndex = (index) => {\n    setActiveTabIndexS(index);\n  };\n\n  const headers = {\n    Authorization: 'Bearer ' + zotero_settings?.password,\n    'Content-Type': 'application/json',\n  };\n  const zoteroBaseUrl = zotero_settings?.server;\n  const zoteroCollectionsTopUrl = `${zoteroBaseUrl}/collections/top/`;\n  const zoteroCollectionsUrl = `${zoteroBaseUrl}/collections/`;\n  const zoteroSearchUrl = `${zoteroBaseUrl}/items?q=`;\n\n  const fetchCollections = (offset = 0) => {\n    const finalUrl = `${zoteroCollectionsTopUrl}?start=${offset}&limit=10&sort=title`;\n\n    setTopCollectionFlag(true);\n    dispatch(fetchZoteroCollections(finalUrl, headers));\n  };\n\n  const fetchItems = (collectionId, offset = 0) => {\n    const finalUrl = `${zoteroCollectionsUrl}${collectionId}/items/?start=${offset}&limit=10&sort=title`;\n\n    dispatch(fetchZoteroItems(finalUrl, headers));\n  };\n\n  const fetchSubCollections = (collectionId, offset = 0) => {\n    const finalUrl = `${zoteroCollectionsUrl}${collectionId}/collections/?start=${offset}&limit=10&sort=title`;\n\n    dispatch(fetchZoteroSubCollections(finalUrl, headers));\n  };\n\n  const fetchZoteroSearch = (term, offset = 0) => {\n    const finalUrl = `${zoteroSearchUrl}${term}&limit=10&start=${offset}&sort=title`;\n\n    setShowSearchResults(true);\n    setZoteroSearchItemsOffset(offset);\n    dispatch(fetchZoteroSearchItems(finalUrl, headers));\n  };\n\n  const fetchAireSearch = (term = searchTerm) => {\n    setShowSearchResults(true);\n\n    const filters = ['publications', 'rsd'];\n    const objectTypeUrl = makeOpenAireUrlObj(filters);\n    const searchForDoi = findDOI(term);\n\n    if (searchForDoi.length > 0) {\n      searchForDoi.forEach((doi) => {\n        setHasMultipleDOIs(true);\n        const finalPubUrl = `${objectTypeUrl[0]}/?doi=${doi}&format=json`;\n        const finalRsdUrl = `${objectTypeUrl[1]}/?doi=${doi}&format=json`;\n\n        dispatch(fetchOpenairePubSearchItems([finalPubUrl]));\n        dispatch(fetchOpenaireRsdSearchItems([finalRsdUrl]));\n      });\n    } else {\n      const finalTitlePubUrl = `${objectTypeUrl[0]}/?title=${term}&format=json&size=20&page=${openAirePage}`;\n      const finalAuthorPubUrl = `${objectTypeUrl[0]}/?author=${term}&format=json&size=20&page=${openAirePage}`;\n      const finalTitleRsdUrl = `${objectTypeUrl[1]}/?title=${term}&format=json&size=20&page=${openAirePage}`;\n      const finalAuthorRsdUrl = `${objectTypeUrl[1]}/?author=${term}&format=json&size=20&page=${openAirePage}`;\n\n      dispatch(\n        fetchOpenairePubSearchItems([finalTitlePubUrl, finalAuthorPubUrl]),\n      );\n      dispatch(\n        fetchOpenaireRsdSearchItems([finalTitleRsdUrl, finalAuthorRsdUrl]),\n      );\n    }\n  };\n\n  const fetchItemCitation = (zoteroId) => {\n    const finalUrl = `${zoteroBaseUrl}/items/${zoteroId}?format=bib&style=${zotero_settings?.style}`;\n\n    dispatch(fetchZoteroItemCitation(finalUrl, headers));\n  };\n\n  const handleSaveItemToZotero = (itemToSave) => {\n    const finalUrl = `${zoteroBaseUrl}/items/`;\n    const body = JSON.stringify([itemToSave.data]);\n\n    dispatch(saveItemToZotero(finalUrl, headers, body));\n  };\n\n  const handleLoadMore = () => {\n    // load search rezults\n    setLoadingMore(true);\n    setHasMultipleDOIs(false);\n    if (showSearchResults) {\n      switch (activeTabIndexS) {\n        case 0:\n          setOpenAirePage(openAirePage + 1);\n          fetchZoteroSearch(searchTerm, zoteroSearchResults.length);\n          fetchAireSearch(searchTerm);\n          break;\n        case 1:\n          fetchZoteroSearch(searchTerm, zoteroSearchResults.length);\n          break;\n        case 2:\n          setOpenAirePage(openAirePage + 1);\n          fetchAireSearch(searchTerm);\n          break;\n        default:\n          break;\n      }\n    }\n    // load more collections and items\n    else {\n      setZoteroCollectionsOffset(collections.length);\n      setZoteroItemsOffset(items.length);\n\n      if (topCollectionFlag) {\n        // load more top collections\n        fetchCollections(collections.length);\n      } else {\n        // load more sub-collections and items\n        fetchSubCollections(selectedCollection, collections.length);\n        fetchItems(selectedCollection, items.length);\n      }\n    }\n  };\n\n  const onChangeSearchTerm = (searchTerm) => {\n    setLoading(true);\n    setSearchTerm(searchTerm);\n    setZoteroSearchItemsOffset(0);\n    setOpenAirePage(1);\n    setHasMultipleDOIs(false);\n\n    fetchZoteroSearch(searchTerm);\n    fetchAireSearch(searchTerm);\n  };\n\n  const pull = () => {\n    setSelectedCollection(null);\n    setTopCollectionFlag(true);\n    setCollections(topCollections);\n    setZoteroCollectionsTotalResultsNumber(\n      zoteroTopCollectionsTotalResultsNumber,\n    );\n  };\n\n  const pushCollection = (selectedCollectionIndex) => {\n    const selectedCol = collections[selectedCollectionIndex];\n\n    setLoading(true);\n    setZoteroSearchItemsOffset(0);\n    setZoteroItemsOffset(0);\n    setCollections([]);\n    setZoteroCollectionsTotalResultsNumber(0);\n    setTopCollectionFlag(false);\n\n    if (selectedCol.meta.numCollections > 0) {\n      fetchSubCollections(selectedCol.key);\n    }\n\n    fetchItems(selectedCol.key);\n    setSelectedCollection(selectedCol.key);\n  };\n\n  const showCollections = () => {\n    setActiveTabIndexS(-1);\n    setShowSearchResults(false);\n    pull();\n  };\n\n  const pushItem = (receivedItem) => {\n    setCitationLoading(true);\n    fetchItemCitation(receivedItem.key);\n    setSelectedItem(receivedItem);\n  };\n\n  const pushSearchItem = (receivedItem) => {\n    setCitationLoading(true);\n    setSelectedItem(receivedItem);\n    if (!receivedItem.isOpenAire) {\n      fetchItemCitation(receivedItem.key);\n    } else {\n      handleSaveItemToZotero(receivedItem);\n    }\n  };\n\n  /**\n   * Will search for openAire based on received filters\n   * @param {string[]} item\n   */\n  const openAireCallback = (filterList) => {\n    const aireLiteral = {\n      publications: openAirePublicationResults,\n      rsd: openAireDataResults,\n    };\n    const aireResults = filterList.reduce((accumulator, currentValue) => {\n      return [...accumulator, ...aireLiteral[currentValue]];\n    }, []);\n\n    setAllSearchResults([...zoteroSearchResults, ...aireResults]);\n    setOpenAireSearchResults(aireResults);\n  };\n\n  // Similar to componentDidMount and componentDidUpdate:\n  // used only once at mount\n  useEffect(() => {\n    dispatch(getZoteroSettings());\n    // to be used only once at mount\n  }, []); // eslint-disable-line\n\n  useEffect(() => {\n    if (zotero_settings) {\n      setLoading(true);\n      fetchCollections();\n    }\n  }, [zotero_settings]); // eslint-disable-line\n\n  useEffect(() => {\n    if (zotero_collections) {\n      let mergedResult =\n        zoteroCollectionsOffset > 0\n          ? [...collections, ...zotero_collections.results]\n          : zotero_collections.results;\n\n      setCollections(mergedResult);\n\n      if (topCollectionFlag) setTopCollections(mergedResult);\n\n      setZoteroCollectionsTotalResultsNumber(zotero_collections.totalResults);\n      setZoteroTopCollectionsTotalResultsNumber(\n        zotero_collections.totalResults,\n      );\n      setLoading(false);\n      setLoadingMore(false);\n    }\n  }, [zotero_collections]); // eslint-disable-line\n\n  useEffect(() => {\n    if (zotero_sub_collections) {\n      let mergedResult =\n        zoteroCollectionsOffset > 0\n          ? [...collections, ...zotero_sub_collections.results]\n          : zotero_sub_collections.results;\n      const formattedResults = mergedResult.map((item) => {\n        const formattedItem = { ...item };\n        formattedItem.citationTitle = formatCitation(item);\n\n        return formattedItem;\n      });\n\n      setCollections(formattedResults);\n      setZoteroCollectionsTotalResultsNumber(\n        zotero_sub_collections.totalResults,\n      );\n      setComposedItems([...formattedResults, ...items]);\n      setLoading(false);\n      setLoadingMore(false);\n    }\n  }, [zotero_sub_collections]); // eslint-disable-line\n\n  useEffect(() => {\n    if (zotero_items) {\n      let mergedResult =\n        zoteroItemsOffset > 0\n          ? [...items, ...zotero_items.results]\n          : zotero_items.results;\n      const formattedResults = mergedResult.map((item) => {\n        const formattedItem = { ...item };\n        formattedItem.citationTitle = formatCitation(item);\n\n        return formattedItem;\n      });\n\n      setItems(formattedResults);\n      setZoteroItemsTotalResultsNumber(zotero_items.totalResults);\n      setComposedItems([...collections, ...formattedResults]);\n      setLoading(false);\n      setLoadingMore(false);\n    }\n  }, [zotero_items]); // eslint-disable-line\n\n  useEffect(() => {\n    if (zotero_item_citation && selectedItem) {\n      setLoading(false);\n      setLoadingMore(false);\n      setCitationLoading(false);\n      const footnote = zotero_item_citation.result;\n\n      setUpdatedFormData(\n        updatedFormData.footnote\n          ? {\n              ...updatedFormData,\n              extra: [\n                ...(updatedFormData.extra || []),\n                {\n                  footnote,\n                  zoteroId: selectedItem.key,\n                  footnoteTitle: formatCitation(selectedItem),\n                },\n              ],\n            }\n          : {\n              ...updatedFormData,\n              ...{\n                footnote,\n                zoteroId: selectedItem.key,\n                footnoteTitle: formatCitation(selectedItem),\n              },\n            },\n      );\n    }\n  }, [zotero_item_citation]); // eslint-disable-line\n\n  useEffect(() => {\n    if (zotero_item_saved.api) {\n      const itemId = zotero_item_saved.api.success[0];\n      toast.success('Successfully added to Zotero Library');\n\n      setLoading(false);\n      fetchItemCitation(itemId);\n    }\n    if (zotero_item_saved?.zotero?.error) {\n      setLoading(false);\n      setLoadingMore(false);\n    }\n  }, [zotero_item_saved]); // eslint-disable-line\n\n  useEffect(() => {\n    if (zotero_search_items) {\n      const finalResult =\n        zoteroSearchItemsOffset > 0\n          ? [...zoteroSearchResults, ...zotero_search_items.results]\n          : zotero_search_items.results;\n\n      const zoteroResults = finalResult.map((item) => {\n        const formattedItem = { ...item };\n        formattedItem.citationTitle = formatCitation(item);\n\n        return formattedItem;\n      });\n\n      setZoteroSearchItemsTotalResultsNumber(zotero_search_items.totalResults);\n      setZoteroSearchResults(zoteroResults);\n      setAllSearchResults([\n        ...zoteroResults,\n        ...openAirePublicationResults,\n        ...openAireDataResults,\n      ]);\n      setLoading(false);\n      setLoadingMore(false);\n    }\n  }, [zotero_search_items]); // eslint-disable-line\n\n  useEffect(() => {\n    if (openaire_items_pub.api) {\n      const formattedResults = openaire_items_pub.api.map((item) =>\n        formatOpenAire(item, 'publications', zotero_settings?.default),\n      );\n      const publicationRestuls =\n        openAirePage > 1\n          ? [...openAirePublicationResults, ...formattedResults]\n          : hasMultipleDOIs\n          ? [...openAirePublicationResults, ...formattedResults]\n          : formattedResults;\n\n      const uniquePublicationRestuls = publicationRestuls.filter((result) => {\n        return !zoteroSearchResults.find(\n          (zoteroResult) => zoteroResult.data.DOI === result.data.DOI,\n        );\n      });\n\n      setOpenAirePubTotalResultsNumber(openaire_items_pub.totalResults);\n      setOpenAireTotalResultsNumber(\n        openaire_items_pub.totalResults + openAireRsdTotalResultsNumber,\n      );\n      setOpenAirePublicationResults(uniquePublicationRestuls);\n      setOpenAireSearchResults([\n        ...uniquePublicationRestuls,\n        ...openAireDataResults,\n      ]);\n      setAllSearchResults([\n        ...zoteroSearchResults,\n        ...uniquePublicationRestuls,\n        ...openAireDataResults,\n      ]);\n      setLoading(false);\n      setLoadingMore(false);\n    }\n  }, [openaire_items_pub]); // eslint-disable-line\n\n  useEffect(() => {\n    if (openaire_items_rsd.api) {\n      const formattedResults = openaire_items_rsd.api.map((item) =>\n        formatOpenAire(item, 'rsd', zotero_settings?.default),\n      );\n      const rsdRestuls =\n        openAirePage > 1\n          ? [...openAireDataResults, ...formattedResults]\n          : hasMultipleDOIs\n          ? [...openAireDataResults, ...formattedResults]\n          : formattedResults;\n      const uniqueRsdRestuls = rsdRestuls.filter((result) => {\n        return !zoteroSearchResults.find(\n          (zoteroResult) => zoteroResult.data.DOI === result.data.DOI,\n        );\n      });\n\n      setOpenAireRsdTotalResultsNumber(openaire_items_rsd.totalResults);\n      setOpenAireTotalResultsNumber(\n        openaire_items_rsd.totalResults + openAirePubTotalResultsNumber,\n      );\n      setOpenAireDataResults(uniqueRsdRestuls);\n      setOpenAireSearchResults([\n        ...openAirePublicationResults,\n        ...uniqueRsdRestuls,\n      ]);\n      setAllSearchResults([\n        ...zoteroSearchResults,\n        ...openAirePublicationResults,\n        ...uniqueRsdRestuls,\n      ]);\n      setLoading(false);\n      setLoadingMore(false);\n    }\n  }, [openaire_items_rsd]); // eslint-disable-line\n\n  useEffect(() => {\n    setUpdatedFormData({\n      ...props.formData,\n    });\n    /* eslint-disable */\n  }, [\n    props.formData,\n    props.formData?.footnote,\n    props.formData?.footnoteTitle,\n    props.formData?.zoteroId,\n  ]);\n\n  const deleteItem = (index) => {\n    let formDataAfterDelete = null;\n\n    if (index > -1 && updatedFormData.extra) {\n      formDataAfterDelete = {\n        ...updatedFormData,\n        extra: [\n          ...updatedFormData.extra.slice(0, index),\n          ...updatedFormData.extra.slice(index + 1),\n        ],\n      };\n    } else if (\n      index === -1 &&\n      (!updatedFormData.extra || updatedFormData.extra.length === 0)\n    ) {\n      formDataAfterDelete = { uid: updatedFormData.uid };\n    } else if (\n      index === -1 &&\n      updatedFormData.extra &&\n      updatedFormData.extra.length > 0\n    ) {\n      const firstExtraCitation = updatedFormData.extra.slice(0, 1)[0];\n      const { footnote, footnoteTitle, zoteroId } = firstExtraCitation;\n\n      formDataAfterDelete = {\n        ...updatedFormData,\n        ...{ footnote, footnoteTitle, zoteroId },\n        extra: [...updatedFormData.extra.slice(1)],\n      };\n    }\n    setUpdatedFormData(formDataAfterDelete);\n  };\n\n  const loadMoreButton = (\n    <Button primary loading={loadingMore} onClick={handleLoadMore}>\n      Load more\n    </Button>\n  );\n\n  return (\n    <div id=\"zotero-comp\">\n      <InlineForm\n        schema={props.schema}\n        title={props.title}\n        icon={<VoltoIcon size=\"24px\" name={briefcaseSVG} />}\n        updatedFormData={updatedFormData}\n        deleteItem={deleteItem}\n        headerActions={\n          <>\n            <button\n              onClick={(id, value) => {\n                props.submitHandler(updatedFormData);\n              }}\n            >\n              {!citationLoading ? (\n                <VoltoIcon size=\"24px\" name={checkSVG} />\n              ) : (\n                <Loader active inline size=\"small\" />\n              )}\n            </button>\n            <button onClick={props.clearHandler}>\n              <VoltoIcon size=\"24px\" name={clearSVG} />\n            </button>\n          </>\n        }\n      />\n      <MasterDetailWidget\n        pull={pull}\n        pushCollection={pushCollection}\n        pushItem={pushItem}\n        items={composedItems}\n        collections={collections}\n        loading={loading}\n        selectedCollection={selectedCollection}\n        onChangeSearchTerm={onChangeSearchTerm}\n        showSearchResults={showSearchResults}\n        allSearchResults={allSearchResults}\n        zoteroSearchResults={zoteroSearchResults}\n        openAireSearchResults={openAireSearchResults}\n        pushSearchItem={pushSearchItem}\n        showCollections={showCollections}\n        setActiveTabIndex={setActiveTabIndex}\n        openAireCallback={openAireCallback}\n        zoteroSearchItemsTotalResultsNumber={\n          zoteroSearchItemsTotalResultsNumber\n        }\n        openAireTotalResultsNumber={openAireTotalResultsNumber}\n      ></MasterDetailWidget>\n      {showSearchResults\n        ? allSearchResults.length < openAireTotalResultsNumber\n          ? loadMoreButton\n          : null\n        : topCollectionFlag\n        ? zoteroCollectionsTotalResultsNumber > collections.length\n          ? loadMoreButton\n          : null\n        : zoteroCollectionsTotalResultsNumber + zoteroItemsTotalResultsNumber >\n          composedItems.length\n        ? loadMoreButton\n        : null}\n    </div>\n  );\n};\n\nexport default ZoteroDataWrapper;\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}