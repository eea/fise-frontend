{"ast":null,"code":"import _slicedToArray from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _extends from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/extends.js\";\nimport _isNil from \"lodash/isNil\";\nvar _jsxFileName = \"/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-datablocks/src/Utils/DataConnectedValue/DataConnectedValue.jsx\",\n  _this = this,\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { compose } from 'redux';\nimport { connectToProviderData } from '@eeacms/volto-datablocks/hocs';\nimport { FormattedValue } from '../';\nimport './styles.css';\nvar EMPTY = '-';\nvar Placeholder = function Placeholder(props) {\n  _s();\n  var placeholder = props.placeholder.trim();\n  var isComponent = React.useMemo(function () {\n    return typeof props.placeholder === 'function';\n  }, [props.placeholder]);\n  var PlaceholderElement = placeholder || EMPTY;\n  return isComponent ? __jsx(PlaceholderElement, _extends({}, props, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 24\n    }\n  })) : PlaceholderElement;\n};\n_s(Placeholder, \"wsRNFZMeG2ZRJcphdXyBUK7QZXw=\");\n_c = Placeholder;\nvar getRow = function getRow() {\n  var row = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  if (typeof row === 'string' && row.includes('row-')) {\n    return (row.split('row-')[1] || 1) - 1;\n  }\n  return row;\n};\nvar getValue = function getValue(provider_data, column, row) {\n  var _provider_data$column;\n  if (!column) return 'Select a column';\n  return provider_data === null || provider_data === void 0 ? void 0 : (_provider_data$column = provider_data[column]) === null || _provider_data$column === void 0 ? void 0 : _provider_data$column[getRow(row)];\n};\nvar DataConnectedValue = function DataConnectedValue(props) {\n  _s2();\n  var _React$useState = React.useState(true),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    collapsed = _React$useState2[0],\n    setCollapsed = _React$useState2[1];\n  var _props$collapseLimit = props.collapseLimit,\n    collapseLimit = _props$collapseLimit === void 0 ? null : _props$collapseLimit,\n    column = props.column,\n    _props$provider_data = props.provider_data,\n    provider_data = _props$provider_data === void 0 ? {} : _props$provider_data,\n    _props$row = props.row,\n    row = _props$row === void 0 ? 0 : _props$row,\n    specifier = props.specifier,\n    textTemplate = props.textTemplate,\n    animatedCounter = props.animatedCounter;\n  var value = React.useMemo(function () {\n    return getValue(provider_data, column, row);\n  }, [provider_data, column, row]);\n  var collapsable = props.collapsable && (value === null || value === void 0 ? void 0 : value.length) > collapseLimit;\n  return !_isNil(value) ? __jsx(React.Fragment, null, __jsx(FormattedValue, {\n    textTemplate: textTemplate,\n    value: value,\n    animatedCounter: animatedCounter,\n    specifier: specifier,\n    collapsed: collapsable && collapsed,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }), collapsable && __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, __jsx(\"button\", {\n    className: \"readmore-button\",\n    onClick: function onClick() {\n      setCollapsed(!collapsed);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, collapsed ? 'READ MORE' : 'COLLAPSE'))) : __jsx(Placeholder, _extends({}, props, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }));\n};\n_s2(DataConnectedValue, \"1qGZqXN7es1uZJBA2eS6ApL1FVs=\");\n_c2 = DataConnectedValue;\nexport default compose(connectToProviderData(function (props) {\n  return {\n    provider_url: props.url\n  };\n}))(DataConnectedValue);\nvar _c, _c2;\n$RefreshReg$(_c, \"Placeholder\");\n$RefreshReg$(_c2, \"DataConnectedValue\");","map":{"version":3,"names":["React","compose","connectToProviderData","FormattedValue","EMPTY","Placeholder","props","placeholder","trim","isComponent","useMemo","PlaceholderElement","getRow","row","includes","split","getValue","provider_data","column","DataConnectedValue","useState","collapsed","setCollapsed","collapseLimit","specifier","textTemplate","animatedCounter","value","collapsable","length","provider_url","url"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-datablocks/src/Utils/DataConnectedValue/DataConnectedValue.jsx"],"sourcesContent":["import React from 'react';\nimport { compose } from 'redux';\nimport { isNil } from 'lodash';\nimport { connectToProviderData } from '@eeacms/volto-datablocks/hocs';\n\nimport { FormattedValue } from '../';\nimport './styles.css';\n\nconst EMPTY = '-';\n\nconst Placeholder = (props) => {\n  const placeholder = props.placeholder.trim();\n  const isComponent = React.useMemo(\n    () => typeof props.placeholder === 'function',\n    [props.placeholder],\n  );\n\n  const PlaceholderElement = placeholder || EMPTY;\n\n  return isComponent ? <PlaceholderElement {...props} /> : PlaceholderElement;\n};\n\nconst getRow = (row = 0) => {\n  if (typeof row === 'string' && row.includes('row-')) {\n    return (row.split('row-')[1] || 1) - 1;\n  }\n  return row;\n};\n\nconst getValue = (provider_data, column, row) => {\n  if (!column) return 'Select a column';\n  return provider_data?.[column]?.[getRow(row)];\n};\n\nconst DataConnectedValue = (props) => {\n  const [collapsed, setCollapsed] = React.useState(true);\n  const {\n    collapseLimit = null,\n    column,\n    provider_data = {},\n    row = 0,\n    specifier,\n    textTemplate,\n    animatedCounter,\n  } = props;\n\n  const value = React.useMemo(() => getValue(provider_data, column, row), [\n    provider_data,\n    column,\n    row,\n  ]);\n\n  const collapsable = props.collapsable && value?.length > collapseLimit;\n\n  return !isNil(value) ? (\n    <>\n      <FormattedValue\n        textTemplate={textTemplate}\n        value={value}\n        animatedCounter={animatedCounter}\n        specifier={specifier}\n        collapsed={collapsable && collapsed}\n      />\n      {collapsable && (\n        <div>\n          <button\n            className=\"readmore-button\"\n            onClick={() => {\n              setCollapsed(!collapsed);\n            }}\n          >\n            {collapsed ? 'READ MORE' : 'COLLAPSE'}\n          </button>\n        </div>\n      )}\n    </>\n  ) : (\n    <Placeholder {...props} />\n  );\n};\n\nexport default compose(\n  connectToProviderData((props) => ({\n    provider_url: props.url,\n  })),\n)(DataConnectedValue);\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}