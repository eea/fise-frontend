{"ast":null,"code":"import _extends from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/extends.js\";\nimport _defineProperty from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectSpread from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _isEmpty from \"lodash/isEmpty\";\nvar _jsxFileName = \"/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-block-style/src/hocs/withCachedImages.jsx\";\nvar __jsx = React.createElement;\nimport React from 'react';\nexport default function withCachedImages(WrappedComponent) {\n  var _this = this,\n    _s = $RefreshSig$();\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return _s(function (props) {\n    var _config$getImage;\n    _s();\n    var mounted = React.useRef(false);\n    var _React$useState = React.useState({}),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      images = _React$useState2[0],\n      setImages = _React$useState2[1];\n    var image = _isEmpty((_config$getImage = config.getImage) === null || _config$getImage === void 0 ? void 0 : _config$getImage.call(config, props)) ? null : config.getImage(props);\n    React.useEffect(function () {\n      if (!mounted.current) mounted.current = true;\n      if (image && !images[image]) {\n        var newImage = new Image();\n        newImage.src = \"\".concat(image, \"/@@images/image\");\n        setImages(_objectSpread(_objectSpread({}, images), {}, _defineProperty({}, image, null)));\n        newImage.onload = function () {\n          if (mounted.current) {\n            setImages(_objectSpread(_objectSpread({}, images), {}, _defineProperty({}, image, newImage)));\n          }\n        };\n      }\n      return function () {\n        mounted.current = false;\n      };\n      /* eslint-disable-next-line */\n    }, [image]);\n    return __jsx(WrappedComponent, _extends({}, props, {\n      images: images,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 12\n      }\n    }));\n  }, \"ZPOJDbpLthuwel0J0x2k3FfTTwk=\");\n}","map":{"version":3,"names":["React","withCachedImages","WrappedComponent","config","props","mounted","useRef","useState","images","setImages","image","getImage","useEffect","current","newImage","Image","src","onload"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-block-style/src/hocs/withCachedImages.jsx"],"sourcesContent":["import React from 'react';\nimport { isEmpty } from 'lodash';\n\nexport default function withCachedImages(WrappedComponent, config = {}) {\n  return (props) => {\n    const mounted = React.useRef(false);\n    const [images, setImages] = React.useState({});\n    const image = isEmpty(config.getImage?.(props))\n      ? null\n      : config.getImage(props);\n\n    React.useEffect(() => {\n      if (!mounted.current) mounted.current = true;\n      if (image && !images[image]) {\n        const newImage = new Image();\n        newImage.src = `${image}/@@images/image`;\n        setImages({ ...images, [image]: null });\n        newImage.onload = () => {\n          if (mounted.current) {\n            setImages({ ...images, [image]: newImage });\n          }\n        };\n      }\n      return () => {\n        mounted.current = false;\n      };\n      /* eslint-disable-next-line */\n    }, [image]);\n\n    return <WrappedComponent {...props} images={images} />;\n  };\n}\n"],"mappings":";;;;;;;AAAA,OAAOA,KAAK,MAAM,OAAO;AAGzB,eAAe,SAASC,gBAAgB,CAACC,gBAAgB,EAAe;EAAA;IAAA;EAAA,IAAbC,MAAM,uEAAG,CAAC,CAAC;EACpE,UAAO,UAACC,KAAK,EAAK;IAAA;IAAA;IAChB,IAAMC,OAAO,GAAGL,KAAK,CAACM,MAAM,CAAC,KAAK,CAAC;IACnC,sBAA4BN,KAAK,CAACO,QAAQ,CAAC,CAAC,CAAC,CAAC;MAAA;MAAvCC,MAAM;MAAEC,SAAS;IACxB,IAAMC,KAAK,GAAG,6BAAQP,MAAM,CAACQ,QAAQ,qDAAf,sBAAAR,MAAM,EAAYC,KAAK,CAAC,CAAC,GAC3C,IAAI,GACJD,MAAM,CAACQ,QAAQ,CAACP,KAAK,CAAC;IAE1BJ,KAAK,CAACY,SAAS,CAAC,YAAM;MACpB,IAAI,CAACP,OAAO,CAACQ,OAAO,EAAER,OAAO,CAACQ,OAAO,GAAG,IAAI;MAC5C,IAAIH,KAAK,IAAI,CAACF,MAAM,CAACE,KAAK,CAAC,EAAE;QAC3B,IAAMI,QAAQ,GAAG,IAAIC,KAAK,EAAE;QAC5BD,QAAQ,CAACE,GAAG,aAAMN,KAAK,oBAAiB;QACxCD,SAAS,iCAAMD,MAAM,2BAAGE,KAAK,EAAG,IAAI,GAAG;QACvCI,QAAQ,CAACG,MAAM,GAAG,YAAM;UACtB,IAAIZ,OAAO,CAACQ,OAAO,EAAE;YACnBJ,SAAS,iCAAMD,MAAM,2BAAGE,KAAK,EAAGI,QAAQ,GAAG;UAC7C;QACF,CAAC;MACH;MACA,OAAO,YAAM;QACXT,OAAO,CAACQ,OAAO,GAAG,KAAK;MACzB,CAAC;MACD;IACF,CAAC,EAAE,CAACH,KAAK,CAAC,CAAC;IAEX,OAAO,MAAC,gBAAgB,eAAKN,KAAK;MAAE,MAAM,EAAEI,MAAO;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAAG;EACxD,CAAC;AACH"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}