{"ast":null,"code":"import _defineProperty from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _toConsumableArray from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _extends from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/extends.js\";\nvar _jsxFileName = \"/home/tooler/code/work/forests-frontend/src/develop/volto-metadata-block/src/widgets/Select.jsx\",\n  _this = this,\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { Dropdown } from 'semantic-ui-react';\nimport { useSelector } from 'react-redux';\nimport { getWidget } from '@eeacms/volto-metadata-block/utils';\nimport { Field } from '@plone/volto/components';\nexport var SelectMetadata = function SelectMetadata(props) {\n  _s();\n  // Get Object metadata from global state\n  var properties = useSelector(function (state) {\n    var _state$schema, _state$schema$schema;\n    return (state === null || state === void 0 ? void 0 : (_state$schema = state.schema) === null || _state$schema === void 0 ? void 0 : (_state$schema$schema = _state$schema.schema) === null || _state$schema$schema === void 0 ? void 0 : _state$schema$schema.properties) || {};\n  });\n  var vocabulary = Object.keys(properties).map(function (key) {\n    var field = properties[key];\n    var widget = getWidget(key, field);\n    return {\n      key: key,\n      value: {\n        id: key,\n        widget: widget\n      },\n      text: (field === null || field === void 0 ? void 0 : field.title) || key\n    };\n  }).filter(function (val) {\n    return !!val;\n  });\n  return __jsx(Dropdown, _extends({}, props, {\n    value: props.value,\n    selection: true,\n    search: true,\n    placeholder: \"Select metadata\",\n    options: vocabulary,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 5\n    }\n  }));\n};\n_s(SelectMetadata, \"s/BMg31oProa/YwKeQYG+CIhreg=\", false, function () {\n  return [useSelector];\n});\n_c = SelectMetadata;\nexport var SelectMetadataBlock = SelectMetadata;\nexport var SelectMetadataField = function SelectMetadataField(props) {\n  _s2();\n  var id = props.id,\n    _props$value = props.value,\n    value = _props$value === void 0 ? null : _props$value,\n    _onChange = props.onChange,\n    title = props.title,\n    block = props.block;\n  var properties = useSelector(function (state) {\n    var _state$schema2, _state$schema2$schema;\n    return (state === null || state === void 0 ? void 0 : (_state$schema2 = state.schema) === null || _state$schema2 === void 0 ? void 0 : (_state$schema2$schema = _state$schema2.schema) === null || _state$schema2$schema === void 0 ? void 0 : _state$schema2$schema.properties) || {};\n  });\n  var fields = Object.assign.apply(Object, [{}].concat(_toConsumableArray(Object.keys(properties).map(function (key) {\n    var field = properties[key];\n    var widget = getWidget(key, field);\n    return _defineProperty({}, key, {\n      id: key,\n      widget: widget,\n      title: (field === null || field === void 0 ? void 0 : field.title) || key\n    });\n  }).filter(function (val) {\n    return !!val;\n  }))));\n  var choices = Object.keys(fields).map(function (k) {\n    return [k, fields[k].title];\n  });\n  return __jsx(Field, {\n    id: id,\n    block: block,\n    title: title,\n    choices: choices,\n    value: value === null || value === void 0 ? void 0 : value.id,\n    onChange: function onChange(id, value) {\n      _onChange(id, fields[value]);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  });\n};\n_s2(SelectMetadataField, \"s/BMg31oProa/YwKeQYG+CIhreg=\", false, function () {\n  return [useSelector];\n});\n_c2 = SelectMetadataField;\nvar _c, _c2;\n$RefreshReg$(_c, \"SelectMetadata\");\n$RefreshReg$(_c2, \"SelectMetadataField\");","map":{"version":3,"names":["React","Dropdown","useSelector","getWidget","Field","SelectMetadata","props","properties","state","schema","vocabulary","Object","keys","map","key","field","widget","value","id","text","title","filter","val","SelectMetadataBlock","SelectMetadataField","onChange","block","fields","assign","choices","k"],"sources":["/home/tooler/code/work/forests-frontend/src/develop/volto-metadata-block/src/widgets/Select.jsx"],"sourcesContent":["import React from 'react';\nimport { Dropdown } from 'semantic-ui-react';\nimport { useSelector } from 'react-redux';\nimport { getWidget } from '@eeacms/volto-metadata-block/utils';\nimport { Field } from '@plone/volto/components';\n\nexport const SelectMetadata = (props) => {\n  // Get Object metadata from global state\n  const properties = useSelector(\n    (state) => state?.schema?.schema?.properties || {},\n  );\n  const vocabulary = Object.keys(properties)\n    .map((key) => {\n      const field = properties[key];\n      const widget = getWidget(key, field);\n      return {\n        key: key,\n        value: { id: key, widget: widget },\n        text: field?.title || key,\n      };\n    })\n    .filter((val) => !!val);\n\n  return (\n    <Dropdown\n      {...props}\n      value={props.value}\n      selection\n      search\n      placeholder=\"Select metadata\"\n      options={vocabulary}\n    />\n  );\n};\n\nexport const SelectMetadataBlock = SelectMetadata;\n\nexport const SelectMetadataField = (props) => {\n  const { id, value = null, onChange, title, block } = props;\n  const properties = useSelector(\n    (state) => state?.schema?.schema?.properties || {},\n  );\n\n  const fields = Object.assign(\n    {},\n    ...Object.keys(properties)\n      .map((key) => {\n        const field = properties[key];\n        const widget = getWidget(key, field);\n        return { [key]: { id: key, widget, title: field?.title || key } };\n      })\n      .filter((val) => !!val),\n  );\n\n  const choices = Object.keys(fields).map((k) => [k, fields[k].title]);\n\n  return (\n    <Field\n      id={id}\n      block={block}\n      title={title}\n      choices={choices}\n      value={value?.id}\n      onChange={(id, value) => {\n        onChange(id, fields[value]);\n      }}\n    />\n  );\n};\n"],"mappings":";;;;;;;;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,mBAAmB;AAC5C,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,SAAS,QAAQ,oCAAoC;AAC9D,SAASC,KAAK,QAAQ,yBAAyB;AAE/C,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAc,CAAIC,KAAK,EAAK;EAAA;EACvC;EACA,IAAMC,UAAU,GAAGL,WAAW,CAC5B,UAACM,KAAK;IAAA;IAAA,OAAK,CAAAA,KAAK,aAALA,KAAK,wCAALA,KAAK,CAAEC,MAAM,0EAAb,cAAeA,MAAM,yDAArB,qBAAuBF,UAAU,KAAI,CAAC,CAAC;EAAA,EACnD;EACD,IAAMG,UAAU,GAAGC,MAAM,CAACC,IAAI,CAACL,UAAU,CAAC,CACvCM,GAAG,CAAC,UAACC,GAAG,EAAK;IACZ,IAAMC,KAAK,GAAGR,UAAU,CAACO,GAAG,CAAC;IAC7B,IAAME,MAAM,GAAGb,SAAS,CAACW,GAAG,EAAEC,KAAK,CAAC;IACpC,OAAO;MACLD,GAAG,EAAEA,GAAG;MACRG,KAAK,EAAE;QAAEC,EAAE,EAAEJ,GAAG;QAAEE,MAAM,EAAEA;MAAO,CAAC;MAClCG,IAAI,EAAE,CAAAJ,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEK,KAAK,KAAIN;IACxB,CAAC;EACH,CAAC,CAAC,CACDO,MAAM,CAAC,UAACC,GAAG;IAAA,OAAK,CAAC,CAACA,GAAG;EAAA,EAAC;EAEzB,OACE,MAAC,QAAQ,eACHhB,KAAK;IACT,KAAK,EAAEA,KAAK,CAACW,KAAM;IACnB,SAAS;IACT,MAAM;IACN,WAAW,EAAC,iBAAiB;IAC7B,OAAO,EAAEP,UAAW;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACpB;AAEN,CAAC;AAAC,GA3BWL,cAAc;EAAA,QAENH,WAAW;AAAA;AAAA,KAFnBG,cAAc;AA6B3B,OAAO,IAAMkB,mBAAmB,GAAGlB,cAAc;AAEjD,OAAO,IAAMmB,mBAAmB,GAAG,SAAtBA,mBAAmB,CAAIlB,KAAK,EAAK;EAAA;EAC5C,IAAQY,EAAE,GAA2CZ,KAAK,CAAlDY,EAAE;IAAA,eAA2CZ,KAAK,CAA9CW,KAAK;IAALA,KAAK,6BAAG,IAAI;IAAEQ,SAAQ,GAAmBnB,KAAK,CAAhCmB,QAAQ;IAAEL,KAAK,GAAYd,KAAK,CAAtBc,KAAK;IAAEM,KAAK,GAAKpB,KAAK,CAAfoB,KAAK;EAChD,IAAMnB,UAAU,GAAGL,WAAW,CAC5B,UAACM,KAAK;IAAA;IAAA,OAAK,CAAAA,KAAK,aAALA,KAAK,yCAALA,KAAK,CAAEC,MAAM,4EAAb,eAAeA,MAAM,0DAArB,sBAAuBF,UAAU,KAAI,CAAC,CAAC;EAAA,EACnD;EAED,IAAMoB,MAAM,GAAGhB,MAAM,CAACiB,MAAM,OAAbjB,MAAM,GACnB,CAAC,CAAC,4BACCA,MAAM,CAACC,IAAI,CAACL,UAAU,CAAC,CACvBM,GAAG,CAAC,UAACC,GAAG,EAAK;IACZ,IAAMC,KAAK,GAAGR,UAAU,CAACO,GAAG,CAAC;IAC7B,IAAME,MAAM,GAAGb,SAAS,CAACW,GAAG,EAAEC,KAAK,CAAC;IACpC,2BAAUD,GAAG,EAAG;MAAEI,EAAE,EAAEJ,GAAG;MAAEE,MAAM,EAANA,MAAM;MAAEI,KAAK,EAAE,CAAAL,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEK,KAAK,KAAIN;IAAI,CAAC;EACjE,CAAC,CAAC,CACDO,MAAM,CAAC,UAACC,GAAG;IAAA,OAAK,CAAC,CAACA,GAAG;EAAA,EAAC,GAC1B;EAED,IAAMO,OAAO,GAAGlB,MAAM,CAACC,IAAI,CAACe,MAAM,CAAC,CAACd,GAAG,CAAC,UAACiB,CAAC;IAAA,OAAK,CAACA,CAAC,EAAEH,MAAM,CAACG,CAAC,CAAC,CAACV,KAAK,CAAC;EAAA,EAAC;EAEpE,OACE,MAAC,KAAK;IACJ,EAAE,EAAEF,EAAG;IACP,KAAK,EAAEQ,KAAM;IACb,KAAK,EAAEN,KAAM;IACb,OAAO,EAAES,OAAQ;IACjB,KAAK,EAAEZ,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEC,EAAG;IACjB,QAAQ,EAAE,kBAACA,EAAE,EAAED,KAAK,EAAK;MACvBQ,SAAQ,CAACP,EAAE,EAAES,MAAM,CAACV,KAAK,CAAC,CAAC;IAC7B,CAAE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EACF;AAEN,CAAC;AAAC,IA/BWO,mBAAmB;EAAA,QAEXtB,WAAW;AAAA;AAAA,MAFnBsB,mBAAmB;AAAA;AAAA;AAAA"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}