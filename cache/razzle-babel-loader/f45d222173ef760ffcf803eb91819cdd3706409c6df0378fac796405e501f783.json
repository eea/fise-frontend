{"ast":null,"code":"var _jsxFileName = \"/home/tooler/code/work/forests-frontend/src/develop/volto-forests-theme/src/components/theme/View/RedirectView.jsx\",\n  _this = this,\n  _s = $RefreshSig$();\nvar __jsx = React.createElement;\n/* REACT IMPORTS */\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { getBasePath } from '@eeacms/volto-forests-theme/helpers';\nimport { Dimmer, Loader } from 'semantic-ui-react';\nvar RedirectView = function RedirectView(props) {\n  _s();\n  var _props$content, _props$content2, _props$content2$items, _props$content2$items2;\n  var history = useHistory();\n  var _useState = useState(false),\n    mounted = _useState[0],\n    setMounted = _useState[1];\n  var _useState2 = useState(false),\n    redirect = _useState2[0],\n    setRedirect = _useState2[1];\n  var currentPage = (_props$content = props.content) === null || _props$content === void 0 ? void 0 : _props$content['@id'];\n  var redirectPage = (_props$content2 = props.content) === null || _props$content2 === void 0 ? void 0 : (_props$content2$items = _props$content2.items) === null || _props$content2$items === void 0 ? void 0 : (_props$content2$items2 = _props$content2$items[0]) === null || _props$content2$items2 === void 0 ? void 0 : _props$content2$items2['@id'];\n  useEffect(function () {\n    setMounted(true);\n    /* eslint-disable-next-line */\n  }, []);\n  useEffect(function () {\n    if (redirect) {\n      history.push(getBasePath(redirectPage));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [redirect]);\n  useEffect(function () {\n    if (mounted && !redirect && !props.navigation.loading) {\n      if (redirectPage) {\n        var currentPath = getBasePath(currentPage);\n        var redirectPath = getBasePath(redirectPage);\n        if (currentPath !== redirectPath) {\n          setRedirect(true);\n        }\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [mounted, redirectPage]);\n  return __jsx(Dimmer, {\n    active: true,\n    inverted: true,\n    className: \"redirect-loader\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 5\n    }\n  }, __jsx(Loader, {\n    inverted: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, \"European Environment Agency\"));\n};\n_s(RedirectView, \"WxnEiVczUdb0v9LxYPgdh3kz7ZE=\", false, function () {\n  return [useHistory];\n});\n_c = RedirectView;\nexport default connect(function (state, props) {\n  var _state$prefetch;\n  return {\n    content: ((_state$prefetch = state.prefetch) === null || _state$prefetch === void 0 ? void 0 : _state$prefetch[state.router.location.pathname]) || state.content.data,\n    navigation: state.navigation\n  };\n})(RedirectView);\nvar _c;\n$RefreshReg$(_c, \"RedirectView\");","map":{"version":3,"names":["React","useEffect","useState","useHistory","connect","getBasePath","Dimmer","Loader","RedirectView","props","history","mounted","setMounted","redirect","setRedirect","currentPage","content","redirectPage","items","push","navigation","loading","currentPath","redirectPath","state","prefetch","router","location","pathname","data"],"sources":["/home/tooler/code/work/forests-frontend/src/develop/volto-forests-theme/src/components/theme/View/RedirectView.jsx"],"sourcesContent":["/* REACT IMPORTS */\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { getBasePath } from '@eeacms/volto-forests-theme/helpers';\nimport { Dimmer, Loader } from 'semantic-ui-react';\n\nconst RedirectView = (props) => {\n  const history = useHistory();\n  const [mounted, setMounted] = useState(false);\n  const [redirect, setRedirect] = useState(false);\n  const currentPage = props.content?.['@id'];\n  const redirectPage = props.content?.items?.[0]?.['@id'];\n  useEffect(() => {\n    setMounted(true);\n    /* eslint-disable-next-line */\n  }, []);\n\n  useEffect(() => {\n    if (redirect) {\n      history.push(getBasePath(redirectPage));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [redirect]);\n\n  useEffect(() => {\n    if (mounted && !redirect && !props.navigation.loading) {\n      if (redirectPage) {\n        const currentPath = getBasePath(currentPage);\n        const redirectPath = getBasePath(redirectPage);\n        if (currentPath !== redirectPath) {\n          setRedirect(true);\n        }\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [mounted, redirectPage]);\n\n  return (\n    <Dimmer active inverted className=\"redirect-loader\">\n      <Loader inverted>European Environment Agency</Loader>\n    </Dimmer>\n  );\n};\n\nexport default connect((state, props) => ({\n  content:\n    state.prefetch?.[state.router.location.pathname] || state.content.data,\n  navigation: state.navigation,\n}))(RedirectView);\n"],"mappings":";;;;AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,UAAU,QAAQ,kBAAkB;AAC7C,SAASC,OAAO,QAAQ,aAAa;AACrC,SAASC,WAAW,QAAQ,qCAAqC;AACjE,SAASC,MAAM,EAAEC,MAAM,QAAQ,mBAAmB;AAElD,IAAMC,YAAY,GAAG,SAAfA,YAAY,CAAIC,KAAK,EAAK;EAAA;EAAA;EAC9B,IAAMC,OAAO,GAAGP,UAAU,EAAE;EAC5B,gBAA8BD,QAAQ,CAAC,KAAK,CAAC;IAAtCS,OAAO;IAAEC,UAAU;EAC1B,iBAAgCV,QAAQ,CAAC,KAAK,CAAC;IAAxCW,QAAQ;IAAEC,WAAW;EAC5B,IAAMC,WAAW,qBAAGN,KAAK,CAACO,OAAO,mDAAb,eAAgB,KAAK,CAAC;EAC1C,IAAMC,YAAY,sBAAGR,KAAK,CAACO,OAAO,6EAAb,gBAAeE,KAAK,oFAApB,sBAAuB,CAAC,CAAC,2DAAzB,uBAA4B,KAAK,CAAC;EACvDjB,SAAS,CAAC,YAAM;IACdW,UAAU,CAAC,IAAI,CAAC;IAChB;EACF,CAAC,EAAE,EAAE,CAAC;EAENX,SAAS,CAAC,YAAM;IACd,IAAIY,QAAQ,EAAE;MACZH,OAAO,CAACS,IAAI,CAACd,WAAW,CAACY,YAAY,CAAC,CAAC;IACzC;IACA;EACF,CAAC,EAAE,CAACJ,QAAQ,CAAC,CAAC;EAEdZ,SAAS,CAAC,YAAM;IACd,IAAIU,OAAO,IAAI,CAACE,QAAQ,IAAI,CAACJ,KAAK,CAACW,UAAU,CAACC,OAAO,EAAE;MACrD,IAAIJ,YAAY,EAAE;QAChB,IAAMK,WAAW,GAAGjB,WAAW,CAACU,WAAW,CAAC;QAC5C,IAAMQ,YAAY,GAAGlB,WAAW,CAACY,YAAY,CAAC;QAC9C,IAAIK,WAAW,KAAKC,YAAY,EAAE;UAChCT,WAAW,CAAC,IAAI,CAAC;QACnB;MACF;IACF;IACA;EACF,CAAC,EAAE,CAACH,OAAO,EAAEM,YAAY,CAAC,CAAC;EAE3B,OACE,MAAC,MAAM;IAAC,MAAM;IAAC,QAAQ;IAAC,SAAS,EAAC,iBAAiB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACjD,MAAC,MAAM;IAAC,QAAQ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,iCAAqC,CAC9C;AAEb,CAAC;AAAC,GApCIT,YAAY;EAAA,QACAL,UAAU;AAAA;AAAA,KADtBK,YAAY;AAsClB,eAAeJ,OAAO,CAAC,UAACoB,KAAK,EAAEf,KAAK;EAAA;EAAA,OAAM;IACxCO,OAAO,EACL,oBAAAQ,KAAK,CAACC,QAAQ,oDAAd,gBAAiBD,KAAK,CAACE,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAAC,KAAIJ,KAAK,CAACR,OAAO,CAACa,IAAI;IACxET,UAAU,EAAEI,KAAK,CAACJ;EACpB,CAAC;AAAA,CAAC,CAAC,CAACZ,YAAY,CAAC;AAAC;AAAA"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}