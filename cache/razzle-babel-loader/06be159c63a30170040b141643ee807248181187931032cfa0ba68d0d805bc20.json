{"ast":null,"code":"import _isEqual from \"lodash/isEqual\";\nvar _jsxFileName = \"/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-eea-map/src/components/Blocks/EmbedEEAMap/Edit.jsx\";\nvar __jsx = React.createElement;\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nimport React from 'react';\nimport { SidebarPortal } from '@plone/volto/components';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { getContent } from '@plone/volto/actions';\nimport BlockDataForm from '@plone/volto/components/manage/Form/BlockDataForm';\nimport View from './View';\nimport { Schema } from './Schema';\nimport '../../../styles/map.css';\nconst Edit = props => {\n  const {\n    block,\n    data,\n    onChangeBlock,\n    selected,\n    id\n  } = props;\n  const schema = React.useMemo(() => Schema(props), [props]);\n  React.useEffect(() => {\n    if (!Object.hasOwn(data, 'show_legend')) {\n      onChangeBlock(block, _objectSpread(_objectSpread({}, data), {}, {\n        show_legend: true\n      }));\n    }\n    if (!Object.hasOwn(data, 'show_sources')) {\n      onChangeBlock(block, _objectSpread(_objectSpread({}, data), {}, {\n        show_sources: true\n      }));\n    }\n    if (!Object.hasOwn(data, 'dataprotection')) {\n      onChangeBlock(block, _objectSpread(_objectSpread({}, data), {}, {\n        dataprotection: {\n          enabled: true\n        }\n      }));\n    }\n\n    //    eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data]);\n  React.useEffect(() => {\n    props.getContent(data.vis_url, null, id);\n    //    eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data.vis_url]);\n  React.useEffect(() => {\n    if (!data.data_query_params || !_isEqual(props.data_query, data.data_query_params)) {\n      onChangeBlock(block, _objectSpread(_objectSpread({}, data), {}, {\n        data_query_params: props.data_query\n      }));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.block, props.data_query, data.data_query_params]);\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, __jsx(View, {\n    data: data,\n    id: id,\n    isEdit: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }), __jsx(SidebarPortal, {\n    selected: selected,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, __jsx(BlockDataForm, {\n    block: block,\n    title: schema.title,\n    schema: schema,\n    onChangeField: (id, value) => {\n      onChangeBlock(block, _objectSpread(_objectSpread({}, data), {}, {\n        [id]: value\n      }));\n    },\n    formData: data,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  })));\n};\nexport default compose(connect((state, props) => ({\n  block_data: state.content.data,\n  data_query: state.content.data.data_query\n}), {\n  getContent\n}))(Edit);","map":{"version":3,"names":["React","SidebarPortal","connect","compose","getContent","BlockDataForm","View","Schema","Edit","props","block","data","onChangeBlock","selected","id","schema","useMemo","useEffect","Object","hasOwn","show_legend","show_sources","dataprotection","enabled","vis_url","data_query_params","data_query","title","value","state","block_data","content"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-eea-map/src/components/Blocks/EmbedEEAMap/Edit.jsx"],"sourcesContent":["import React from 'react';\nimport { SidebarPortal } from '@plone/volto/components';\n\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\n\nimport { getContent } from '@plone/volto/actions';\n\nimport BlockDataForm from '@plone/volto/components/manage/Form/BlockDataForm';\nimport View from './View';\nimport { Schema } from './Schema';\nimport '../../../styles/map.css';\n\nimport _ from 'lodash';\n\nconst Edit = (props) => {\n  const { block, data, onChangeBlock, selected, id } = props;\n  const schema = React.useMemo(() => Schema(props), [props]);\n\n  React.useEffect(() => {\n    if (!Object.hasOwn(data, 'show_legend')) {\n      onChangeBlock(block, {\n        ...data,\n        show_legend: true,\n      });\n    }\n    if (!Object.hasOwn(data, 'show_sources')) {\n      onChangeBlock(block, {\n        ...data,\n        show_sources: true,\n      });\n    }\n    if (!Object.hasOwn(data, 'dataprotection')) {\n      onChangeBlock(block, {\n        ...data,\n        dataprotection: { enabled: true },\n      });\n    }\n\n    //    eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data]);\n\n  React.useEffect(() => {\n    props.getContent(data.vis_url, null, id);\n    //    eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data.vis_url]);\n\n  React.useEffect(() => {\n    if (\n      !data.data_query_params ||\n      !_.isEqual(props.data_query, data.data_query_params)\n    ) {\n      onChangeBlock(block, {\n        ...data,\n        data_query_params: props.data_query,\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.block, props.data_query, data.data_query_params]);\n  return (\n    <div>\n      <View data={data} id={id} isEdit={true} />\n      <SidebarPortal selected={selected}>\n        <BlockDataForm\n          block={block}\n          title={schema.title}\n          schema={schema}\n          onChangeField={(id, value) => {\n            onChangeBlock(block, {\n              ...data,\n              [id]: value,\n            });\n          }}\n          formData={data}\n        />\n      </SidebarPortal>\n    </div>\n  );\n};\n\nexport default compose(\n  connect(\n    (state, props) => ({\n      block_data: state.content.data,\n      data_query: state.content.data.data_query,\n    }),\n    {\n      getContent,\n    },\n  ),\n)(Edit);\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}