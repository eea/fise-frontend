{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nimport { blockTagDeserializer } from 'volto-slate/editor/deserialize';\nimport { TABLE, TR, TD, TFOOT, THEAD, TBODY, TH } from 'volto-slate/constants';\nimport { Editor, Point, Range } from 'slate';\nexport const withTable = editor => {\n  const {\n    deleteBackward,\n    deleteForward,\n    insertBreak\n  } = editor;\n\n  // paste support\n  editor.htmlTagsToSlate = _objectSpread(_objectSpread({}, editor.htmlTagsToSlate), {}, {\n    TABLE: blockTagDeserializer(TABLE),\n    THEAD: blockTagDeserializer(THEAD),\n    TFOOT: blockTagDeserializer(TFOOT),\n    TBODY: blockTagDeserializer(TBODY),\n    TR: blockTagDeserializer(TR),\n    TH: blockTagDeserializer(TH),\n    TD: blockTagDeserializer(TD)\n  });\n  editor.deleteBackward = unit => {\n    const {\n      selection\n    } = editor;\n    if (selection && Range.isCollapsed(selection)) {\n      const [cell] = Editor.nodes(editor, {\n        match: n => n.type === TD\n      });\n      if (cell) {\n        const [, cellPath] = cell;\n        const start = Editor.start(editor, cellPath);\n        if (Point.equals(selection.anchor, start)) {\n          return;\n        }\n      }\n    }\n    deleteBackward(unit);\n  };\n  editor.deleteForward = unit => {\n    const {\n      selection\n    } = editor;\n    if (selection && Range.isCollapsed(selection)) {\n      const [cell] = Editor.nodes(editor, {\n        match: n => n.type === TD\n      });\n      if (cell) {\n        const [, cellPath] = cell;\n        const end = Editor.end(editor, cellPath);\n        if (Point.equals(selection.anchor, end)) {\n          return;\n        }\n      }\n    }\n    deleteForward(unit);\n  };\n  editor.insertBreak = () => {\n    const {\n      selection\n    } = editor;\n    if (selection) {\n      const [table] = Editor.nodes(editor, {\n        match: n => n.type === TABLE\n      });\n      if (table) {\n        return;\n      }\n    }\n    insertBreak();\n  };\n  return editor;\n};","map":{"version":3,"names":["blockTagDeserializer","TABLE","TR","TD","TFOOT","THEAD","TBODY","TH","Editor","Point","Range","withTable","editor","deleteBackward","deleteForward","insertBreak","htmlTagsToSlate","unit","selection","isCollapsed","cell","nodes","match","n","type","cellPath","start","equals","anchor","end","table"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/volto-slate/src/editor/plugins/Table/extensions.js"],"sourcesContent":["import { blockTagDeserializer } from 'volto-slate/editor/deserialize';\nimport { TABLE, TR, TD, TFOOT, THEAD, TBODY, TH } from 'volto-slate/constants';\nimport { Editor, Point, Range } from 'slate';\n\nexport const withTable = (editor) => {\n  const { deleteBackward, deleteForward, insertBreak } = editor;\n\n  // paste support\n  editor.htmlTagsToSlate = {\n    ...editor.htmlTagsToSlate,\n    TABLE: blockTagDeserializer(TABLE),\n    THEAD: blockTagDeserializer(THEAD),\n    TFOOT: blockTagDeserializer(TFOOT),\n    TBODY: blockTagDeserializer(TBODY),\n    TR: blockTagDeserializer(TR),\n    TH: blockTagDeserializer(TH),\n    TD: blockTagDeserializer(TD),\n  };\n\n  editor.deleteBackward = (unit) => {\n    const { selection } = editor;\n\n    if (selection && Range.isCollapsed(selection)) {\n      const [cell] = Editor.nodes(editor, {\n        match: (n) => n.type === TD,\n      });\n\n      if (cell) {\n        const [, cellPath] = cell;\n        const start = Editor.start(editor, cellPath);\n\n        if (Point.equals(selection.anchor, start)) {\n          return;\n        }\n      }\n    }\n\n    deleteBackward(unit);\n  };\n\n  editor.deleteForward = (unit) => {\n    const { selection } = editor;\n\n    if (selection && Range.isCollapsed(selection)) {\n      const [cell] = Editor.nodes(editor, {\n        match: (n) => n.type === TD,\n      });\n\n      if (cell) {\n        const [, cellPath] = cell;\n        const end = Editor.end(editor, cellPath);\n\n        if (Point.equals(selection.anchor, end)) {\n          return;\n        }\n      }\n    }\n\n    deleteForward(unit);\n  };\n\n  editor.insertBreak = () => {\n    const { selection } = editor;\n\n    if (selection) {\n      const [table] = Editor.nodes(editor, {\n        match: (n) => n.type === TABLE,\n      });\n\n      if (table) {\n        return;\n      }\n    }\n\n    insertBreak();\n  };\n\n  return editor;\n};\n"],"mappings":";;;AAAA,SAASA,oBAAoB,QAAQ,gCAAgC;AACrE,SAASC,KAAK,EAAEC,EAAE,EAAEC,EAAE,EAAEC,KAAK,EAAEC,KAAK,EAAEC,KAAK,EAAEC,EAAE,QAAQ,uBAAuB;AAC9E,SAASC,MAAM,EAAEC,KAAK,EAAEC,KAAK,QAAQ,OAAO;AAE5C,OAAO,MAAMC,SAAS,GAAIC,MAAM,IAAK;EACnC,MAAM;IAAEC,cAAc;IAAEC,aAAa;IAAEC;EAAY,CAAC,GAAGH,MAAM;;EAE7D;EACAA,MAAM,CAACI,eAAe,mCACjBJ,MAAM,CAACI,eAAe;IACzBf,KAAK,EAAED,oBAAoB,CAACC,KAAK,CAAC;IAClCI,KAAK,EAAEL,oBAAoB,CAACK,KAAK,CAAC;IAClCD,KAAK,EAAEJ,oBAAoB,CAACI,KAAK,CAAC;IAClCE,KAAK,EAAEN,oBAAoB,CAACM,KAAK,CAAC;IAClCJ,EAAE,EAAEF,oBAAoB,CAACE,EAAE,CAAC;IAC5BK,EAAE,EAAEP,oBAAoB,CAACO,EAAE,CAAC;IAC5BJ,EAAE,EAAEH,oBAAoB,CAACG,EAAE;EAAC,EAC7B;EAEDS,MAAM,CAACC,cAAc,GAAII,IAAI,IAAK;IAChC,MAAM;MAAEC;IAAU,CAAC,GAAGN,MAAM;IAE5B,IAAIM,SAAS,IAAIR,KAAK,CAACS,WAAW,CAACD,SAAS,CAAC,EAAE;MAC7C,MAAM,CAACE,IAAI,CAAC,GAAGZ,MAAM,CAACa,KAAK,CAACT,MAAM,EAAE;QAClCU,KAAK,EAAGC,CAAC,IAAKA,CAAC,CAACC,IAAI,KAAKrB;MAC3B,CAAC,CAAC;MAEF,IAAIiB,IAAI,EAAE;QACR,MAAM,GAAGK,QAAQ,CAAC,GAAGL,IAAI;QACzB,MAAMM,KAAK,GAAGlB,MAAM,CAACkB,KAAK,CAACd,MAAM,EAAEa,QAAQ,CAAC;QAE5C,IAAIhB,KAAK,CAACkB,MAAM,CAACT,SAAS,CAACU,MAAM,EAAEF,KAAK,CAAC,EAAE;UACzC;QACF;MACF;IACF;IAEAb,cAAc,CAACI,IAAI,CAAC;EACtB,CAAC;EAEDL,MAAM,CAACE,aAAa,GAAIG,IAAI,IAAK;IAC/B,MAAM;MAAEC;IAAU,CAAC,GAAGN,MAAM;IAE5B,IAAIM,SAAS,IAAIR,KAAK,CAACS,WAAW,CAACD,SAAS,CAAC,EAAE;MAC7C,MAAM,CAACE,IAAI,CAAC,GAAGZ,MAAM,CAACa,KAAK,CAACT,MAAM,EAAE;QAClCU,KAAK,EAAGC,CAAC,IAAKA,CAAC,CAACC,IAAI,KAAKrB;MAC3B,CAAC,CAAC;MAEF,IAAIiB,IAAI,EAAE;QACR,MAAM,GAAGK,QAAQ,CAAC,GAAGL,IAAI;QACzB,MAAMS,GAAG,GAAGrB,MAAM,CAACqB,GAAG,CAACjB,MAAM,EAAEa,QAAQ,CAAC;QAExC,IAAIhB,KAAK,CAACkB,MAAM,CAACT,SAAS,CAACU,MAAM,EAAEC,GAAG,CAAC,EAAE;UACvC;QACF;MACF;IACF;IAEAf,aAAa,CAACG,IAAI,CAAC;EACrB,CAAC;EAEDL,MAAM,CAACG,WAAW,GAAG,MAAM;IACzB,MAAM;MAAEG;IAAU,CAAC,GAAGN,MAAM;IAE5B,IAAIM,SAAS,EAAE;MACb,MAAM,CAACY,KAAK,CAAC,GAAGtB,MAAM,CAACa,KAAK,CAACT,MAAM,EAAE;QACnCU,KAAK,EAAGC,CAAC,IAAKA,CAAC,CAACC,IAAI,KAAKvB;MAC3B,CAAC,CAAC;MAEF,IAAI6B,KAAK,EAAE;QACT;MACF;IACF;IAEAf,WAAW,EAAE;EACf,CAAC;EAED,OAAOH,MAAM;AACf,CAAC"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}