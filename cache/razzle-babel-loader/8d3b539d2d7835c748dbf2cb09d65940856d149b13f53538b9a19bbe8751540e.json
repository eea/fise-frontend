{"ast":null,"code":"var _jsxFileName = \"/home/tooler/code/work/forests-frontend/node_modules/@plone/volto/src/components/manage/LockingToastsFactory/LockingToastsFactory.jsx\",\n  _this = this,\n  _s = $RefreshSig$();\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { toast } from 'react-toastify';\nimport { useSelector } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport { defineMessages, useIntl } from 'react-intl';\nimport { FormattedDate, Toast } from '@plone/volto/components';\nimport useDeepCompareEffect from 'use-deep-compare-effect';\nvar messages = defineMessages({\n  thisItemIsLocked: {\n    \"id\": \"This item was locked by {creator} on {date}\",\n    \"defaultMessage\": \"This item was locked by {creator} on {date}\"\n  },\n  unlockItem: {\n    \"id\": \"If you are certain this user has abandoned the object, you may unlock the object. You will then be able to edit it.\",\n    \"defaultMessage\": \"If you are certain this user has abandoned the object, you may unlock the object. You will then be able to edit it.\"\n  }\n});\nvar LockingToastsFactory = function LockingToastsFactory(props) {\n  _s();\n  var intl = useIntl();\n  var pathname = useLocation().pathname;\n  var lang = useSelector(function (state) {\n    return state.intl.locale;\n  });\n  var content = props.content,\n    user = props.user;\n  var lock = content === null || content === void 0 ? void 0 : content.lock;\n  var creator = (lock === null || lock === void 0 ? void 0 : lock.creator_name) || (lock === null || lock === void 0 ? void 0 : lock.creator) || '';\n  var date = (lock === null || lock === void 0 ? void 0 : lock.created) || '';\n  var dateOptions = {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric'\n  };\n  useDeepCompareEffect(function () {\n    if (user && content) {\n      if (lock !== null && lock !== void 0 && lock.locked && lock !== null && lock !== void 0 && lock.stealable && (lock === null || lock === void 0 ? void 0 : lock.creator) !== user) {\n        if (toast.isActive('lockinginfo')) {\n          toast.update('lockinginfo', {\n            render: __jsx(Toast, {\n              info: true,\n              title: intl.formatMessage(messages.thisItemIsLocked, {\n                creator: creator,\n                date: __jsx(FormattedDate, {\n                  date: date,\n                  format: dateOptions,\n                  __self: _this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 48,\n                    columnNumber: 25\n                  }\n                })\n              }),\n              content: intl.formatMessage(messages.unlockItem, {}),\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 44,\n                columnNumber: 15\n              }\n            })\n          });\n        } else {\n          toast.info(__jsx(Toast, {\n            info: true,\n            title: intl.formatMessage(messages.thisItemIsLocked, {\n              creator: creator,\n              date: __jsx(FormattedDate, {\n                date: date,\n                format: dateOptions,\n                __self: _this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 60,\n                  columnNumber: 23\n                }\n              })\n            }),\n            content: intl.formatMessage(messages.unlockItem, {}),\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 13\n            }\n          }), {\n            toastId: 'lockinginfo',\n            autoClose: false,\n            closeButton: false,\n            transition: null\n          });\n        }\n      } else {\n        if (toast.isActive('lockinginfo')) {\n          toast.dismiss('lockinginfo');\n        }\n      }\n    }\n  }, [content, creator, date, dateOptions, intl, lang, lock, pathname, user]);\n  return null;\n};\n_s(LockingToastsFactory, \"/NYa8V5LW7Ik6OdrNG/7N0BmhdE=\", false, function () {\n  return [useIntl, useLocation, useSelector, useDeepCompareEffect];\n});\n_c = LockingToastsFactory;\nexport default LockingToastsFactory;\nvar _c;\n$RefreshReg$(_c, \"LockingToastsFactory\");","map":{"version":3,"names":["React","toast","useSelector","useLocation","defineMessages","useIntl","FormattedDate","Toast","useDeepCompareEffect","messages","thisItemIsLocked","unlockItem","LockingToastsFactory","props","intl","pathname","lang","state","locale","content","user","lock","creator","creator_name","date","created","dateOptions","year","month","day","hour","minute","locked","stealable","isActive","update","render","formatMessage","info","toastId","autoClose","closeButton","transition","dismiss"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@plone/volto/src/components/manage/LockingToastsFactory/LockingToastsFactory.jsx"],"sourcesContent":["import React from 'react';\nimport { toast } from 'react-toastify';\nimport { useSelector } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport { defineMessages, useIntl } from 'react-intl';\nimport { FormattedDate, Toast } from '@plone/volto/components';\nimport useDeepCompareEffect from 'use-deep-compare-effect';\n\nconst messages = defineMessages({\n  thisItemIsLocked: {\n    id: 'This item was locked by {creator} on {date}',\n    defaultMessage: 'This item was locked by {creator} on {date}',\n  },\n  unlockItem: {\n    id:\n      'If you are certain this user has abandoned the object, you may unlock the object. You will then be able to edit it.',\n    defaultMessage:\n      'If you are certain this user has abandoned the object, you may unlock the object. You will then be able to edit it.',\n  },\n});\n\nconst LockingToastsFactory = (props) => {\n  const intl = useIntl();\n  const pathname = useLocation().pathname;\n  const lang = useSelector((state) => state.intl.locale);\n  const { content, user } = props;\n  const lock = content?.lock;\n  const creator = lock?.creator_name || lock?.creator || '';\n  const date = lock?.created || '';\n  const dateOptions = {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric',\n  };\n\n  useDeepCompareEffect(() => {\n    if (user && content) {\n      if (lock?.locked && lock?.stealable && lock?.creator !== user) {\n        if (toast.isActive('lockinginfo')) {\n          toast.update('lockinginfo', {\n            render: (\n              <Toast\n                info\n                title={intl.formatMessage(messages.thisItemIsLocked, {\n                  creator: creator,\n                  date: <FormattedDate date={date} format={dateOptions} />,\n                })}\n                content={intl.formatMessage(messages.unlockItem, {})}\n              />\n            ),\n          });\n        } else {\n          toast.info(\n            <Toast\n              info\n              title={intl.formatMessage(messages.thisItemIsLocked, {\n                creator: creator,\n                date: <FormattedDate date={date} format={dateOptions} />,\n              })}\n              content={intl.formatMessage(messages.unlockItem, {})}\n            />,\n            {\n              toastId: 'lockinginfo',\n              autoClose: false,\n              closeButton: false,\n              transition: null,\n            },\n          );\n        }\n      } else {\n        if (toast.isActive('lockinginfo')) {\n          toast.dismiss('lockinginfo');\n        }\n      }\n    }\n  }, [content, creator, date, dateOptions, intl, lang, lock, pathname, user]);\n\n  return null;\n};\n\nexport default LockingToastsFactory;\n"],"mappings":";;;;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,KAAK,QAAQ,gBAAgB;AACtC,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,cAAc,EAAEC,OAAO,QAAQ,YAAY;AACpD,SAASC,aAAa,EAAEC,KAAK,QAAQ,yBAAyB;AAC9D,OAAOC,oBAAoB,MAAM,yBAAyB;AAE1D,IAAMC,QAAQ,GAAGL,cAAc,CAAC;EAC9BM,gBAAgB;IAAA;IAAA;EAAA,CAGf;EACDC,UAAU;IAAA;IAAA;EAAA;AAMZ,CAAC,CAAC;AAEF,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAoB,CAAIC,KAAK,EAAK;EAAA;EACtC,IAAMC,IAAI,GAAGT,OAAO,EAAE;EACtB,IAAMU,QAAQ,GAAGZ,WAAW,EAAE,CAACY,QAAQ;EACvC,IAAMC,IAAI,GAAGd,WAAW,CAAC,UAACe,KAAK;IAAA,OAAKA,KAAK,CAACH,IAAI,CAACI,MAAM;EAAA,EAAC;EACtD,IAAQC,OAAO,GAAWN,KAAK,CAAvBM,OAAO;IAAEC,IAAI,GAAKP,KAAK,CAAdO,IAAI;EACrB,IAAMC,IAAI,GAAGF,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEE,IAAI;EAC1B,IAAMC,OAAO,GAAG,CAAAD,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEE,YAAY,MAAIF,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEC,OAAO,KAAI,EAAE;EACzD,IAAME,IAAI,GAAG,CAAAH,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEI,OAAO,KAAI,EAAE;EAChC,IAAMC,WAAW,GAAG;IAClBC,IAAI,EAAE,SAAS;IACfC,KAAK,EAAE,MAAM;IACbC,GAAG,EAAE,SAAS;IACdC,IAAI,EAAE,SAAS;IACfC,MAAM,EAAE;EACV,CAAC;EAEDvB,oBAAoB,CAAC,YAAM;IACzB,IAAIY,IAAI,IAAID,OAAO,EAAE;MACnB,IAAIE,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEW,MAAM,IAAIX,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEY,SAAS,IAAI,CAAAZ,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEC,OAAO,MAAKF,IAAI,EAAE;QAC7D,IAAInB,KAAK,CAACiC,QAAQ,CAAC,aAAa,CAAC,EAAE;UACjCjC,KAAK,CAACkC,MAAM,CAAC,aAAa,EAAE;YAC1BC,MAAM,EACJ,MAAC,KAAK;cACJ,IAAI;cACJ,KAAK,EAAEtB,IAAI,CAACuB,aAAa,CAAC5B,QAAQ,CAACC,gBAAgB,EAAE;gBACnDY,OAAO,EAAEA,OAAO;gBAChBE,IAAI,EAAE,MAAC,aAAa;kBAAC,IAAI,EAAEA,IAAK;kBAAC,MAAM,EAAEE,WAAY;kBAAA;kBAAA;oBAAA;oBAAA;oBAAA;kBAAA;gBAAA;cACvD,CAAC,CAAE;cACH,OAAO,EAAEZ,IAAI,CAACuB,aAAa,CAAC5B,QAAQ,CAACE,UAAU,EAAE,CAAC,CAAC,CAAE;cAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;YAAA;UAG3D,CAAC,CAAC;QACJ,CAAC,MAAM;UACLV,KAAK,CAACqC,IAAI,CACR,MAAC,KAAK;YACJ,IAAI;YACJ,KAAK,EAAExB,IAAI,CAACuB,aAAa,CAAC5B,QAAQ,CAACC,gBAAgB,EAAE;cACnDY,OAAO,EAAEA,OAAO;cAChBE,IAAI,EAAE,MAAC,aAAa;gBAAC,IAAI,EAAEA,IAAK;gBAAC,MAAM,EAAEE,WAAY;gBAAA;gBAAA;kBAAA;kBAAA;kBAAA;gBAAA;cAAA;YACvD,CAAC,CAAE;YACH,OAAO,EAAEZ,IAAI,CAACuB,aAAa,CAAC5B,QAAQ,CAACE,UAAU,EAAE,CAAC,CAAC,CAAE;YAAA;YAAA;cAAA;cAAA;cAAA;YAAA;UAAA,EACrD,EACF;YACE4B,OAAO,EAAE,aAAa;YACtBC,SAAS,EAAE,KAAK;YAChBC,WAAW,EAAE,KAAK;YAClBC,UAAU,EAAE;UACd,CAAC,CACF;QACH;MACF,CAAC,MAAM;QACL,IAAIzC,KAAK,CAACiC,QAAQ,CAAC,aAAa,CAAC,EAAE;UACjCjC,KAAK,CAAC0C,OAAO,CAAC,aAAa,CAAC;QAC9B;MACF;IACF;EACF,CAAC,EAAE,CAACxB,OAAO,EAAEG,OAAO,EAAEE,IAAI,EAAEE,WAAW,EAAEZ,IAAI,EAAEE,IAAI,EAAEK,IAAI,EAAEN,QAAQ,EAAEK,IAAI,CAAC,CAAC;EAE3E,OAAO,IAAI;AACb,CAAC;AAAC,GA3DIR,oBAAoB;EAAA,QACXP,OAAO,EACHF,WAAW,EACfD,WAAW,EAaxBM,oBAAoB;AAAA;AAAA,KAhBhBI,oBAAoB;AA6D1B,eAAeA,oBAAoB;AAAC;AAAA"},"metadata":{"react-intl":{"messages":[{"id":"This item was locked by {creator} on {date}","defaultMessage":"This item was locked by {creator} on {date}"},{"id":"If you are certain this user has abandoned the object, you may unlock the object. You will then be able to edit it.","defaultMessage":"If you are certain this user has abandoned the object, you may unlock the object. You will then be able to edit it."}]}},"sourceType":"module","externalDependencies":[]}