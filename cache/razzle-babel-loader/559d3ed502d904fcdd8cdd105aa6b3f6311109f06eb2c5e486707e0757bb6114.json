{"ast":null,"code":"import _sortBy from \"lodash/sortBy\";\nconst _excluded = [\"pluggable\", \"id\", \"dependencies\", \"children\"];\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n// ported to JS from MIT licensed https://github.com/robik/react-view-slot\n// We've renamed Slot => Pluggable, not to clash with Volto slots\n\nimport React from 'react';\nexport const context = /*#__PURE__*/React.createContext();\nexport function usePluggable(name) {\n  const ctx = React.useContext(context);\n  if (!ctx) {\n    throw new Error('Using <Pluggable> component or usePluggable hook outside of <PluggablesProvider>');\n  }\n  return ctx.pluggables[name] || [];\n}\n\n/**\n\n**/\nexport function Pluggable(props) {\n  const {\n    name,\n    maxCount,\n    reversed,\n    children,\n    params\n  } = props; // , ...rest\n  let pluggables = usePluggable(name);\n  if (maxCount !== undefined) {\n    pluggables = pluggables.slice(0, maxCount);\n  }\n  if (reversed !== undefined) {\n    pluggables = [...pluggables].reverse();\n  }\n  if (params && children) {\n    throw Error('Cannot specify render function and params props at the same time');\n  }\n  return React.useMemo(() => {\n    if (children) {\n      return children(pluggables);\n    }\n    return /*#__PURE__*/React.createElement(React.Fragment, {}, pluggables.map((R, i) => /*#__PURE__*/React.createElement(R, _objectSpread({\n      key: i.toString()\n    }, params))));\n  }, [params, pluggables, children]);\n}\nexport function usePlug({\n  pluggable,\n  id,\n  renderer,\n  dependencies,\n  options\n}) {\n  const pluggableContext = React.useContext(context);\n  if (!pluggableContext) {\n    throw new Error('Using <Plug> component or usePlug hook outside of <PluggablesProvider>');\n  }\n  const {\n    setPlug,\n    removePlug\n  } = pluggableContext;\n  const {\n    name,\n    order,\n    extra\n  } = options;\n\n  // Could be that a Plug is empty (or it evaluates and have no children)\n  if (renderer) {\n    Object.assign(renderer, {\n      pluggableName: name,\n      extra,\n      order\n    });\n  }\n  React.useEffect(() => {\n    if (renderer) {\n      setPlug(pluggable, id, renderer);\n      return () => removePlug(pluggable, id);\n    }\n  }, dependencies // eslint-disable-line react-hooks/exhaustive-deps\n  );\n}\n\nexport const Plug = _ref => {\n  let {\n      pluggable,\n      id,\n      dependencies = [],\n      children\n    } = _ref,\n    options = _objectWithoutProperties(_ref, _excluded);\n  const renderer = children && (typeof children === 'function' ? children : () => children);\n  usePlug({\n    pluggable,\n    id,\n    renderer,\n    dependencies,\n    options\n  });\n  return null;\n};\nexport function createPluggable(name) {\n  const pluggable = props => /*#__PURE__*/React.createElement(Pluggable, _objectSpread({\n    name\n  }, props));\n  pluggable.pluggableName = name;\n  pluggable.Plug = createPlugComponent(name);\n  return pluggable;\n}\nfunction createPlugComponent(pluggableName) {\n  const plugComponent = props => /*#__PURE__*/React.createElement(Plug, _objectSpread({\n    pluggable: pluggableName\n  }, props));\n  plugComponent.displayName = `Pluggables(${pluggableName})`;\n  return plugComponent;\n}\n\n/**\n * Creates a Pluggable + Plug pair\n */\nexport function createPluggableAndPlug(name) {\n  const boundPluggable = createPluggable(name);\n  return [boundPluggable, boundPluggable.Plug];\n}\nexport const PluggablesProvider = ({\n  children\n}) => {\n  const setPlug = (pluggable, id, renderer) => {\n    Object.assign(renderer, {\n      id\n    });\n    setPluggables(prevState => _objectSpread(_objectSpread({}, prevState), {}, {\n      pluggables: _objectSpread(_objectSpread({}, prevState.pluggables), {}, {\n        [pluggable]: _sortBy([...(prevState.pluggables[pluggable] || []).filter(e => e.id !== id), renderer], e => e.order || 0)\n      })\n    }));\n  };\n  const removePlug = (pluggable, name) => {\n    setPluggables(prevState => _objectSpread(_objectSpread({}, prevState), {}, {\n      pluggables: _objectSpread(_objectSpread({}, prevState.pluggables), {}, {\n        [pluggable]: _sortBy((prevState.pluggables[pluggable] || []).filter(e => e.id !== name), e => e.order || 0)\n      })\n    }));\n  };\n  const initialPluggables = {\n    pluggables: {},\n    setPlug,\n    removePlug\n  };\n  const [pluggables, setPluggables] = React.useState(initialPluggables);\n  return /*#__PURE__*/React.createElement(context.Provider, {\n    value: pluggables\n  }, children);\n};\nexport default Pluggable;","map":{"version":3,"names":["React","context","createContext","usePluggable","name","ctx","useContext","Error","pluggables","Pluggable","props","maxCount","reversed","children","params","undefined","slice","reverse","useMemo","createElement","Fragment","map","R","i","key","toString","usePlug","pluggable","id","renderer","dependencies","options","pluggableContext","setPlug","removePlug","order","extra","Object","assign","pluggableName","useEffect","Plug","createPluggable","createPlugComponent","plugComponent","displayName","createPluggableAndPlug","boundPluggable","PluggablesProvider","setPluggables","prevState","filter","e","initialPluggables","useState","Provider","value"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@plone/volto/src/components/manage/Pluggable/index.js"],"sourcesContent":["// ported to JS from MIT licensed https://github.com/robik/react-view-slot\n// We've renamed Slot => Pluggable, not to clash with Volto slots\n\nimport React from 'react';\nimport { sortBy } from 'lodash';\n\nexport const context = React.createContext();\n\nexport function usePluggable(name) {\n  const ctx = React.useContext(context);\n\n  if (!ctx) {\n    throw new Error(\n      'Using <Pluggable> component or usePluggable hook outside of <PluggablesProvider>',\n    );\n  }\n\n  return ctx.pluggables[name] || [];\n}\n\n/**\n\n**/\nexport function Pluggable(props) {\n  const { name, maxCount, reversed, children, params } = props; // , ...rest\n  let pluggables = usePluggable(name);\n\n  if (maxCount !== undefined) {\n    pluggables = pluggables.slice(0, maxCount);\n  }\n  if (reversed !== undefined) {\n    pluggables = [...pluggables].reverse();\n  }\n\n  if (params && children) {\n    throw Error(\n      'Cannot specify render function and params props at the same time',\n    );\n  }\n\n  return React.useMemo(() => {\n    if (children) {\n      return children(pluggables);\n    }\n\n    return React.createElement(\n      React.Fragment,\n      {},\n      pluggables.map((R, i) =>\n        React.createElement(R, { key: i.toString(), ...params }),\n      ),\n    );\n  }, [params, pluggables, children]);\n}\n\nexport function usePlug({ pluggable, id, renderer, dependencies, options }) {\n  const pluggableContext = React.useContext(context);\n  if (!pluggableContext) {\n    throw new Error(\n      'Using <Plug> component or usePlug hook outside of <PluggablesProvider>',\n    );\n  }\n  const { setPlug, removePlug } = pluggableContext;\n  const { name, order, extra } = options;\n\n  // Could be that a Plug is empty (or it evaluates and have no children)\n  if (renderer) {\n    Object.assign(renderer, { pluggableName: name, extra, order });\n  }\n\n  React.useEffect(\n    () => {\n      if (renderer) {\n        setPlug(pluggable, id, renderer);\n        return () => removePlug(pluggable, id);\n      }\n    },\n    dependencies, // eslint-disable-line react-hooks/exhaustive-deps\n  );\n}\n\nexport const Plug = ({\n  pluggable,\n  id,\n  dependencies = [],\n  children,\n  ...options\n}) => {\n  const renderer =\n    children && (typeof children === 'function' ? children : () => children);\n  usePlug({ pluggable, id, renderer, dependencies, options });\n  return null;\n};\n\nexport function createPluggable(name) {\n  const pluggable = (props) =>\n    React.createElement(Pluggable, { name, ...props });\n  pluggable.pluggableName = name;\n  pluggable.Plug = createPlugComponent(name);\n  return pluggable;\n}\n\nfunction createPlugComponent(pluggableName) {\n  const plugComponent = (props) =>\n    React.createElement(Plug, { pluggable: pluggableName, ...props });\n  plugComponent.displayName = `Pluggables(${pluggableName})`;\n  return plugComponent;\n}\n\n/**\n * Creates a Pluggable + Plug pair\n */\nexport function createPluggableAndPlug(name) {\n  const boundPluggable = createPluggable(name);\n  return [boundPluggable, boundPluggable.Plug];\n}\n\nexport const PluggablesProvider = ({ children }) => {\n  const setPlug = (pluggable, id, renderer) => {\n    Object.assign(renderer, { id });\n\n    setPluggables((prevState) => ({\n      ...prevState,\n      pluggables: {\n        ...prevState.pluggables,\n        [pluggable]: sortBy(\n          [\n            ...(prevState.pluggables[pluggable] || []).filter(\n              (e) => e.id !== id,\n            ),\n            renderer,\n          ],\n          (e) => e.order || 0,\n        ),\n      },\n    }));\n  };\n\n  const removePlug = (pluggable, name) => {\n    setPluggables((prevState) => ({\n      ...prevState,\n      pluggables: {\n        ...prevState.pluggables,\n        [pluggable]: sortBy(\n          (prevState.pluggables[pluggable] || []).filter((e) => e.id !== name),\n          (e) => e.order || 0,\n        ),\n      },\n    }));\n  };\n\n  const initialPluggables = {\n    pluggables: {},\n    setPlug,\n    removePlug,\n  };\n\n  const [pluggables, setPluggables] = React.useState(initialPluggables);\n  return React.createElement(context.Provider, { value: pluggables }, children);\n};\n\nexport default Pluggable;\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}