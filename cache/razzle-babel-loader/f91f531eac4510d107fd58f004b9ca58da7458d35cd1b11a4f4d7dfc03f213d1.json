{"ast":null,"code":"import _extends from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/extends.js\";\nimport _objectSpread from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _toConsumableArray from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nvar _jsxFileName = \"/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-widget-dataprovenance/src/components/theme/Widgets/DataProvenance.jsx\",\n  _this = this;\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { Accordion, Button, Segment } from 'semantic-ui-react';\nimport { Icon as VoltoIcon, FormFieldWrapper, DragDropList } from '@plone/volto/components';\nimport { ObjectWidget } from '@plone/volto/components';\nimport deleteSVG from '@plone/volto/icons/delete.svg';\nimport addSVG from '@plone/volto/icons/add.svg';\nimport dragSVG from '@plone/volto/icons/drag.svg';\nimport { v4 as uuid } from 'uuid';\nimport Schema from './schema';\nimport './style.css';\nexport var DataProvenance = function DataProvenance(props) {\n  var id = props.id,\n    _props$value = props.value,\n    value = _props$value === void 0 ? [] : _props$value,\n    _onChange = props.onChange,\n    _props$defaultData = props.defaultData,\n    defaultData = _props$defaultData === void 0 ? {} : _props$defaultData;\n  var predefinedSchema = Schema(props);\n  var flatListValue = (value === null || value === void 0 ? void 0 : value.data) || [];\n  return __jsx(React.Fragment, null, __jsx(FormFieldWrapper, _extends({}, props, {\n    className: \"objectlist-inline-widget\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    compact: true,\n    type: \"button\",\n    onClick: function onClick(e) {\n      _onChange(id, {\n        data: [].concat(_toConsumableArray(flatListValue), [_objectSpread({\n          '@id': uuid()\n        }, defaultData)])\n      });\n      e.stopPropagation();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 11\n    }\n  }, __jsx(VoltoIcon, {\n    name: addSVG,\n    size: \"12px\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }\n  }), \"Add \".concat(predefinedSchema.title)))), __jsx(DragDropList, {\n    childList: flatListValue.map(function (o) {\n      return [o['@id'], o];\n    }),\n    onMoveItem: function onMoveItem(result) {\n      var source = result.source,\n        destination = result.destination;\n      if (!destination) {\n        return;\n      }\n      var first = flatListValue[source.index];\n      var second = flatListValue[destination.index];\n      flatListValue[destination.index] = first;\n      flatListValue[source.index] = second;\n      _onChange(id, {\n        data: flatListValue\n      });\n      return true;\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, function (_ref) {\n    var child = _ref.child,\n      childId = _ref.childId,\n      index = _ref.index,\n      draginfo = _ref.draginfo;\n    return __jsx(\"div\", _extends({\n      ref: draginfo.innerRef\n    }, draginfo.draggableProps, {\n      key: childId,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }\n    }), __jsx(Segment.Group, {\n      raised: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 15\n      }\n    }, __jsx(Accordion, {\n      key: index,\n      fluid: true,\n      styled: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }\n    }, __jsx(Accordion.Title, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 19\n      }\n    }, __jsx(\"button\", _extends({\n      style: {\n        visibility: 'visible',\n        display: 'inline-block'\n      }\n    }, draginfo.dragHandleProps, {\n      className: \"drag handle\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 21\n      }\n    }), __jsx(VoltoIcon, {\n      name: dragSVG,\n      size: \"18px\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 23\n      }\n    })), \"\".concat(predefinedSchema.title, \" #\").concat(index + 1), __jsx(\"button\", {\n      onClick: function onClick() {\n        _onChange(id, {\n          data: flatListValue.filter(function (v, i) {\n            return i !== index;\n          })\n        });\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }\n    }, __jsx(VoltoIcon, {\n      name: deleteSVG,\n      size: \"16px\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 23\n      }\n    }))), __jsx(Accordion.Content, {\n      active: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 19\n      }\n    }, __jsx(Segment, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }\n    }, __jsx(ObjectWidget, {\n      id: \"\".concat(id, \"-\").concat(index),\n      key: \"ow-\".concat(id, \"-\").concat(index),\n      schema: predefinedSchema,\n      value: child,\n      onChange: function onChange(fi, fv) {\n        var newvalue = flatListValue.map(function (v, i) {\n          return i !== index ? v : fv;\n        });\n        _onChange(id, {\n          data: newvalue\n        });\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 23\n      }\n    }))))));\n  }));\n};\n_c = DataProvenance;\nvar _c;\n$RefreshReg$(_c, \"DataProvenance\");","map":{"version":3,"names":["React","Accordion","Button","Segment","Icon","VoltoIcon","FormFieldWrapper","DragDropList","ObjectWidget","deleteSVG","addSVG","dragSVG","v4","uuid","Schema","DataProvenance","props","id","value","onChange","defaultData","predefinedSchema","flatListValue","data","e","stopPropagation","title","map","o","result","source","destination","first","index","second","child","childId","draginfo","innerRef","draggableProps","visibility","display","dragHandleProps","filter","v","i","fi","fv","newvalue"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-widget-dataprovenance/src/components/theme/Widgets/DataProvenance.jsx"],"sourcesContent":["import React from 'react';\nimport { Accordion, Button, Segment } from 'semantic-ui-react';\nimport {\n  Icon as VoltoIcon,\n  FormFieldWrapper,\n  DragDropList,\n} from '@plone/volto/components';\nimport { ObjectWidget } from '@plone/volto/components';\n\nimport deleteSVG from '@plone/volto/icons/delete.svg';\nimport addSVG from '@plone/volto/icons/add.svg';\nimport dragSVG from '@plone/volto/icons/drag.svg';\nimport { v4 as uuid } from 'uuid';\nimport Schema from './schema';\nimport './style.css';\n\nexport const DataProvenance = (props) => {\n  const { id, value = [], onChange, defaultData = {} } = props;\n  const predefinedSchema = Schema(props);\n  const flatListValue = value?.data || [];\n  return (\n    <>\n      <FormFieldWrapper {...props} className=\"objectlist-inline-widget\">\n        <div>\n          <Button\n            compact\n            type=\"button\"\n            onClick={(e) => {\n              onChange(id, {\n                data: [\n                  ...flatListValue,\n                  {\n                    '@id': uuid(),\n                    ...defaultData,\n                  },\n                ],\n              });\n              e.stopPropagation();\n            }}\n          >\n            <VoltoIcon name={addSVG} size=\"12px\" />\n            {`Add ${predefinedSchema.title}`}\n          </Button>\n        </div>\n      </FormFieldWrapper>\n      <DragDropList\n        childList={flatListValue.map((o) => [o['@id'], o])}\n        onMoveItem={(result) => {\n          const { source, destination } = result;\n          if (!destination) {\n            return;\n          }\n\n          const first = flatListValue[source.index];\n          const second = flatListValue[destination.index];\n          flatListValue[destination.index] = first;\n          flatListValue[source.index] = second;\n\n          onChange(id, { data: flatListValue });\n          return true;\n        }}\n      >\n        {({ child, childId, index, draginfo }) => {\n          return (\n            <div\n              ref={draginfo.innerRef}\n              {...draginfo.draggableProps}\n              key={childId}\n            >\n              <Segment.Group raised>\n                <Accordion key={index} fluid styled>\n                  <Accordion.Title>\n                    <button\n                      style={{\n                        visibility: 'visible',\n                        display: 'inline-block',\n                      }}\n                      {...draginfo.dragHandleProps}\n                      className=\"drag handle\"\n                    >\n                      <VoltoIcon name={dragSVG} size=\"18px\" />\n                    </button>\n\n                    {`${predefinedSchema.title} #${index + 1}`}\n                    <button\n                      onClick={() => {\n                        onChange(id, {\n                          data: flatListValue.filter((v, i) => i !== index),\n                        });\n                      }}\n                    >\n                      <VoltoIcon name={deleteSVG} size=\"16px\" />\n                    </button>\n                  </Accordion.Title>\n                  <Accordion.Content active>\n                    <Segment>\n                      <ObjectWidget\n                        id={`${id}-${index}`}\n                        key={`ow-${id}-${index}`}\n                        schema={predefinedSchema}\n                        value={child}\n                        onChange={(fi, fv) => {\n                          const newvalue = flatListValue.map((v, i) =>\n                            i !== index ? v : fv,\n                          );\n                          onChange(id, { data: newvalue });\n                        }}\n                      />\n                    </Segment>\n                  </Accordion.Content>\n                </Accordion>\n              </Segment.Group>\n            </div>\n          );\n        }}\n      </DragDropList>\n    </>\n  );\n};\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}