{"ast":null,"code":"import _objectSpread from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _isMatch from \"lodash/isMatch\";\nimport { getBaseUrl, flattenToAppURL } from '@plone/volto/helpers';\nexport var isActive = function isActive(url, pathname) {\n  return url === '' && pathname === '/' || url !== '' && _isMatch(pathname === null || pathname === void 0 ? void 0 : pathname.split('/'), url === null || url === void 0 ? void 0 : url.split('/'));\n};\nexport var getNavigationByParent = function getNavigationByParent(items, parent) {\n  if (items && parent !== undefined && typeof parent === 'string') {\n    var pathnameArray = removeValue(parent.split('/'), '');\n    var location = pathnameArray;\n    var depth = pathnameArray.length;\n    if (!depth) {\n      return items;\n    }\n    return deepSearch({\n      inputArray: items,\n      location: location,\n      depth: depth\n    });\n  }\n  return {};\n};\nvar formatNavUrl = function formatNavUrl(nav) {\n  return nav.map(function (navItem) {\n    return _objectSpread(_objectSpread({}, navItem), {}, {\n      url: navItem.url ? getBasePath(navItem.url) : '',\n      items: navItem.items ? formatNavUrl(navItem.items) : false\n    });\n  });\n};\nexport var deepSearch = function deepSearch(_ref) {\n  var _ref$inputArray = _ref.inputArray,\n    inputArray = _ref$inputArray === void 0 ? [] : _ref$inputArray,\n    location = _ref.location,\n    depth = _ref.depth,\n    _ref$start = _ref.start,\n    start = _ref$start === void 0 ? 1 : _ref$start;\n  // if (inputArray[0]?.url?.contains('http')) {\n  inputArray = formatNavUrl(inputArray);\n  // }\n\n  for (var index = 0; index < inputArray.length; index++) {\n    var _inputArray$index$url, _inputArray$index$url2;\n    if (depth === 1 && removeValue((_inputArray$index$url = inputArray[index].url) === null || _inputArray$index$url === void 0 ? void 0 : _inputArray$index$url.split('/'), '')[start - 1] === location[start - 1]) {\n      return inputArray[index] || {};\n    }\n    if (removeValue((_inputArray$index$url2 = inputArray[index].url) === null || _inputArray$index$url2 === void 0 ? void 0 : _inputArray$index$url2.split('/'), '')[start - 1] === location[start - 1]) {\n      return deepSearch({\n        inputArray: inputArray[index].items,\n        location: location,\n        depth: depth - 1,\n        start: start + 1\n      });\n    }\n  }\n  return null;\n};\nexport function removeValue(arr) {\n  if (!arr || arr.length === 0) return [];\n  var what,\n    a = arguments,\n    L = a.length,\n    ax;\n  while (L > 1 && arr.length) {\n    what = a[--L];\n    while ((ax = arr.indexOf(what)) !== -1) {\n      arr.splice(ax, 1);\n    }\n  }\n  return arr;\n}\nexport function getBasePath(url) {\n  return url && flattenToAppURL(getBaseUrl(url));\n}","map":{"version":3,"names":["getBaseUrl","flattenToAppURL","isActive","url","pathname","split","getNavigationByParent","items","parent","undefined","pathnameArray","removeValue","location","depth","length","deepSearch","inputArray","formatNavUrl","nav","map","navItem","getBasePath","start","index","arr","what","a","arguments","L","ax","indexOf","splice"],"sources":["/home/tooler/code/work/forests-frontend/src/develop/volto-forests-theme/src/components/manage/Blocks/NavigationBlock/helpers.js"],"sourcesContent":["import { isMatch } from 'lodash';\nimport { getBaseUrl, flattenToAppURL } from '@plone/volto/helpers';\n\nexport const isActive = (url, pathname) => {\n  return (\n    (url === '' && pathname === '/') ||\n    (url !== '' && isMatch(pathname?.split('/'), url?.split('/')))\n  );\n};\n\nexport const getNavigationByParent = (items, parent) => {\n  if (items && parent !== undefined && typeof parent === 'string') {\n    const pathnameArray = removeValue(parent.split('/'), '');\n    const location = pathnameArray;\n    const depth = pathnameArray.length;\n    if (!depth) {\n      return items;\n    }\n\n    return deepSearch({\n      inputArray: items,\n      location,\n      depth,\n    });\n  }\n  return {};\n};\n\nconst formatNavUrl = (nav) => {\n  return nav.map((navItem) => ({\n    ...navItem,\n    url: navItem.url ? getBasePath(navItem.url) : '',\n    items: navItem.items ? formatNavUrl(navItem.items) : false,\n  }));\n};\n\nexport const deepSearch = ({ inputArray = [], location, depth, start = 1 }) => {\n  // if (inputArray[0]?.url?.contains('http')) {\n  inputArray = formatNavUrl(inputArray);\n  // }\n\n  for (let index = 0; index < inputArray.length; index++) {\n    if (\n      depth === 1 &&\n      removeValue(inputArray[index].url?.split('/'), '')[start - 1] ===\n        location[start - 1]\n    ) {\n      return inputArray[index] || {};\n    }\n    if (\n      removeValue(inputArray[index].url?.split('/'), '')[start - 1] ===\n      location[start - 1]\n    ) {\n      return deepSearch({\n        inputArray: inputArray[index].items,\n        location,\n        depth: depth - 1,\n        start: start + 1,\n      });\n    }\n  }\n\n  return null;\n};\n\nexport function removeValue(arr) {\n  if (!arr || arr.length === 0) return [];\n  let what,\n    a = arguments,\n    L = a.length,\n    ax;\n  while (L > 1 && arr.length) {\n    what = a[--L];\n    while ((ax = arr.indexOf(what)) !== -1) {\n      arr.splice(ax, 1);\n    }\n  }\n  return arr;\n}\n\nexport function getBasePath(url) {\n  return url && flattenToAppURL(getBaseUrl(url));\n}\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}