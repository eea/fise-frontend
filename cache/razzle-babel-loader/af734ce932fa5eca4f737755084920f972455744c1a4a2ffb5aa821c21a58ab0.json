{"ast":null,"code":"var _jsxFileName = \"/home/tooler/code/work/forests-frontend/src/develop/volto-forests-theme/src/customizations/volto/components/theme/Header/Header.jsx\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { Container } from 'semantic-ui-react';\nimport { connect } from 'react-redux';\nimport { Logo, Navigation, Breadcrumbs } from '@plone/volto/components';\nimport HeaderImage from '@eeacms/volto-forests-theme/components/theme/Header/HeaderImage';\nimport HomepageSlider from '@eeacms/volto-forests-theme/components/theme/Header/HomepageSlider';\nimport MobileSearchWidget from '@eeacms/volto-forests-theme/components/theme/MobileSearchWidget/MobileSearchWidget';\nimport Sticky from 'react-stickynode';\nimport HeaderBackground from './header-bg.png';\nimport { getBasePath, getNavigationByParent } from '@eeacms/volto-forests-theme/components/manage/Blocks/NavigationBlock/helpers';\nimport { getParentFolderData } from '@eeacms/volto-forests-theme/actions';\nconst Header = props => {\n  const {\n    inheritLeadingData,\n    parentData,\n    leadNavigation,\n    bigLeading,\n    leadImageCaption\n  } = props.extraData;\n  const [isHomepage, setIsHomePage] = React.useState(props.actualPathName === '/');\n  const [inheritedImage, setInheritedImage] = React.useState('');\n  const [leadCaptionText, setLeadCaptionText] = React.useState('');\n  const [navigationItems, setNavigationItems] = React.useState('');\n  React.useEffect(() => {\n    if (leadNavigation || inheritLeadingData) {\n      if (!props.parentItems || props.parentItems.length === 0) {\n        props.getParentFolderData(getBasePath(parentData['@id']));\n      }\n      if (props.parentItems && props.parentItems.length > 0) {\n        const parentItems = getNavigationByParent(props.navItems, getBasePath(parentData['@id']));\n        if (leadNavigation) setNavigationItems(parentItems.items);\n      }\n      if (inheritLeadingData) {\n        if (props.parentImg && props.parentImg.download) setInheritedImage(props.parentImg.download);\n        if (props.leadCaption) setLeadCaptionText(props.leadCaption);\n      }\n      if (!inheritLeadingData) {\n        setLeadCaptionText(leadImageCaption.data);\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.parentItems, props.parentImg, inheritLeadingData, props.leadCaption, parentData, leadNavigation]);\n  React.useEffect(() => {\n    if (props.actualPathName) {\n      setIsHomePage(props.actualPathName === '/');\n    }\n  }, [props.actualPathName, props.frontPageSlides]);\n  const defaultHeaderImage = props.defaultHeaderImage;\n  let headerImageUrl = (defaultHeaderImage === null || defaultHeaderImage === void 0 ? void 0 : defaultHeaderImage.image) || defaultHeaderImage;\n  const pathName = props.pathname;\n  const hideSearch = ['/header', '/head', '/footer'].includes(pathName);\n  return __jsx(\"div\", {\n    className: \"header-wrapper\",\n    role: \"banner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, __jsx(Sticky, {\n    enabled: true,\n    top: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"logo-nav-wrapper space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  }, __jsx(Logo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  })), !hideSearch ? __jsx(\"div\", {\n    className: \"nav-actions-mobile large screen hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"search-widget\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 19\n    }\n  }, __jsx(MobileSearchWidget, {\n    pathname: props.pathname,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  }))) : null, __jsx(Navigation, {\n    navigation: props.navigationItems,\n    pathname: props.pathname,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 15\n    }\n  }))))), __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: `header-bg ${isHomepage ? 'homepage' : 'contentpage'}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, __jsx(\"img\", {\n    src: HeaderBackground,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  })), isHomepage ? __jsx(HomepageSlider, {\n    items: props.frontpage_slides,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }) : __jsx(\"div\", {\n    style: {\n      position: 'relative'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, __jsx(Breadcrumbs, {\n    pathname: props.pathname,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }), __jsx(HeaderImage, {\n    bigImage: bigLeading,\n    leadNavigation: leadNavigation,\n    navigationItems: navigationItems,\n    metadata: inheritLeadingData || leadImageCaption ? leadCaptionText : '',\n    url: inheritLeadingData ? inheritedImage : headerImageUrl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }))));\n};\nexport default connect(state => {\n  var _state$navigation, _state$parent_folder_, _state$parent_folder_2, _state$parent_folder_3, _state$parent_folder_4, _state$parent_folder_5, _state$parent_folder_6, _state$parent_folder_7;\n  return {\n    token: state.userSession.token,\n    navItems: (_state$navigation = state.navigation) === null || _state$navigation === void 0 ? void 0 : _state$navigation.items,\n    parentItems: (_state$parent_folder_ = state.parent_folder_data) === null || _state$parent_folder_ === void 0 ? void 0 : (_state$parent_folder_2 = _state$parent_folder_.items) === null || _state$parent_folder_2 === void 0 ? void 0 : _state$parent_folder_2.items,\n    parentImg: (_state$parent_folder_3 = state.parent_folder_data) === null || _state$parent_folder_3 === void 0 ? void 0 : (_state$parent_folder_4 = _state$parent_folder_3.items) === null || _state$parent_folder_4 === void 0 ? void 0 : _state$parent_folder_4.image,\n    leadCaption: (_state$parent_folder_5 = state.parent_folder_data) === null || _state$parent_folder_5 === void 0 ? void 0 : (_state$parent_folder_6 = _state$parent_folder_5.items) === null || _state$parent_folder_6 === void 0 ? void 0 : (_state$parent_folder_7 = _state$parent_folder_6.lead_image_caption) === null || _state$parent_folder_7 === void 0 ? void 0 : _state$parent_folder_7.data\n  };\n}, {\n  getParentFolderData\n})(Header);","map":{"version":3,"names":["React","Container","connect","Logo","Navigation","Breadcrumbs","HeaderImage","HomepageSlider","MobileSearchWidget","Sticky","HeaderBackground","getBasePath","getNavigationByParent","getParentFolderData","Header","props","inheritLeadingData","parentData","leadNavigation","bigLeading","leadImageCaption","extraData","isHomepage","setIsHomePage","useState","actualPathName","inheritedImage","setInheritedImage","leadCaptionText","setLeadCaptionText","navigationItems","setNavigationItems","useEffect","parentItems","length","navItems","items","parentImg","download","leadCaption","data","frontPageSlides","defaultHeaderImage","headerImageUrl","image","pathName","pathname","hideSearch","includes","frontpage_slides","position","state","token","userSession","navigation","parent_folder_data","lead_image_caption"],"sources":["/home/tooler/code/work/forests-frontend/src/develop/volto-forests-theme/src/customizations/volto/components/theme/Header/Header.jsx"],"sourcesContent":["import React from 'react';\nimport { Container } from 'semantic-ui-react';\nimport { connect } from 'react-redux';\n\nimport { Logo, Navigation, Breadcrumbs } from '@plone/volto/components';\nimport HeaderImage from '@eeacms/volto-forests-theme/components/theme/Header/HeaderImage';\nimport HomepageSlider from '@eeacms/volto-forests-theme/components/theme/Header/HomepageSlider';\nimport MobileSearchWidget from '@eeacms/volto-forests-theme/components/theme/MobileSearchWidget/MobileSearchWidget';\nimport Sticky from 'react-stickynode';\nimport HeaderBackground from './header-bg.png';\nimport {\n  getBasePath,\n  getNavigationByParent,\n} from '@eeacms/volto-forests-theme/components/manage/Blocks/NavigationBlock/helpers';\nimport { getParentFolderData } from '@eeacms/volto-forests-theme/actions';\n\nconst Header = (props) => {\n  const {\n    inheritLeadingData,\n    parentData,\n    leadNavigation,\n    bigLeading,\n    leadImageCaption,\n  } = props.extraData;\n  const [isHomepage, setIsHomePage] = React.useState(\n    props.actualPathName === '/',\n  );\n  const [inheritedImage, setInheritedImage] = React.useState('');\n  const [leadCaptionText, setLeadCaptionText] = React.useState('');\n  const [navigationItems, setNavigationItems] = React.useState('');\n\n  React.useEffect(() => {\n    if (leadNavigation || inheritLeadingData) {\n      if (!props.parentItems || props.parentItems.length === 0) {\n        props.getParentFolderData(getBasePath(parentData['@id']));\n      }\n      if (props.parentItems && props.parentItems.length > 0) {\n        const parentItems = getNavigationByParent(\n          props.navItems,\n          getBasePath(parentData['@id']),\n        );\n        if (leadNavigation) setNavigationItems(parentItems.items);\n      }\n      if (inheritLeadingData) {\n        if (props.parentImg && props.parentImg.download)\n          setInheritedImage(props.parentImg.download);\n        if (props.leadCaption) setLeadCaptionText(props.leadCaption);\n      }\n      if (!inheritLeadingData) {\n        setLeadCaptionText(leadImageCaption.data);\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    props.parentItems,\n    props.parentImg,\n    inheritLeadingData,\n    props.leadCaption,\n    parentData,\n    leadNavigation,\n  ]);\n\n  React.useEffect(() => {\n    if (props.actualPathName) {\n      setIsHomePage(props.actualPathName === '/');\n    }\n  }, [props.actualPathName, props.frontPageSlides]);\n\n  const defaultHeaderImage = props.defaultHeaderImage;\n  let headerImageUrl = defaultHeaderImage?.image || defaultHeaderImage;\n  const pathName = props.pathname;\n  const hideSearch = ['/header', '/head', '/footer'].includes(pathName);\n\n  return (\n    <div className=\"header-wrapper\" role=\"banner\">\n      <Sticky enabled={true} top={0}>\n        <Container>\n          <div className=\"header\">\n            <div className=\"logo-nav-wrapper space-between\">\n              <div className=\"logo\">\n                <Logo />\n              </div>\n              {!hideSearch ? (\n                <div className=\"nav-actions-mobile large screen hidden\">\n                  <div className=\"search-widget\">\n                    <MobileSearchWidget pathname={props.pathname} />\n                  </div>\n                </div>\n              ) : null}\n              <Navigation\n                navigation={props.navigationItems}\n                pathname={props.pathname}\n              />\n            </div>\n          </div>\n        </Container>\n      </Sticky>\n      <Container>\n        <div className={`header-bg ${isHomepage ? 'homepage' : 'contentpage'}`}>\n          <img src={HeaderBackground} alt=\"\" />\n        </div>\n\n        {isHomepage ? (\n          <HomepageSlider items={props.frontpage_slides} />\n        ) : (\n          <div style={{ position: 'relative' }}>\n            <Breadcrumbs pathname={props.pathname} />\n            <HeaderImage\n              bigImage={bigLeading}\n              leadNavigation={leadNavigation}\n              navigationItems={navigationItems}\n              metadata={\n                inheritLeadingData || leadImageCaption ? leadCaptionText : ''\n              }\n              url={inheritLeadingData ? inheritedImage : headerImageUrl}\n            />\n          </div>\n        )}\n      </Container>\n    </div>\n  );\n};\nexport default connect(\n  (state) => ({\n    token: state.userSession.token,\n    navItems: state.navigation?.items,\n    parentItems: state.parent_folder_data?.items?.items,\n    parentImg: state.parent_folder_data?.items?.image,\n    leadCaption: state.parent_folder_data?.items?.lead_image_caption?.data,\n  }),\n  {\n    getParentFolderData,\n  },\n)(Header);\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}