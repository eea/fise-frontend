{"ast":null,"code":"var _jsxFileName = \"/home/tooler/code/work/forests-frontend/src/develop/volto-forests-theme/src/components/theme/NewsView/NewsView.jsx\",\n  _this = this,\n  _s = $RefreshSig$();\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { Helmet, BodyClass } from '@plone/volto/helpers';\nimport { Container } from 'semantic-ui-react';\nimport { Icon } from '@plone/volto/components';\nimport { Link } from 'react-router-dom';\nimport NewsItem from './NewsItem';\nimport downKey from '@plone/volto/icons/down-key.svg';\nimport rss from '@plone/volto/icons/rss.svg';\nvar getItems = function getItems(items) {\n  return items && items.sort(function (a, b) {\n    return new Date(b.start) - new Date(a.start);\n  }).sort(function (a, b) {\n    return new Date(b.effective) - new Date(a.effective);\n  }).map(function (item, index) {\n    return {\n      '@id': item['@id'],\n      '@type': item['@type'],\n      date: item.effective,\n      start: item.start,\n      end: item.end,\n      location: item.location,\n      title: item.title,\n      image: item.image,\n      description: item.description,\n      text: item.text,\n      initial_index: index,\n      topics: item.topics,\n      blocks: item.blocks,\n      blocks_layout: item.blocks_layout\n    };\n  });\n};\nvar getTitle = function getTitle(propsLocation) {\n  var title = propsLocation.pathname.split('/')[1].toLowerCase();\n  return {\n    lowerCase: title,\n    capitalized: title.charAt(0).toUpperCase() + title.slice(1)\n  };\n};\nvar NewsView = function NewsView(props) {\n  _s();\n  var _useState = useState(6),\n    show = _useState[0],\n    setShow = _useState[1];\n  var limit = 6;\n  var grid = {\n    phone: 'twelve',\n    tablet: 'twelve',\n    desktop: 'twelve',\n    widescreen: 'twelve'\n  };\n  var title = getTitle(props.location);\n  var items = getItems(props.content.items);\n  if (!items) return __jsx(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 22\n    }\n  }, title.capitalized);\n  var rssButton = __jsx(Link, {\n    className: \"rss-feed\",\n    to: \"rss-feed\",\n    color: \"teal\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, \"Subscribe via RSS\"), __jsx(Icon, {\n    name: rss,\n    size: \"14px\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }));\n  var itemsByYear = {};\n  items.forEach(function (item) {\n    var year;\n    //  For events\n    if (item.start) year = new Date(item.start).getFullYear();\n    //  For news\n    else if (item.date) year = new Date(item.date).getFullYear();\n    if (!itemsByYear[year]) itemsByYear[year] = [];\n    itemsByYear[year].push(item);\n  });\n  return __jsx(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, __jsx(Helmet, {\n    title: title.capitalized,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    className: \"news-page-content\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, __jsx(BodyClass, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }), rssButton, __jsx(\"div\", {\n    className: \"news-wrapper-view \".concat(props.layout_type, \"-\").concat(grid[props.layout_type]),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, itemsByYear && Object.keys(itemsByYear).sort(function (a, b) {\n    return b - a;\n  }).map(function (year, yearIndex) {\n    return itemsByYear[year].map(function (item, index) {\n      if (item.initial_index < show) {\n        return __jsx(React.Fragment, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 23\n          }\n        }, index === 0 ? __jsx(\"h2\", {\n          className: \"text-center\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 27\n          }\n        }, year !== 'undefined' ? year : '') : '', __jsx(NewsItem, {\n          key: item.id,\n          item: item,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 25\n          }\n        }));\n      }\n      return '';\n    });\n  })), (items === null || items === void 0 ? void 0 : items.length) > limit && show <= limit && __jsx(\"button\", {\n    className: \"news-expand-button\",\n    onClick: function onClick() {\n      setShow(items === null || items === void 0 ? void 0 : items.length);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }, __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }), __jsx(Icon, {\n    name: downKey,\n    size: \"60px\",\n    color: \"#E7E7E7\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }), __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }))));\n};\n_s(NewsView, \"l6IyR9tnEP98aN09V3qz6R+AQnc=\");\n_c = NewsView;\nexport default NewsView;\nvar _c;\n$RefreshReg$(_c, \"NewsView\");","map":{"version":3,"names":["React","useState","Helmet","BodyClass","Container","Icon","Link","NewsItem","downKey","rss","getItems","items","sort","a","b","Date","start","effective","map","item","index","date","end","location","title","image","description","text","initial_index","topics","blocks","blocks_layout","getTitle","propsLocation","pathname","split","toLowerCase","lowerCase","capitalized","charAt","toUpperCase","slice","NewsView","props","show","setShow","limit","grid","phone","tablet","desktop","widescreen","content","rssButton","itemsByYear","forEach","year","getFullYear","push","layout_type","Object","keys","yearIndex","id","length"],"sources":["/home/tooler/code/work/forests-frontend/src/develop/volto-forests-theme/src/components/theme/NewsView/NewsView.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Helmet, BodyClass } from '@plone/volto/helpers';\nimport { Container } from 'semantic-ui-react';\nimport { Icon } from '@plone/volto/components';\nimport { Link } from 'react-router-dom';\nimport NewsItem from './NewsItem';\nimport downKey from '@plone/volto/icons/down-key.svg';\nimport rss from '@plone/volto/icons/rss.svg';\n\nconst getItems = (items) => {\n  return (\n    items &&\n    items\n      .sort((a, b) => {\n        return new Date(b.start) - new Date(a.start);\n      })\n      .sort((a, b) => {\n        return new Date(b.effective) - new Date(a.effective);\n      })\n      .map((item, index) => ({\n        '@id': item['@id'],\n        '@type': item['@type'],\n        date: item.effective,\n        start: item.start,\n        end: item.end,\n        location: item.location,\n        title: item.title,\n        image: item.image,\n        description: item.description,\n        text: item.text,\n        initial_index: index,\n        topics: item.topics,\n        blocks: item.blocks,\n        blocks_layout: item.blocks_layout,\n      }))\n  );\n};\n\nconst getTitle = (propsLocation) => {\n  const title = propsLocation.pathname.split('/')[1].toLowerCase();\n  return {\n    lowerCase: title,\n    capitalized: title.charAt(0).toUpperCase() + title.slice(1),\n  };\n};\n\nconst NewsView = (props) => {\n  const [show, setShow] = useState(6);\n  const limit = 6;\n  const grid = {\n    phone: 'twelve',\n    tablet: 'twelve',\n    desktop: 'twelve',\n    widescreen: 'twelve',\n  };\n  const title = getTitle(props.location);\n  const items = getItems(props.content.items);\n\n  if (!items) return <h1>{title.capitalized}</h1>;\n  const rssButton = (\n    <Link className=\"rss-feed\" to=\"rss-feed\" color=\"teal\">\n      <span>Subscribe via RSS</span>\n      <Icon name={rss} size=\"14px\" />\n    </Link>\n  );\n\n  const itemsByYear = {};\n  items.forEach((item) => {\n    let year;\n    //  For events\n    if (item.start) year = new Date(item.start).getFullYear();\n    //  For news\n    else if (item.date) year = new Date(item.date).getFullYear();\n    if (!itemsByYear[year]) itemsByYear[year] = [];\n    itemsByYear[year].push(item);\n  });\n\n  return (\n    <Container>\n      <Helmet title={title.capitalized} />\n      <div className=\"news-page-content\">\n        <BodyClass />\n        {rssButton}\n        <div\n          className={`news-wrapper-view ${props.layout_type}-${\n            grid[props.layout_type]\n          }`}\n        >\n          {itemsByYear &&\n            Object.keys(itemsByYear)\n              .sort((a, b) => b - a)\n              .map((year, yearIndex) => {\n                return itemsByYear[year].map((item, index) => {\n                  if (item.initial_index < show) {\n                    return (\n                      <React.Fragment>\n                        {index === 0 ? (\n                          <h2 className=\"text-center\">\n                            {year !== 'undefined' ? year : ''}\n                          </h2>\n                        ) : (\n                          ''\n                        )}\n                        <NewsItem key={item.id} item={item} />\n                      </React.Fragment>\n                    );\n                  }\n                  return '';\n                });\n              })}\n        </div>\n        {items?.length > limit && show <= limit && (\n          <button\n            className=\"news-expand-button\"\n            onClick={() => {\n              setShow(items?.length);\n            }}\n          >\n            <span />\n            <Icon name={downKey} size=\"60px\" color=\"#E7E7E7\" />\n            <span />\n          </button>\n        )}\n      </div>\n    </Container>\n  );\n};\n\nexport default NewsView;\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}