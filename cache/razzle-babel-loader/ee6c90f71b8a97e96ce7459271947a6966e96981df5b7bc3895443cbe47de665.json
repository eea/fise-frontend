{"ast":null,"code":"export default (function (_ref) {\n  var draftJs = _ref.draftJs;\n  return {\n    createLinkAtSelection: function createLinkAtSelection(editorState, url) {\n      var contentState = editorState.getCurrentContent().createEntity('LINK', 'MUTABLE', {\n        url: url\n      });\n      var entityKey = contentState.getLastCreatedEntityKey();\n      var withLink = draftJs.RichUtils.toggleLink(editorState, editorState.getSelection(), entityKey);\n      return draftJs.EditorState.forceSelection(withLink, editorState.getSelection());\n    },\n    removeLinkAtSelection: function removeLinkAtSelection(editorState) {\n      var selection = editorState.getSelection();\n      return draftJs.RichUtils.toggleLink(editorState, selection, null);\n    },\n    getCurrentEntityKey: function getCurrentEntityKey(editorState) {\n      var selection = editorState.getSelection();\n      var anchorKey = selection.getAnchorKey();\n      var contentState = editorState.getCurrentContent();\n      var anchorBlock = contentState.getBlockForKey(anchorKey);\n      var index = selection.isBackward ? selection.focusOffset : selection.anchorOffset;\n      return anchorBlock.getEntityAt(index);\n    },\n    getCurrentEntity: function getCurrentEntity(editorState) {\n      var contentState = editorState.getCurrentContent();\n      var entityKey = this.getCurrentEntityKey(editorState);\n      return entityKey ? contentState.getEntity(entityKey) : null;\n    },\n    hasEntity: function hasEntity(editorState, entityType) {\n      var entity = this.getCurrentEntity(editorState);\n      return entity && entity.getType() === entityType;\n    }\n  };\n});","map":{"version":3,"names":["draftJs","createLinkAtSelection","editorState","url","contentState","getCurrentContent","createEntity","entityKey","getLastCreatedEntityKey","withLink","RichUtils","toggleLink","getSelection","EditorState","forceSelection","removeLinkAtSelection","selection","getCurrentEntityKey","anchorKey","getAnchorKey","anchorBlock","getBlockForKey","index","isBackward","focusOffset","anchorOffset","getEntityAt","getCurrentEntity","getEntity","hasEntity","entityType","entity","getType"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@plone/volto/src/components/manage/AnchorPlugin/utils/EditorUtils.js"],"sourcesContent":["export default ({ draftJs }) => ({\n  createLinkAtSelection(editorState, url) {\n    const contentState = editorState\n      .getCurrentContent()\n      .createEntity('LINK', 'MUTABLE', { url });\n    const entityKey = contentState.getLastCreatedEntityKey();\n    const withLink = draftJs.RichUtils.toggleLink(\n      editorState,\n      editorState.getSelection(),\n      entityKey,\n    );\n    return draftJs.EditorState.forceSelection(\n      withLink,\n      editorState.getSelection(),\n    );\n  },\n\n  removeLinkAtSelection(editorState) {\n    const selection = editorState.getSelection();\n    return draftJs.RichUtils.toggleLink(editorState, selection, null);\n  },\n\n  getCurrentEntityKey(editorState) {\n    const selection = editorState.getSelection();\n    const anchorKey = selection.getAnchorKey();\n    const contentState = editorState.getCurrentContent();\n    const anchorBlock = contentState.getBlockForKey(anchorKey);\n    const index = selection.isBackward\n      ? selection.focusOffset\n      : selection.anchorOffset;\n\n    return anchorBlock.getEntityAt(index);\n  },\n\n  getCurrentEntity(editorState) {\n    const contentState = editorState.getCurrentContent();\n    const entityKey = this.getCurrentEntityKey(editorState);\n    return entityKey ? contentState.getEntity(entityKey) : null;\n  },\n\n  hasEntity(editorState, entityType) {\n    const entity = this.getCurrentEntity(editorState);\n    return entity && entity.getType() === entityType;\n  },\n});\n"],"mappings":"AAAA,gBAAe;EAAA,IAAGA,OAAO,QAAPA,OAAO;EAAA,OAAQ;IAC/BC,qBAAqB,iCAACC,WAAW,EAAEC,GAAG,EAAE;MACtC,IAAMC,YAAY,GAAGF,WAAW,CAC7BG,iBAAiB,EAAE,CACnBC,YAAY,CAAC,MAAM,EAAE,SAAS,EAAE;QAAEH,GAAG,EAAHA;MAAI,CAAC,CAAC;MAC3C,IAAMI,SAAS,GAAGH,YAAY,CAACI,uBAAuB,EAAE;MACxD,IAAMC,QAAQ,GAAGT,OAAO,CAACU,SAAS,CAACC,UAAU,CAC3CT,WAAW,EACXA,WAAW,CAACU,YAAY,EAAE,EAC1BL,SAAS,CACV;MACD,OAAOP,OAAO,CAACa,WAAW,CAACC,cAAc,CACvCL,QAAQ,EACRP,WAAW,CAACU,YAAY,EAAE,CAC3B;IACH,CAAC;IAEDG,qBAAqB,iCAACb,WAAW,EAAE;MACjC,IAAMc,SAAS,GAAGd,WAAW,CAACU,YAAY,EAAE;MAC5C,OAAOZ,OAAO,CAACU,SAAS,CAACC,UAAU,CAACT,WAAW,EAAEc,SAAS,EAAE,IAAI,CAAC;IACnE,CAAC;IAEDC,mBAAmB,+BAACf,WAAW,EAAE;MAC/B,IAAMc,SAAS,GAAGd,WAAW,CAACU,YAAY,EAAE;MAC5C,IAAMM,SAAS,GAAGF,SAAS,CAACG,YAAY,EAAE;MAC1C,IAAMf,YAAY,GAAGF,WAAW,CAACG,iBAAiB,EAAE;MACpD,IAAMe,WAAW,GAAGhB,YAAY,CAACiB,cAAc,CAACH,SAAS,CAAC;MAC1D,IAAMI,KAAK,GAAGN,SAAS,CAACO,UAAU,GAC9BP,SAAS,CAACQ,WAAW,GACrBR,SAAS,CAACS,YAAY;MAE1B,OAAOL,WAAW,CAACM,WAAW,CAACJ,KAAK,CAAC;IACvC,CAAC;IAEDK,gBAAgB,4BAACzB,WAAW,EAAE;MAC5B,IAAME,YAAY,GAAGF,WAAW,CAACG,iBAAiB,EAAE;MACpD,IAAME,SAAS,GAAG,IAAI,CAACU,mBAAmB,CAACf,WAAW,CAAC;MACvD,OAAOK,SAAS,GAAGH,YAAY,CAACwB,SAAS,CAACrB,SAAS,CAAC,GAAG,IAAI;IAC7D,CAAC;IAEDsB,SAAS,qBAAC3B,WAAW,EAAE4B,UAAU,EAAE;MACjC,IAAMC,MAAM,GAAG,IAAI,CAACJ,gBAAgB,CAACzB,WAAW,CAAC;MACjD,OAAO6B,MAAM,IAAIA,MAAM,CAACC,OAAO,EAAE,KAAKF,UAAU;IAClD;EACF,CAAC;AAAA,CAAC"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}