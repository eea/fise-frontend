{"ast":null,"code":"import _objectSpread from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport codeSVG from '@plone/volto/icons/row.svg';\nimport { GroupBlockEdit, GroupBlockView, GroupBlockLayout } from './components';\nvar applyConfig = function applyConfig(config) {\n  var choices = Object.keys(config.blocks.blocksConfig).map(function (key) {\n    var _config$blocks$blocks;\n    if ((_config$blocks$blocks = config.blocks.blocksConfig[key]) !== null && _config$blocks$blocks !== void 0 && _config$blocks$blocks.restricted) {\n      return false;\n    } else {\n      var _config$blocks$blocks2;\n      var title = ((_config$blocks$blocks2 = config.blocks.blocksConfig[key]) === null || _config$blocks$blocks2 === void 0 ? void 0 : _config$blocks$blocks2.title) || key;\n      return [key, title];\n    }\n  }).filter(function (val) {\n    return !!val;\n  });\n  choices.push(['group', 'Group']);\n  var schema = _objectSpread(_objectSpread({}, GroupBlockLayout), {}, {\n    properties: _objectSpread(_objectSpread({}, GroupBlockLayout.properties), {}, {\n      allowedBlocks: _objectSpread(_objectSpread({}, GroupBlockLayout.properties.allowedBlocks), {}, {\n        items: {\n          choices: choices\n        }\n      })\n    })\n  });\n  config.blocks.blocksConfig.group = {\n    id: 'group',\n    title: 'Section (Group)',\n    icon: codeSVG,\n    group: 'common',\n    view: GroupBlockView,\n    edit: GroupBlockEdit,\n    schema: schema,\n    restricted: false,\n    mostUsed: false,\n    blockHasOwnFocusManagement: true,\n    sidebarTab: 0,\n    security: {\n      addPermission: [],\n      view: []\n    }\n  };\n  return config;\n};\nexport default applyConfig;","map":{"version":3,"names":["codeSVG","GroupBlockEdit","GroupBlockView","GroupBlockLayout","applyConfig","config","choices","Object","keys","blocks","blocksConfig","map","key","restricted","title","filter","val","push","schema","properties","allowedBlocks","items","group","id","icon","view","edit","mostUsed","blockHasOwnFocusManagement","sidebarTab","security","addPermission"],"sources":["/home/tooler/code/work/forests-frontend/src/develop/volto-group-block/src/index.js"],"sourcesContent":["import codeSVG from '@plone/volto/icons/row.svg';\nimport { GroupBlockEdit, GroupBlockView, GroupBlockLayout } from './components';\n\nconst applyConfig = (config) => {\n  const choices = Object.keys(config.blocks.blocksConfig)\n    .map((key) => {\n      if (config.blocks.blocksConfig[key]?.restricted) {\n        return false;\n      } else {\n        const title = config.blocks.blocksConfig[key]?.title || key;\n        return [key, title];\n      }\n    })\n    .filter((val) => !!val);\n\n  choices.push(['group', 'Group']);\n\n  const schema = {\n    ...GroupBlockLayout,\n    properties: {\n      ...GroupBlockLayout.properties,\n      allowedBlocks: {\n        ...GroupBlockLayout.properties.allowedBlocks,\n        items: {\n          choices: choices,\n        },\n      },\n    },\n  };\n  config.blocks.blocksConfig.group = {\n    id: 'group',\n    title: 'Section (Group)',\n    icon: codeSVG,\n    group: 'common',\n    view: GroupBlockView,\n    edit: GroupBlockEdit,\n    schema: schema,\n    restricted: false,\n    mostUsed: false,\n    blockHasOwnFocusManagement: true,\n    sidebarTab: 0,\n    security: {\n      addPermission: [],\n      view: [],\n    },\n  };\n\n  return config;\n};\n\nexport default applyConfig;\n"],"mappings":";AAAA,OAAOA,OAAO,MAAM,4BAA4B;AAChD,SAASC,cAAc,EAAEC,cAAc,EAAEC,gBAAgB,QAAQ,cAAc;AAE/E,IAAMC,WAAW,GAAG,SAAdA,WAAW,CAAIC,MAAM,EAAK;EAC9B,IAAMC,OAAO,GAAGC,MAAM,CAACC,IAAI,CAACH,MAAM,CAACI,MAAM,CAACC,YAAY,CAAC,CACpDC,GAAG,CAAC,UAACC,GAAG,EAAK;IAAA;IACZ,6BAAIP,MAAM,CAACI,MAAM,CAACC,YAAY,CAACE,GAAG,CAAC,kDAA/B,sBAAiCC,UAAU,EAAE;MAC/C,OAAO,KAAK;IACd,CAAC,MAAM;MAAA;MACL,IAAMC,KAAK,GAAG,2BAAAT,MAAM,CAACI,MAAM,CAACC,YAAY,CAACE,GAAG,CAAC,2DAA/B,uBAAiCE,KAAK,KAAIF,GAAG;MAC3D,OAAO,CAACA,GAAG,EAAEE,KAAK,CAAC;IACrB;EACF,CAAC,CAAC,CACDC,MAAM,CAAC,UAACC,GAAG;IAAA,OAAK,CAAC,CAACA,GAAG;EAAA,EAAC;EAEzBV,OAAO,CAACW,IAAI,CAAC,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;EAEhC,IAAMC,MAAM,mCACPf,gBAAgB;IACnBgB,UAAU,kCACLhB,gBAAgB,CAACgB,UAAU;MAC9BC,aAAa,kCACRjB,gBAAgB,CAACgB,UAAU,CAACC,aAAa;QAC5CC,KAAK,EAAE;UACLf,OAAO,EAAEA;QACX;MAAC;IACF;EACF,EACF;EACDD,MAAM,CAACI,MAAM,CAACC,YAAY,CAACY,KAAK,GAAG;IACjCC,EAAE,EAAE,OAAO;IACXT,KAAK,EAAE,iBAAiB;IACxBU,IAAI,EAAExB,OAAO;IACbsB,KAAK,EAAE,QAAQ;IACfG,IAAI,EAAEvB,cAAc;IACpBwB,IAAI,EAAEzB,cAAc;IACpBiB,MAAM,EAAEA,MAAM;IACdL,UAAU,EAAE,KAAK;IACjBc,QAAQ,EAAE,KAAK;IACfC,0BAA0B,EAAE,IAAI;IAChCC,UAAU,EAAE,CAAC;IACbC,QAAQ,EAAE;MACRC,aAAa,EAAE,EAAE;MACjBN,IAAI,EAAE;IACR;EACF,CAAC;EAED,OAAOpB,MAAM;AACf,CAAC;AAED,eAAeD,WAAW"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}