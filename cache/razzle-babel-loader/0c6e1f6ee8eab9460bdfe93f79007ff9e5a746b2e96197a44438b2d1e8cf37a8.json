{"ast":null,"code":"import _isMatch from \"lodash/isMatch\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nimport { getBaseUrl, flattenToAppURL } from '@plone/volto/helpers';\nexport const isActive = (url, pathname) => {\n  return url === '' && pathname === '/' || url !== '' && _isMatch(pathname === null || pathname === void 0 ? void 0 : pathname.split('/'), url === null || url === void 0 ? void 0 : url.split('/'));\n};\nexport const getNavigationByParent = (items, parent) => {\n  if (items && parent !== undefined && typeof parent === 'string') {\n    const pathnameArray = removeValue(parent.split('/'), '');\n    const location = pathnameArray;\n    const depth = pathnameArray.length;\n    if (!depth) {\n      return items;\n    }\n    return deepSearch({\n      inputArray: items,\n      location,\n      depth\n    });\n  }\n  return {};\n};\nconst formatNavUrl = nav => {\n  return nav.map(navItem => _objectSpread(_objectSpread({}, navItem), {}, {\n    url: navItem.url ? getBasePath(navItem.url) : '',\n    items: navItem.items ? formatNavUrl(navItem.items) : false\n  }));\n};\nexport const deepSearch = ({\n  inputArray = [],\n  location,\n  depth,\n  start = 1\n}) => {\n  // if (inputArray[0]?.url?.contains('http')) {\n  inputArray = formatNavUrl(inputArray);\n  // }\n\n  for (let index = 0; index < inputArray.length; index++) {\n    var _inputArray$index$url, _inputArray$index$url2;\n    if (depth === 1 && removeValue((_inputArray$index$url = inputArray[index].url) === null || _inputArray$index$url === void 0 ? void 0 : _inputArray$index$url.split('/'), '')[start - 1] === location[start - 1]) {\n      return inputArray[index] || {};\n    }\n    if (removeValue((_inputArray$index$url2 = inputArray[index].url) === null || _inputArray$index$url2 === void 0 ? void 0 : _inputArray$index$url2.split('/'), '')[start - 1] === location[start - 1]) {\n      return deepSearch({\n        inputArray: inputArray[index].items,\n        location,\n        depth: depth - 1,\n        start: start + 1\n      });\n    }\n  }\n  return null;\n};\nexport function removeValue(arr) {\n  if (!arr || arr.length === 0) return [];\n  let what,\n    a = arguments,\n    L = a.length,\n    ax;\n  while (L > 1 && arr.length) {\n    what = a[--L];\n    while ((ax = arr.indexOf(what)) !== -1) {\n      arr.splice(ax, 1);\n    }\n  }\n  return arr;\n}\nexport function getBasePath(url) {\n  return url && flattenToAppURL(getBaseUrl(url));\n}","map":{"version":3,"names":["getBaseUrl","flattenToAppURL","isActive","url","pathname","split","getNavigationByParent","items","parent","undefined","pathnameArray","removeValue","location","depth","length","deepSearch","inputArray","formatNavUrl","nav","map","navItem","getBasePath","start","index","arr","what","a","arguments","L","ax","indexOf","splice"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-forests-theme/src/components/manage/Blocks/NavigationBlock/helpers.js"],"sourcesContent":["import { isMatch } from 'lodash';\nimport { getBaseUrl, flattenToAppURL } from '@plone/volto/helpers';\n\nexport const isActive = (url, pathname) => {\n  return (\n    (url === '' && pathname === '/') ||\n    (url !== '' && isMatch(pathname?.split('/'), url?.split('/')))\n  );\n};\n\nexport const getNavigationByParent = (items, parent) => {\n  if (items && parent !== undefined && typeof parent === 'string') {\n    const pathnameArray = removeValue(parent.split('/'), '');\n    const location = pathnameArray;\n    const depth = pathnameArray.length;\n    if (!depth) {\n      return items;\n    }\n\n    return deepSearch({\n      inputArray: items,\n      location,\n      depth,\n    });\n  }\n  return {};\n};\n\nconst formatNavUrl = (nav) => {\n  return nav.map((navItem) => ({\n    ...navItem,\n    url: navItem.url ? getBasePath(navItem.url) : '',\n    items: navItem.items ? formatNavUrl(navItem.items) : false,\n  }));\n};\n\nexport const deepSearch = ({ inputArray = [], location, depth, start = 1 }) => {\n  // if (inputArray[0]?.url?.contains('http')) {\n  inputArray = formatNavUrl(inputArray);\n  // }\n\n  for (let index = 0; index < inputArray.length; index++) {\n    if (\n      depth === 1 &&\n      removeValue(inputArray[index].url?.split('/'), '')[start - 1] ===\n        location[start - 1]\n    ) {\n      return inputArray[index] || {};\n    }\n    if (\n      removeValue(inputArray[index].url?.split('/'), '')[start - 1] ===\n      location[start - 1]\n    ) {\n      return deepSearch({\n        inputArray: inputArray[index].items,\n        location,\n        depth: depth - 1,\n        start: start + 1,\n      });\n    }\n  }\n\n  return null;\n};\n\nexport function removeValue(arr) {\n  if (!arr || arr.length === 0) return [];\n  let what,\n    a = arguments,\n    L = a.length,\n    ax;\n  while (L > 1 && arr.length) {\n    what = a[--L];\n    while ((ax = arr.indexOf(what)) !== -1) {\n      arr.splice(ax, 1);\n    }\n  }\n  return arr;\n}\n\nexport function getBasePath(url) {\n  return url && flattenToAppURL(getBaseUrl(url));\n}\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}