{"ast":null,"code":"import _extends from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/extends.js\";\nimport _toConsumableArray from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-accordion-block/src/components/manage/Blocks/Accordion/View.jsx\",\n  _this = this,\n  _s = $RefreshSig$();\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { RenderBlocks } from '@plone/volto/components';\nimport { getPanels, accordionBlockHasValue } from './util';\nimport { Accordion, Icon } from 'semantic-ui-react';\nimport { withBlockExtensions } from '@plone/volto/helpers';\nimport { useLocation } from 'react-router-dom';\nimport cx from 'classnames';\nimport { Icon as VoltoIcon } from '@plone/volto/components';\nimport AnimateHeight from 'react-animate-height';\nimport config from '@plone/volto/registry';\nimport './editor.less';\nvar View = function View(props) {\n  _s();\n  var data = props.data;\n  var location = useLocation();\n  var panels = getPanels(data.data);\n  var metadata = props.metadata || props.properties;\n  var _React$useState = React.useState([]),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    activeIndex = _React$useState2[0],\n    setActiveIndex = _React$useState2[1];\n  var accordionConfig = config.blocks.blocksConfig.accordion;\n  var titleIcons = accordionConfig.titleIcons;\n  var handleClick = function handleClick(e, itemProps) {\n    var index = itemProps.index;\n    if (data.non_exclusive) {\n      var newIndex = activeIndex.indexOf(index) === -1 ? [].concat(_toConsumableArray(activeIndex), [index]) : activeIndex.filter(function (item) {\n        return item !== index;\n      });\n      setActiveIndex(newIndex);\n    } else {\n      var _newIndex = activeIndex.indexOf(index) === -1 ? [index] : activeIndex.filter(function (item) {\n        return item !== index;\n      });\n      setActiveIndex(_newIndex);\n    }\n  };\n  var isExclusive = function isExclusive(index) {\n    return activeIndex.includes(index);\n  };\n  React.useEffect(function () {\n    return data.collapsed ? setActiveIndex([]) : setActiveIndex([0]);\n  }, [data.collapsed]);\n  return __jsx(\"div\", {\n    className: \"accordion-block\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }\n  }, panels.map(function (_ref, index) {\n    var _accordionConfig$defa, _props$data, _props$data2, _props$data3, _props$data4;\n    var _ref2 = _slicedToArray(_ref, 2),\n      id = _ref2[0],\n      panel = _ref2[1];\n    return accordionBlockHasValue(panel) ? __jsx(Accordion, _extends({\n      key: id,\n      exclusive: !data.exclusive,\n      className: data.styles ? data.styles.theme : accordionConfig === null || accordionConfig === void 0 ? void 0 : (_accordionConfig$defa = accordionConfig.defaults) === null || _accordionConfig$defa === void 0 ? void 0 : _accordionConfig$defa.theme\n    }, accordionConfig.options, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }\n    }), __jsx(React.Fragment, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }\n    }, __jsx(Accordion.Title, {\n      as: data.title_size,\n      active: isExclusive(index),\n      index: index,\n      onClick: handleClick,\n      className: cx('accordion-title', {\n        'align-arrow-left': !(props !== null && props !== void 0 && (_props$data = props.data) !== null && _props$data !== void 0 && _props$data.right_arrows),\n        'align-arrow-right': props === null || props === void 0 ? void 0 : (_props$data2 = props.data) === null || _props$data2 === void 0 ? void 0 : _props$data2.right_arrows\n      }),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 15\n      }\n    }, accordionConfig.semanticIcon ? __jsx(Icon, {\n      className: accordionConfig.semanticIcon,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 19\n      }\n    }) : isExclusive(index) ? __jsx(VoltoIcon, {\n      name: props !== null && props !== void 0 && (_props$data3 = props.data) !== null && _props$data3 !== void 0 && _props$data3.right_arrows ? titleIcons.opened.rightPosition : titleIcons.opened.leftPosition,\n      size: titleIcons.size,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 19\n      }\n    }) : __jsx(VoltoIcon, {\n      name: props !== null && props !== void 0 && (_props$data4 = props.data) !== null && _props$data4 !== void 0 && _props$data4.right_arrows ? titleIcons.closed.rightPosition : titleIcons.closed.leftPosition,\n      size: titleIcons.size,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 19\n      }\n    }), __jsx(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }\n    }, panel === null || panel === void 0 ? void 0 : panel.title)), __jsx(AnimateHeight, {\n      animateOpacity: true,\n      duration: 500,\n      height: isExclusive(index) ? 'auto' : 0,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 15\n      }\n    }, __jsx(Accordion.Content, {\n      active: isExclusive(index),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }, __jsx(RenderBlocks, _extends({}, props, {\n      location: location,\n      metadata: metadata,\n      content: panel,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 19\n      }\n    })))))) : null;\n  }));\n};\n_s(View, \"628js0VKRNc/X9vJrZpfjBNchrY=\", false, function () {\n  return [useLocation];\n});\n_c = View;\nexport default _c2 = withBlockExtensions(View);\nvar _c, _c2;\n$RefreshReg$(_c, \"View\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","RenderBlocks","getPanels","accordionBlockHasValue","Accordion","Icon","withBlockExtensions","useLocation","cx","VoltoIcon","AnimateHeight","config","View","props","data","location","panels","metadata","properties","useState","activeIndex","setActiveIndex","accordionConfig","blocks","blocksConfig","accordion","titleIcons","handleClick","e","itemProps","index","non_exclusive","newIndex","indexOf","filter","item","isExclusive","includes","useEffect","collapsed","map","id","panel","exclusive","styles","theme","defaults","options","title_size","right_arrows","semanticIcon","opened","rightPosition","leftPosition","size","closed","title"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-accordion-block/src/components/manage/Blocks/Accordion/View.jsx"],"sourcesContent":["import React from 'react';\nimport { RenderBlocks } from '@plone/volto/components';\nimport { getPanels, accordionBlockHasValue } from './util';\nimport { Accordion, Icon } from 'semantic-ui-react';\nimport { withBlockExtensions } from '@plone/volto/helpers';\nimport { useLocation } from 'react-router-dom';\n\nimport cx from 'classnames';\nimport { Icon as VoltoIcon } from '@plone/volto/components';\nimport AnimateHeight from 'react-animate-height';\nimport config from '@plone/volto/registry';\nimport './editor.less';\n\nconst View = (props) => {\n  const { data } = props;\n  const location = useLocation();\n  const panels = getPanels(data.data);\n  const metadata = props.metadata || props.properties;\n  const [activeIndex, setActiveIndex] = React.useState([]);\n  const accordionConfig = config.blocks.blocksConfig.accordion;\n  const { titleIcons } = accordionConfig;\n  const handleClick = (e, itemProps) => {\n    const { index } = itemProps;\n    if (data.non_exclusive) {\n      const newIndex =\n        activeIndex.indexOf(index) === -1\n          ? [...activeIndex, index]\n          : activeIndex.filter((item) => item !== index);\n\n      setActiveIndex(newIndex);\n    } else {\n      const newIndex =\n        activeIndex.indexOf(index) === -1\n          ? [index]\n          : activeIndex.filter((item) => item !== index);\n\n      setActiveIndex(newIndex);\n    }\n  };\n\n  const isExclusive = (index) => {\n    return activeIndex.includes(index);\n  };\n\n  React.useEffect(() => {\n    return data.collapsed ? setActiveIndex([]) : setActiveIndex([0]);\n  }, [data.collapsed]);\n\n  return (\n    <div className=\"accordion-block\">\n      {panels.map(([id, panel], index) => {\n        return accordionBlockHasValue(panel) ? (\n          <Accordion\n            key={id}\n            exclusive={!data.exclusive}\n            className={\n              data.styles ? data.styles.theme : accordionConfig?.defaults?.theme\n            }\n            {...accordionConfig.options}\n          >\n            <React.Fragment>\n              <Accordion.Title\n                as={data.title_size}\n                active={isExclusive(index)}\n                index={index}\n                onClick={handleClick}\n                className={cx('accordion-title', {\n                  'align-arrow-left': !props?.data?.right_arrows,\n                  'align-arrow-right': props?.data?.right_arrows,\n                })}\n              >\n                {accordionConfig.semanticIcon ? (\n                  <Icon className={accordionConfig.semanticIcon} />\n                ) : isExclusive(index) ? (\n                  <VoltoIcon\n                    name={\n                      props?.data?.right_arrows\n                        ? titleIcons.opened.rightPosition\n                        : titleIcons.opened.leftPosition\n                    }\n                    size={titleIcons.size}\n                  />\n                ) : (\n                  <VoltoIcon\n                    name={\n                      props?.data?.right_arrows\n                        ? titleIcons.closed.rightPosition\n                        : titleIcons.closed.leftPosition\n                    }\n                    size={titleIcons.size}\n                  />\n                )}\n                <span>{panel?.title}</span>\n              </Accordion.Title>\n              <AnimateHeight\n                animateOpacity\n                duration={500}\n                height={isExclusive(index) ? 'auto' : 0}\n              >\n                <Accordion.Content active={isExclusive(index)}>\n                  <RenderBlocks\n                    {...props}\n                    location={location}\n                    metadata={metadata}\n                    content={panel}\n                  />\n                </Accordion.Content>\n              </AnimateHeight>\n            </React.Fragment>\n          </Accordion>\n        ) : null;\n      })}\n    </div>\n  );\n};\n\nexport default withBlockExtensions(View);\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}