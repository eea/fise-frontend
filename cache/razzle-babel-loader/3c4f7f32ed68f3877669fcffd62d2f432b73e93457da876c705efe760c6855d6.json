{"ast":null,"code":"import _toConsumableArray from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-plotlycharts/src/ChartEditor/CustomMarkerColorscales.jsx\",\n  _this = this,\n  _s = $RefreshSig$();\nvar __jsx = React.createElement;\nimport React from 'react';\nimport ColorscalePicker from 'react-chart-editor/lib/components/fields/ColorscalePicker';\nimport CustomColorPicker from './CustomColorPicker';\nimport { Icon } from '@plone/volto/components';\nimport deleteSVG from '@plone/volto/icons/delete.svg';\nimport upIcon from '@plone/volto/icons/up-key.svg';\nimport downIcon from '@plone/volto/icons/down-key.svg';\nimport addIcon from '@plone/volto/icons/add.svg';\nimport autoIcon from '@plone/volto/icons/replace.svg';\nvar setColorValue = function setColorValue(i, length) {\n  var increment = 1 / (length - 1);\n  var val = increment * i;\n  return val;\n};\nvar ColorscaleEditor = function ColorscaleEditor(_ref) {\n  _s();\n  var colorscale = _ref.colorscale,\n    _ = _ref._,\n    handleChange = _ref.handleChange;\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    expand = _React$useState2[0],\n    setExpand = _React$useState2[1];\n  var handleColorChange = function handleColorChange(color, index) {\n    var newColorscale = _toConsumableArray(colorscale);\n    newColorscale[index][1] = color;\n    handleChange(newColorscale);\n  };\n  var handleValueChange = function handleValueChange(value, index) {\n    var newColorscale = _toConsumableArray(colorscale);\n    newColorscale[index][0] = value;\n    handleChange(newColorscale);\n  };\n  var handleAutoValues = function handleAutoValues(colorscale) {\n    var updatedValue = colorscale.map(function (item, i) {\n      return [\"\".concat(setColorValue(i, colorscale.length)), item[1]];\n    });\n    handleChange(updatedValue);\n  };\n  var handleDeleteColor = function handleDeleteColor(colorscale, index) {\n    var newColorscale = [].concat(_toConsumableArray(colorscale.slice(0, index)), _toConsumableArray(colorscale.slice(index + 1)));\n    handleAutoValues(newColorscale);\n  };\n  var handleAddColor = function handleAddColor(colorscale) {\n    var newColorscale = [].concat(_toConsumableArray(colorscale), [['1', 'black']]);\n    handleAutoValues(newColorscale);\n  };\n  return __jsx(\"div\", {\n    className: \"colors-edit-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }\n  }, __jsx(\"button\", {\n    className: \"color-expand-button\",\n    onClick: function onClick() {\n      return setExpand(!expand);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, !expand && __jsx(Icon, {\n    className: \"color-open-icon\",\n    name: upIcon,\n    size: \"20px\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }), expand && __jsx(Icon, {\n    className: \"color-close-icon\",\n    name: downIcon,\n    size: \"20px\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }), !expand ? 'Edit colors' : 'Close'), expand && __jsx(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, colorscale && colorscale.length > 0 && colorscale.map(function (item, index) {\n    return __jsx(\"div\", {\n      className: \"color-edit\",\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 15\n      }\n    }, __jsx(\"input\", {\n      className: \"color-value\",\n      label: \"Value\",\n      value: item[0],\n      onChange: function onChange(e) {\n        return handleValueChange(e.target.value, index);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }\n    }), __jsx(CustomColorPicker, {\n      selectedColor: item[1],\n      onColorChange: function onColorChange(color) {\n        return handleColorChange(color, index);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }\n    }), colorscale.length > 2 && __jsx(Icon, {\n      onClick: function onClick() {\n        return handleDeleteColor(colorscale, index);\n      },\n      className: \"color-delete-icon\",\n      name: deleteSVG,\n      size: \"24px\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 19\n      }\n    }));\n  }), __jsx(\"div\", {\n    className: \"color-buttons-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }, __jsx(\"button\", {\n    className: \"color-add-button\",\n    title: \"Add new color\",\n    onClick: function onClick() {\n      return handleAddColor(colorscale);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, __jsx(Icon, {\n    className: \"color-add-icon\",\n    name: addIcon,\n    size: \"18px\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 15\n    }\n  }), \"Add\"), __jsx(\"button\", {\n    className: \"color-auto-button\",\n    title: \"Set colorscale values automatically\",\n    onClick: function onClick() {\n      return handleAutoValues(colorscale);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, __jsx(Icon, {\n    className: \"color-add-icon\",\n    name: autoIcon,\n    size: \"18px\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }), \"Auto Value\"))));\n};\n_s(ColorscaleEditor, \"V8NQrAFSLXwZu43JmcjJwSuHwmw=\");\n_c = ColorscaleEditor;\nvar CustomMarkerColorscales = function CustomMarkerColorscales(_ref2) {\n  var _ = _ref2._,\n    colorscale = _ref2.colorscale,\n    handleChange = _ref2.handleChange;\n  return __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 5\n    }\n  }, colorscale && colorscale.length > 0 && __jsx(ColorscaleEditor, {\n    handleChange: handleChange,\n    colorscale: colorscale,\n    _: _,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }), __jsx(ColorscalePicker, {\n    suppressMultiValuedMessage: true,\n    attr: \"marker.colorscale\",\n    updatePlot: function updatePlot(colorscale) {\n      handleChange(colorscale);\n    },\n    colorscale: colorscale,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }));\n};\n_c2 = CustomMarkerColorscales;\nexport default CustomMarkerColorscales;\nvar _c, _c2;\n$RefreshReg$(_c, \"ColorscaleEditor\");\n$RefreshReg$(_c2, \"CustomMarkerColorscales\");","map":{"version":3,"names":["React","ColorscalePicker","CustomColorPicker","Icon","deleteSVG","upIcon","downIcon","addIcon","autoIcon","setColorValue","i","length","increment","val","ColorscaleEditor","colorscale","_","handleChange","useState","expand","setExpand","handleColorChange","color","index","newColorscale","handleValueChange","value","handleAutoValues","updatedValue","map","item","handleDeleteColor","slice","handleAddColor","e","target","CustomMarkerColorscales"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-plotlycharts/src/ChartEditor/CustomMarkerColorscales.jsx"],"sourcesContent":["import React from 'react';\nimport ColorscalePicker from 'react-chart-editor/lib/components/fields/ColorscalePicker';\nimport CustomColorPicker from './CustomColorPicker';\nimport { Icon } from '@plone/volto/components';\nimport deleteSVG from '@plone/volto/icons/delete.svg';\nimport upIcon from '@plone/volto/icons/up-key.svg';\nimport downIcon from '@plone/volto/icons/down-key.svg';\nimport addIcon from '@plone/volto/icons/add.svg';\nimport autoIcon from '@plone/volto/icons/replace.svg';\n\nconst setColorValue = (i, length) => {\n  var increment = 1 / (length - 1);\n\n  var val = increment * i;\n  return val;\n};\n\nconst ColorscaleEditor = ({ colorscale, _, handleChange }) => {\n  const [expand, setExpand] = React.useState(false);\n\n  const handleColorChange = (color, index) => {\n    var newColorscale = [...colorscale];\n    newColorscale[index][1] = color;\n\n    handleChange(newColorscale);\n  };\n\n  const handleValueChange = (value, index) => {\n    var newColorscale = [...colorscale];\n    newColorscale[index][0] = value;\n\n    handleChange(newColorscale);\n  };\n\n  const handleAutoValues = (colorscale) => {\n    const updatedValue = colorscale.map((item, i) => [\n      `${setColorValue(i, colorscale.length)}`,\n      item[1],\n    ]);\n    handleChange(updatedValue);\n  };\n\n  const handleDeleteColor = (colorscale, index) => {\n    var newColorscale = [\n      ...colorscale.slice(0, index),\n      ...colorscale.slice(index + 1),\n    ];\n\n    handleAutoValues(newColorscale);\n  };\n\n  const handleAddColor = (colorscale) => {\n    var newColorscale = [...colorscale, ['1', 'black']];\n\n    handleAutoValues(newColorscale);\n  };\n\n  return (\n    <div className=\"colors-edit-container\">\n      <button\n        className=\"color-expand-button\"\n        onClick={() => setExpand(!expand)}\n      >\n        {!expand && (\n          <Icon className=\"color-open-icon\" name={upIcon} size=\"20px\" />\n        )}\n        {expand && (\n          <Icon className=\"color-close-icon\" name={downIcon} size=\"20px\" />\n        )}\n        {!expand ? 'Edit colors' : 'Close'}\n      </button>\n\n      {expand && (\n        <React.Fragment>\n          {colorscale &&\n            colorscale.length > 0 &&\n            colorscale.map((item, index) => (\n              <div className=\"color-edit\" key={index}>\n                <input\n                  className=\"color-value\"\n                  label=\"Value\"\n                  value={item[0]}\n                  onChange={(e) => handleValueChange(e.target.value, index)}\n                />\n                <CustomColorPicker\n                  selectedColor={item[1]}\n                  onColorChange={(color) => handleColorChange(color, index)}\n                />\n                {colorscale.length > 2 && (\n                  <Icon\n                    onClick={() => handleDeleteColor(colorscale, index)}\n                    className=\"color-delete-icon\"\n                    name={deleteSVG}\n                    size=\"24px\"\n                  />\n                )}\n              </div>\n            ))}\n          <div className=\"color-buttons-container\">\n            <button\n              className=\"color-add-button\"\n              title=\"Add new color\"\n              onClick={() => handleAddColor(colorscale)}\n            >\n              <Icon className=\"color-add-icon\" name={addIcon} size=\"18px\" />\n              Add\n            </button>\n            <button\n              className=\"color-auto-button\"\n              title=\"Set colorscale values automatically\"\n              onClick={() => handleAutoValues(colorscale)}\n            >\n              <Icon className=\"color-add-icon\" name={autoIcon} size=\"18px\" />\n              Auto Value\n            </button>\n          </div>\n        </React.Fragment>\n      )}\n    </div>\n  );\n};\n\nconst CustomMarkerColorscales = ({ _, colorscale, handleChange }) => {\n  return (\n    <div>\n      {colorscale && colorscale.length > 0 && (\n        <ColorscaleEditor\n          handleChange={handleChange}\n          colorscale={colorscale}\n          _={_}\n        />\n      )}\n      <ColorscalePicker\n        suppressMultiValuedMessage\n        attr=\"marker.colorscale\"\n        updatePlot={(colorscale) => {\n          handleChange(colorscale);\n        }}\n        colorscale={colorscale}\n      />\n    </div>\n  );\n};\n\nexport default CustomMarkerColorscales;\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}