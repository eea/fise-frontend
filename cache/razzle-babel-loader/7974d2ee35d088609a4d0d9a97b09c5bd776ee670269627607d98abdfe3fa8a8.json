{"ast":null,"code":"var _jsxFileName = \"/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-addons-forest/src/News/NewsView.jsx\",\n  _this = this,\n  _s = $RefreshSig$();\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { Tab } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\nimport NewsItem from './NewsItem';\nimport WidthBasedLayoutProvider from '../Widgets/WidthBasedLayoutProvider';\nimport './style.css';\nvar panes = function panes(context) {\n  return [{\n    menuItem: 'News',\n    render: function render() {\n      return __jsx(RenderItems, {\n        items: context.newsItems,\n        type: \"news\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 15,\n          columnNumber: 14\n        }\n      });\n    }\n  }, {\n    menuItem: 'Events',\n    render: function render() {\n      return __jsx(RenderItems, {\n        items: context.eventsItems,\n        type: \"events\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 14\n        }\n      });\n    }\n  }, {\n    menuItem: 'Subscribe via RSS',\n    render: function render() {\n      return __jsx(Tab.Pane, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 7\n        }\n      }, __jsx(\"p\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 9\n        }\n      }, \"RSS is a format to share data, defined in XML, that contains information about news and events.\"), __jsx(\"p\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 9\n        }\n      }, \"You have to use a RSS reader so that you can subscribe to our feed.\"), __jsx(\"p\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 9\n        }\n      }, \"You can find more information about RSS and you can check our feed\", ' '), __jsx(Link, {\n        to: \"rss-feed\",\n        className: \"ui primary button\",\n        target: \"_blank\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 9\n        }\n      }, \"Here\"));\n    }\n  }];\n};\nvar getPortletItems = function getPortletItems(portletsManagers, portletId) {\n  var items = null;\n  Object.keys(portletsManagers).forEach(function (manager) {\n    portletsManagers[manager].forEach(function (portlet) {\n      if (portlet.portlet_id === portletId) {\n        var _portlet;\n        items = (_portlet = portlet[portletId + 'portlet']) === null || _portlet === void 0 ? void 0 : _portlet.items.sort(function (a, b) {\n          return new Date(b.effective) - new Date(a.effective);\n        });\n      }\n    });\n  });\n  return items;\n};\nvar RenderItems = function RenderItems(_ref) {\n  var items = _ref.items,\n    type = _ref.type;\n  return __jsx(Tab.Pane, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"articles\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, items && items.map(function (item) {\n    return __jsx(NewsItem, {\n      key: item['@id'],\n      item: item,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 20\n      }\n    });\n  })), items && items.length > 0 && __jsx(\"div\", {\n    className: \"actions\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, __jsx(Link, {\n    className: \"more-items\",\n    to: \"/\".concat(type),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, \"More \", type)), (!items || items.length === 0) && __jsx(\"div\", {\n    className: \"message\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, \"There are no \", type, \" at the moment.\")));\n};\n_c = RenderItems;\nvar NewsView = function NewsView(props) {\n  _s();\n  var _useState = useState(),\n    newsItems = _useState[0],\n    setNewsItems = _useState[1];\n  var _useState2 = useState(),\n    eventsItems = _useState2[0],\n    setEventsItems = _useState2[1];\n  var grid = {\n    phone: 'twelve',\n    tablet: 'twelve',\n    desktop: 'twelve',\n    widescreen: 'twelve'\n  };\n  useEffect(function () {\n    var _getPortletItems, _getPortletItems2;\n    setNewsItems((_getPortletItems = getPortletItems(props.portletsManagers, 'news')) === null || _getPortletItems === void 0 ? void 0 : _getPortletItems.sort(function (a, b) {\n      return new Date(b.effective) - new Date(a.effective);\n    }));\n    setEventsItems((_getPortletItems2 = getPortletItems(props.portletsManagers, 'events')) === null || _getPortletItems2 === void 0 ? void 0 : _getPortletItems2.sort(function (a, b) {\n      return new Date(b.start) - new Date(a.start);\n    }));\n  }, [newsItems, eventsItems, props.portletsManagers]);\n  if (__SERVER__) return __jsx(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 26\n    }\n  }, \"News & Events\");\n  return __jsx(\"div\", {\n    className: \"news-wrapper-view portlet \".concat(props.layout_type, \"-\").concat(grid[props.layout_type]),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 5\n    }\n  }, __jsx(Tab, {\n    panes: panes({\n      newsItems: newsItems,\n      eventsItems: eventsItems\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }));\n};\n_s(NewsView, \"0ZlADzzBcNMhn76AWtf2/uKvqR0=\");\n_c2 = NewsView;\nexport default compose(connect(function (state, props) {\n  return {\n    portletsManagers: state.portlets.managers\n  };\n}))(WidthBasedLayoutProvider(NewsView));\nvar _c, _c2;\n$RefreshReg$(_c, \"RenderItems\");\n$RefreshReg$(_c2, \"NewsView\");","map":{"version":3,"names":["React","useState","useEffect","connect","compose","Tab","Link","NewsItem","WidthBasedLayoutProvider","panes","context","menuItem","render","newsItems","eventsItems","getPortletItems","portletsManagers","portletId","items","Object","keys","forEach","manager","portlet","portlet_id","sort","a","b","Date","effective","RenderItems","type","map","item","length","NewsView","props","setNewsItems","setEventsItems","grid","phone","tablet","desktop","widescreen","start","__SERVER__","layout_type","state","portlets","managers"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@eeacms/volto-addons-forest/src/News/NewsView.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { Tab } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\nimport NewsItem from './NewsItem';\nimport WidthBasedLayoutProvider from '../Widgets/WidthBasedLayoutProvider';\n\nimport './style.css';\n\nconst panes = (context) => [\n  {\n    menuItem: 'News',\n    render: () => {\n      return <RenderItems items={context.newsItems} type=\"news\" />;\n    },\n  },\n  {\n    menuItem: 'Events',\n    render: () => {\n      return <RenderItems items={context.eventsItems} type=\"events\" />;\n    },\n  },\n  {\n    menuItem: 'Subscribe via RSS',\n    render: () => (\n      <Tab.Pane>\n        <p>\n          RSS is a format to share data, defined in XML, that contains\n          information about news and events.\n        </p>\n        <p>\n          You have to use a RSS reader so that you can subscribe to our feed.\n        </p>\n        <p>\n          You can find more information about RSS and you can check our feed{' '}\n        </p>\n        <Link to=\"rss-feed\" className=\"ui primary button\" target=\"_blank\">\n          Here\n        </Link>\n      </Tab.Pane>\n    ),\n  },\n];\n\nconst getPortletItems = (portletsManagers, portletId) => {\n  let items = null;\n  Object.keys(portletsManagers).forEach((manager) => {\n    portletsManagers[manager].forEach((portlet) => {\n      if (portlet.portlet_id === portletId) {\n        items = portlet[portletId + 'portlet']?.items.sort((a, b) => {\n          return new Date(b.effective) - new Date(a.effective);\n        });\n      }\n    });\n  });\n  return items;\n};\n\nconst RenderItems = ({ items, type }) => {\n  return (\n    <Tab.Pane>\n      <div className=\"articles\">\n        {items &&\n          items.map((item) => {\n            return <NewsItem key={item['@id']} item={item} />;\n          })}\n      </div>\n      {items && items.length > 0 && (\n        <div className=\"actions\">\n          <Link className=\"more-items\" to={`/${type}`}>\n            More {type}\n          </Link>\n        </div>\n      )}\n      {(!items || items.length === 0) && (\n        <div className=\"message\">\n          <span>There are no {type} at the moment.</span>\n        </div>\n      )}\n    </Tab.Pane>\n  );\n};\n\nconst NewsView = (props) => {\n  const [newsItems, setNewsItems] = useState();\n  const [eventsItems, setEventsItems] = useState();\n\n  const grid = {\n    phone: 'twelve',\n    tablet: 'twelve',\n    desktop: 'twelve',\n    widescreen: 'twelve',\n  };\n\n  useEffect(() => {\n    setNewsItems(\n      getPortletItems(props.portletsManagers, 'news')?.sort((a, b) => {\n        return new Date(b.effective) - new Date(a.effective);\n      }),\n    );\n    setEventsItems(\n      getPortletItems(props.portletsManagers, 'events')?.sort((a, b) => {\n        return new Date(b.start) - new Date(a.start);\n      }),\n    );\n  }, [newsItems, eventsItems, props.portletsManagers]);\n\n  if (__SERVER__) return <h1>News &amp; Events</h1>;\n\n  return (\n    <div\n      className={`news-wrapper-view portlet ${props.layout_type}-${\n        grid[props.layout_type]\n      }`}\n    >\n      <Tab panes={panes({ newsItems, eventsItems })} />\n    </div>\n  );\n};\n\nexport default compose(\n  connect((state, props) => ({\n    portletsManagers: state.portlets.managers,\n  })),\n)(WidthBasedLayoutProvider(NewsView));\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}