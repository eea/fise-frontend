{"ast":null,"code":"export default (({\n  draftJs\n}) => ({\n  createLinkAtSelection(editorState, url) {\n    const contentState = editorState.getCurrentContent().createEntity('LINK', 'MUTABLE', {\n      url\n    });\n    const entityKey = contentState.getLastCreatedEntityKey();\n    const withLink = draftJs.RichUtils.toggleLink(editorState, editorState.getSelection(), entityKey);\n    return draftJs.EditorState.forceSelection(withLink, editorState.getSelection());\n  },\n  removeLinkAtSelection(editorState) {\n    const selection = editorState.getSelection();\n    return draftJs.RichUtils.toggleLink(editorState, selection, null);\n  },\n  getCurrentEntityKey(editorState) {\n    const selection = editorState.getSelection();\n    const anchorKey = selection.getAnchorKey();\n    const contentState = editorState.getCurrentContent();\n    const anchorBlock = contentState.getBlockForKey(anchorKey);\n    const index = selection.isBackward ? selection.focusOffset : selection.anchorOffset;\n    return anchorBlock.getEntityAt(index);\n  },\n  getCurrentEntity(editorState) {\n    const contentState = editorState.getCurrentContent();\n    const entityKey = this.getCurrentEntityKey(editorState);\n    return entityKey ? contentState.getEntity(entityKey) : null;\n  },\n  hasEntity(editorState, entityType) {\n    const entity = this.getCurrentEntity(editorState);\n    return entity && entity.getType() === entityType;\n  }\n}));","map":{"version":3,"names":["draftJs","createLinkAtSelection","editorState","url","contentState","getCurrentContent","createEntity","entityKey","getLastCreatedEntityKey","withLink","RichUtils","toggleLink","getSelection","EditorState","forceSelection","removeLinkAtSelection","selection","getCurrentEntityKey","anchorKey","getAnchorKey","anchorBlock","getBlockForKey","index","isBackward","focusOffset","anchorOffset","getEntityAt","getCurrentEntity","getEntity","hasEntity","entityType","entity","getType"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@plone/volto/src/components/manage/AnchorPlugin/utils/EditorUtils.js"],"sourcesContent":["export default ({ draftJs }) => ({\n  createLinkAtSelection(editorState, url) {\n    const contentState = editorState\n      .getCurrentContent()\n      .createEntity('LINK', 'MUTABLE', { url });\n    const entityKey = contentState.getLastCreatedEntityKey();\n    const withLink = draftJs.RichUtils.toggleLink(\n      editorState,\n      editorState.getSelection(),\n      entityKey,\n    );\n    return draftJs.EditorState.forceSelection(\n      withLink,\n      editorState.getSelection(),\n    );\n  },\n\n  removeLinkAtSelection(editorState) {\n    const selection = editorState.getSelection();\n    return draftJs.RichUtils.toggleLink(editorState, selection, null);\n  },\n\n  getCurrentEntityKey(editorState) {\n    const selection = editorState.getSelection();\n    const anchorKey = selection.getAnchorKey();\n    const contentState = editorState.getCurrentContent();\n    const anchorBlock = contentState.getBlockForKey(anchorKey);\n    const index = selection.isBackward\n      ? selection.focusOffset\n      : selection.anchorOffset;\n\n    return anchorBlock.getEntityAt(index);\n  },\n\n  getCurrentEntity(editorState) {\n    const contentState = editorState.getCurrentContent();\n    const entityKey = this.getCurrentEntityKey(editorState);\n    return entityKey ? contentState.getEntity(entityKey) : null;\n  },\n\n  hasEntity(editorState, entityType) {\n    const entity = this.getCurrentEntity(editorState);\n    return entity && entity.getType() === entityType;\n  },\n});\n"],"mappings":"AAAA,gBAAe,CAAC;EAAEA;AAAQ,CAAC,MAAM;EAC/BC,qBAAqB,CAACC,WAAW,EAAEC,GAAG,EAAE;IACtC,MAAMC,YAAY,GAAGF,WAAW,CAC7BG,iBAAiB,EAAE,CACnBC,YAAY,CAAC,MAAM,EAAE,SAAS,EAAE;MAAEH;IAAI,CAAC,CAAC;IAC3C,MAAMI,SAAS,GAAGH,YAAY,CAACI,uBAAuB,EAAE;IACxD,MAAMC,QAAQ,GAAGT,OAAO,CAACU,SAAS,CAACC,UAAU,CAC3CT,WAAW,EACXA,WAAW,CAACU,YAAY,EAAE,EAC1BL,SAAS,CACV;IACD,OAAOP,OAAO,CAACa,WAAW,CAACC,cAAc,CACvCL,QAAQ,EACRP,WAAW,CAACU,YAAY,EAAE,CAC3B;EACH,CAAC;EAEDG,qBAAqB,CAACb,WAAW,EAAE;IACjC,MAAMc,SAAS,GAAGd,WAAW,CAACU,YAAY,EAAE;IAC5C,OAAOZ,OAAO,CAACU,SAAS,CAACC,UAAU,CAACT,WAAW,EAAEc,SAAS,EAAE,IAAI,CAAC;EACnE,CAAC;EAEDC,mBAAmB,CAACf,WAAW,EAAE;IAC/B,MAAMc,SAAS,GAAGd,WAAW,CAACU,YAAY,EAAE;IAC5C,MAAMM,SAAS,GAAGF,SAAS,CAACG,YAAY,EAAE;IAC1C,MAAMf,YAAY,GAAGF,WAAW,CAACG,iBAAiB,EAAE;IACpD,MAAMe,WAAW,GAAGhB,YAAY,CAACiB,cAAc,CAACH,SAAS,CAAC;IAC1D,MAAMI,KAAK,GAAGN,SAAS,CAACO,UAAU,GAC9BP,SAAS,CAACQ,WAAW,GACrBR,SAAS,CAACS,YAAY;IAE1B,OAAOL,WAAW,CAACM,WAAW,CAACJ,KAAK,CAAC;EACvC,CAAC;EAEDK,gBAAgB,CAACzB,WAAW,EAAE;IAC5B,MAAME,YAAY,GAAGF,WAAW,CAACG,iBAAiB,EAAE;IACpD,MAAME,SAAS,GAAG,IAAI,CAACU,mBAAmB,CAACf,WAAW,CAAC;IACvD,OAAOK,SAAS,GAAGH,YAAY,CAACwB,SAAS,CAACrB,SAAS,CAAC,GAAG,IAAI;EAC7D,CAAC;EAEDsB,SAAS,CAAC3B,WAAW,EAAE4B,UAAU,EAAE;IACjC,MAAMC,MAAM,GAAG,IAAI,CAACJ,gBAAgB,CAACzB,WAAW,CAAC;IACjD,OAAO6B,MAAM,IAAIA,MAAM,CAACC,OAAO,EAAE,KAAKF,UAAU;EAClD;AACF,CAAC,CAAC"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}