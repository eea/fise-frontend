{"ast":null,"code":"var _jsxFileName = \"/home/tooler/code/work/forests-frontend/node_modules/@plone/volto/src/components/manage/Multilingual/CompareLanguages.jsx\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { defineMessages, useIntl } from 'react-intl';\nimport config from '@plone/volto/registry';\nimport { langmap, useDetectClickOutside } from '@plone/volto/helpers';\nimport { Icon } from '@plone/volto/components';\nimport { Button } from 'semantic-ui-react';\nimport translateSVG from '@plone/volto/icons/translate.svg';\nimport clearSVG from '@plone/volto/icons/clear.svg';\nconst messages = defineMessages({\n  compare_to: {\n    \"id\": \"compare_to\",\n    \"defaultMessage\": \"Compare to language\"\n  },\n  stop_compare: {\n    \"id\": \"Stop compare\",\n    \"defaultMessage\": \"Stop compare\"\n  }\n});\nconst CompareLanguagesMenu = ({\n  theToolbar,\n  translations,\n  comparingLanguage,\n  setComparingLanguage,\n  closeMenu\n}) => {\n  const intl = useIntl();\n  const ClickOutsideListener = () => {\n    closeMenu();\n  };\n  const ref = useDetectClickOutside({\n    onTriggered: ClickOutsideListener,\n    triggerKeys: ['Escape']\n  });\n  return __jsx(\"div\", {\n    className: \"toolbar-content show compare-languages\",\n    ref: ref,\n    style: {\n      flex: theToolbar.current ? `0 0 ${theToolbar.current.getBoundingClientRect().width}px` : null\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"pastanaga-menu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, __jsx(\"header\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, intl.formatMessage(messages.compare_to)), __jsx(\"div\", {\n    className: \"pastanaga-menu-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, __jsx(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  }, translations.map(t => __jsx(\"li\", {\n    key: t['@id'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 15\n    }\n  }, comparingLanguage === t.language ? __jsx(\"button\", {\n    \"aria-label\": `${intl.formatMessage(messages.stop_compare)} ${langmap[t.language].nativeName}`,\n    title: `${intl.formatMessage(messages.stop_compare)} ${langmap[t.language].nativeName}`,\n    onClick: () => {\n      setComparingLanguage(null);\n      closeMenu();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 19\n    }\n  }, langmap[t.language].nativeName, __jsx(Icon, {\n    name: clearSVG,\n    size: \"30px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 21\n    }\n  })) : __jsx(\"button\", {\n    \"aria-label\": `${intl.formatMessage(messages.compare_to)} ${langmap[t.language].nativeName.toLowerCase()}`,\n    title: `${intl.formatMessage(messages.compare_to)} ${langmap[t.language].nativeName.toLowerCase()}`,\n    onClick: () => {\n      setComparingLanguage(t.language);\n      closeMenu();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 19\n    }\n  }, langmap[t.language].nativeName)))))));\n};\nconst CompareLanguages = /*#__PURE__*/React.forwardRef((props, ref) => {\n  var _content$Components, _content$Components$t;\n  const {\n    content,\n    comparingLanguage,\n    setComparingLanguage,\n    pathname,\n    toolbarRef\n  } = props;\n  const intl = useIntl();\n  const {\n    0: viewMenu,\n    1: setViewMenu\n  } = useState(false);\n  const translations = config.settings.isMultilingual ? (content === null || content === void 0 ? void 0 : (_content$Components = content['@components']) === null || _content$Components === void 0 ? void 0 : (_content$Components$t = _content$Components.translations) === null || _content$Components$t === void 0 ? void 0 : _content$Components$t.items) || [] : [];\n  const translationsObject = {};\n  translations.forEach(t => {\n    translationsObject[t.language] = t['@id'];\n  });\n  if (config.settings.isMultilingual && translations.length > 0) {\n    return __jsx(\"div\", {\n      className: \"toolbar-compare-translations-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      className: \"toolbar-button-spacer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }\n    }), __jsx(Button, {\n      \"aria-label\": intl.formatMessage(messages.compare_to),\n      title: intl.formatMessage(messages.compare_to),\n      onClick: () => {\n        setViewMenu(!viewMenu);\n      },\n      id: \"toolbar-compare-translations\",\n      className: \"toolbar-button-compare-translations\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }\n    }, __jsx(Icon, {\n      className: \"mobile hidden\",\n      name: translateSVG,\n      size: \"30px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }\n    }), viewMenu ? __jsx(Icon, {\n      className: \"mobile only\",\n      name: clearSVG,\n      size: \"30px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }\n    }) : __jsx(Icon, {\n      className: \"mobile only\",\n      name: translateSVG,\n      size: \"30px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }\n    })), viewMenu && __jsx(CompareLanguagesMenu, {\n      pathname: pathname,\n      theToolbar: toolbarRef,\n      key: `compareLanguagesComponent`,\n      closeMenu: () => setViewMenu(false),\n      translations: translations,\n      setComparingLanguage: value => {\n        setComparingLanguage(value, translationsObject[value]);\n      },\n      comparingLanguage: comparingLanguage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }\n    }));\n  } else {\n    return null;\n  }\n});\nexport default CompareLanguages;","map":{"version":3,"names":["React","useState","defineMessages","useIntl","config","langmap","useDetectClickOutside","Icon","Button","translateSVG","clearSVG","messages","compare_to","stop_compare","CompareLanguagesMenu","theToolbar","translations","comparingLanguage","setComparingLanguage","closeMenu","intl","ClickOutsideListener","ref","onTriggered","triggerKeys","flex","current","getBoundingClientRect","width","formatMessage","map","t","language","nativeName","toLowerCase","CompareLanguages","forwardRef","props","content","pathname","toolbarRef","viewMenu","setViewMenu","settings","isMultilingual","items","translationsObject","forEach","length","value"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@plone/volto/src/components/manage/Multilingual/CompareLanguages.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { defineMessages, useIntl } from 'react-intl';\nimport config from '@plone/volto/registry';\nimport { langmap, useDetectClickOutside } from '@plone/volto/helpers';\n\nimport { Icon } from '@plone/volto/components';\nimport { Button } from 'semantic-ui-react';\nimport translateSVG from '@plone/volto/icons/translate.svg';\nimport clearSVG from '@plone/volto/icons/clear.svg';\n\nconst messages = defineMessages({\n  compare_to: {\n    id: 'compare_to',\n    defaultMessage: 'Compare to language',\n  },\n  stop_compare: {\n    id: 'Stop compare',\n    defaultMessage: 'Stop compare',\n  },\n});\n\nconst CompareLanguagesMenu = ({\n  theToolbar,\n  translations,\n  comparingLanguage,\n  setComparingLanguage,\n  closeMenu,\n}) => {\n  const intl = useIntl();\n\n  const ClickOutsideListener = () => {\n    closeMenu();\n  };\n\n  const ref = useDetectClickOutside({\n    onTriggered: ClickOutsideListener,\n    triggerKeys: ['Escape'],\n  });\n\n  return (\n    <div\n      className=\"toolbar-content show compare-languages\"\n      ref={ref}\n      style={{\n        flex: theToolbar.current\n          ? `0 0 ${theToolbar.current.getBoundingClientRect().width}px`\n          : null,\n      }}\n    >\n      <div className=\"pastanaga-menu\">\n        <header>{intl.formatMessage(messages.compare_to)}</header>\n        <div className=\"pastanaga-menu-list\">\n          <ul>\n            {translations.map((t) => (\n              <li key={t['@id']}>\n                {comparingLanguage === t.language ? (\n                  <button\n                    aria-label={`${intl.formatMessage(messages.stop_compare)} ${\n                      langmap[t.language].nativeName\n                    }`}\n                    title={`${intl.formatMessage(messages.stop_compare)} ${\n                      langmap[t.language].nativeName\n                    }`}\n                    onClick={() => {\n                      setComparingLanguage(null);\n                      closeMenu();\n                    }}\n                  >\n                    {langmap[t.language].nativeName}\n                    <Icon name={clearSVG} size=\"30px\" />\n                  </button>\n                ) : (\n                  <button\n                    aria-label={`${intl.formatMessage(\n                      messages.compare_to,\n                    )} ${langmap[t.language].nativeName.toLowerCase()}`}\n                    title={`${intl.formatMessage(\n                      messages.compare_to,\n                    )} ${langmap[t.language].nativeName.toLowerCase()}`}\n                    onClick={() => {\n                      setComparingLanguage(t.language);\n                      closeMenu();\n                    }}\n                  >\n                    {langmap[t.language].nativeName}\n                  </button>\n                )}\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst CompareLanguages = React.forwardRef((props, ref) => {\n  const {\n    content,\n    comparingLanguage,\n    setComparingLanguage,\n    pathname,\n    toolbarRef,\n  } = props;\n\n  const intl = useIntl();\n  const [viewMenu, setViewMenu] = useState(false);\n  const translations = config.settings.isMultilingual\n    ? content?.['@components']?.translations?.items || []\n    : [];\n\n  const translationsObject = {};\n  translations.forEach((t) => {\n    translationsObject[t.language] = t['@id'];\n  });\n\n  if (config.settings.isMultilingual && translations.length > 0) {\n    return (\n      <div className=\"toolbar-compare-translations-wrapper\">\n        <div className=\"toolbar-button-spacer\" />\n\n        <Button\n          aria-label={intl.formatMessage(messages.compare_to)}\n          title={intl.formatMessage(messages.compare_to)}\n          onClick={() => {\n            setViewMenu(!viewMenu);\n          }}\n          id=\"toolbar-compare-translations\"\n          className=\"toolbar-button-compare-translations\"\n        >\n          <Icon className=\"mobile hidden\" name={translateSVG} size=\"30px\" />\n          {viewMenu ? (\n            <Icon className=\"mobile only\" name={clearSVG} size=\"30px\" />\n          ) : (\n            <Icon className=\"mobile only\" name={translateSVG} size=\"30px\" />\n          )}\n        </Button>\n\n        {viewMenu && (\n          <CompareLanguagesMenu\n            pathname={pathname}\n            theToolbar={toolbarRef}\n            key={`compareLanguagesComponent`}\n            closeMenu={() => setViewMenu(false)}\n            translations={translations}\n            setComparingLanguage={(value) => {\n              setComparingLanguage(value, translationsObject[value]);\n            }}\n            comparingLanguage={comparingLanguage}\n          />\n        )}\n      </div>\n    );\n  } else {\n    return null;\n  }\n});\n\nexport default CompareLanguages;\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[{"id":"compare_to","defaultMessage":"Compare to language"},{"id":"Stop compare","defaultMessage":"Stop compare"}]}},"sourceType":"module","externalDependencies":[]}