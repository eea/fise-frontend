{"ast":null,"code":"import _slicedToArray from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectDestructuringEmpty from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js\";\nimport _extends from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/extends.js\";\nvar _jsxFileName = \"/home/tooler/code/work/forests-frontend/node_modules/@plone/volto/packages/volto-slate/src/editor/plugins/Table/TableButton.jsx\",\n  _this = this,\n  _s = $RefreshSig$();\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { useSlate } from 'slate-react';\nimport { Dropdown } from 'semantic-ui-react';\nimport { ToolbarButton } from '@plone/volto-slate/editor/ui';\nimport tableSVG from '@plone/volto/icons/table.svg';\nimport TableContainer from './TableContainer';\nimport './less/table.less';\nimport { Editor, Transforms } from 'slate';\nvar TableButton = function TableButton(_ref) {\n  _s();\n  var props = _extends({}, (_objectDestructuringEmpty(_ref), _ref));\n  var editor = useSlate();\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    dropdownOpen = _React$useState2[0],\n    setDropdownOpen = _React$useState2[1];\n  var _React$useState3 = React.useState(1),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    activeRow = _React$useState4[0],\n    setActiveRow = _React$useState4[1];\n  var _React$useState5 = React.useState(1),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    activeColumn = _React$useState6[0],\n    setActiveColumn = _React$useState6[1];\n  var defaultRowCount = 5;\n  var defaultColumnCount = 5;\n  var _React$useState7 = React.useState(defaultRowCount),\n    _React$useState8 = _slicedToArray(_React$useState7, 2),\n    rowCount = _React$useState8[0],\n    setRowCount = _React$useState8[1];\n  var _React$useState9 = React.useState(defaultColumnCount),\n    _React$useState10 = _slicedToArray(_React$useState9, 2),\n    columnCount = _React$useState10[0],\n    setColumnCount = _React$useState10[1];\n  var resetState = React.useCallback(function () {\n    setRowCount(defaultRowCount);\n    setColumnCount(defaultColumnCount);\n    setActiveRow(1);\n    setActiveColumn(1);\n  }, []);\n  var createEmptyCell = React.useCallback(function () {\n    var formatAsColumnHeaders = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    return {\n      type: formatAsColumnHeaders ? 'th' : 'td',\n      children: [{\n        type: 'p',\n        children: [{\n          text: ''\n        }]\n      }]\n    };\n  }, []);\n  var createEmptyRow = React.useCallback(function (cellCount) {\n    var formatAsColumnHeaders = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    // should contain at least one <td> or it is not valid that children is empty\n    var row = {\n      type: 'tr',\n      children: []\n    };\n    for (var i = 0; i < cellCount; ++i) {\n      row.children.push(createEmptyCell(formatAsColumnHeaders));\n    }\n    return row;\n  }, [createEmptyCell]);\n\n  /**\n   * @param {number} row Number of rows for the new empty table.\n   * @param {number} column Number of columns for the new empty table.\n   */\n  var insertEmptyTable = React.useCallback(function (_ref2) {\n    var row = _ref2.row,\n      column = _ref2.column;\n    var rows = [createEmptyRow(column, true)];\n    for (var i = 0; i < row - 1; ++i) {\n      rows.push(createEmptyRow(column));\n    }\n    var table = {\n      type: 'table',\n      children: [{\n        type: 'tbody',\n        children: rows\n      }]\n    };\n    Transforms.insertNodes(editor, [table], {\n      at: Editor.end(editor, [])\n    });\n  }, [createEmptyRow, editor]);\n  return __jsx(React.Fragment, null, __jsx(Dropdown, {\n    open: dropdownOpen,\n    onClose: function onClose() {\n      resetState();\n      setDropdownOpen(false);\n    },\n    trigger: __jsx(ToolbarButton, _extends({}, props, {\n      className: \"slate-table-dropdown-button\",\n      onClick: function onClick() {\n        if (dropdownOpen) {\n          resetState();\n        }\n        setDropdownOpen(!dropdownOpen);\n      },\n      icon: tableSVG,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }\n    })),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, __jsx(Dropdown.Menu, {\n    className: \"slate-table-dropdown-menu\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, __jsx(TableContainer, {\n    rowCount: rowCount,\n    columnCount: columnCount,\n    activeColumn: activeColumn,\n    activeRow: activeRow,\n    onCellMouseEnter: function onCellMouseEnter(_ref3) {\n      var row = _ref3.row,\n        column = _ref3.column;\n      if (row > rowCount - 1) {\n        setRowCount(row + 1);\n      } else if (row < rowCount - 1) {\n        setRowCount(defaultRowCount);\n      }\n      if (column > columnCount - 1) {\n        setColumnCount(column + 1);\n      } else if (column < columnCount - 1) {\n        setColumnCount(defaultColumnCount);\n      }\n      if (row !== activeRow) {\n        setActiveRow(row);\n      }\n      if (column !== activeColumn) {\n        setActiveColumn(column);\n      }\n    },\n    onCellMouseLeave: function onCellMouseLeave(_ref4) {\n      var row = _ref4.row,\n        column = _ref4.column;\n    }\n    // `row` and `column` below are 1-based indices\n    ,\n    onCellClick: function onCellClick(_ref5) {\n      var row = _ref5.row,\n        column = _ref5.column;\n      insertEmptyTable({\n        row: row,\n        column: column\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }))));\n};\n_s(TableButton, \"WFsWwdlbuOvLlh1XN03gX3JBiAI=\", false, function () {\n  return [useSlate];\n});\n_c = TableButton;\nexport default TableButton;\nvar _c;\n$RefreshReg$(_c, \"TableButton\");","map":{"version":3,"names":["React","useSlate","Dropdown","ToolbarButton","tableSVG","TableContainer","Editor","Transforms","TableButton","props","editor","useState","dropdownOpen","setDropdownOpen","activeRow","setActiveRow","activeColumn","setActiveColumn","defaultRowCount","defaultColumnCount","rowCount","setRowCount","columnCount","setColumnCount","resetState","useCallback","createEmptyCell","formatAsColumnHeaders","type","children","text","createEmptyRow","cellCount","row","i","push","insertEmptyTable","column","rows","table","insertNodes","at","end"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@plone/volto/packages/volto-slate/src/editor/plugins/Table/TableButton.jsx"],"sourcesContent":["import React from 'react';\nimport { useSlate } from 'slate-react';\nimport { Dropdown } from 'semantic-ui-react';\nimport { ToolbarButton } from '@plone/volto-slate/editor/ui';\n\nimport tableSVG from '@plone/volto/icons/table.svg';\nimport TableContainer from './TableContainer';\nimport './less/table.less';\nimport { Editor, Transforms } from 'slate';\n\nconst TableButton = ({ ...props }) => {\n  const editor = useSlate();\n\n  const [dropdownOpen, setDropdownOpen] = React.useState(false);\n\n  const [activeRow, setActiveRow] = React.useState(1);\n  const [activeColumn, setActiveColumn] = React.useState(1);\n\n  const defaultRowCount = 5;\n  const defaultColumnCount = 5;\n\n  const [rowCount, setRowCount] = React.useState(defaultRowCount);\n  const [columnCount, setColumnCount] = React.useState(defaultColumnCount);\n\n  const resetState = React.useCallback(() => {\n    setRowCount(defaultRowCount);\n    setColumnCount(defaultColumnCount);\n    setActiveRow(1);\n    setActiveColumn(1);\n  }, []);\n\n  const createEmptyCell = React.useCallback((formatAsColumnHeaders = false) => {\n    return {\n      type: formatAsColumnHeaders ? 'th' : 'td',\n      children: [{ type: 'p', children: [{ text: '' }] }],\n    };\n  }, []);\n\n  const createEmptyRow = React.useCallback(\n    (cellCount, formatAsColumnHeaders = false) => {\n      // should contain at least one <td> or it is not valid that children is empty\n      const row = { type: 'tr', children: [] };\n\n      for (let i = 0; i < cellCount; ++i) {\n        row.children.push(createEmptyCell(formatAsColumnHeaders));\n      }\n\n      return row;\n    },\n    [createEmptyCell],\n  );\n\n  /**\n   * @param {number} row Number of rows for the new empty table.\n   * @param {number} column Number of columns for the new empty table.\n   */\n  const insertEmptyTable = React.useCallback(\n    ({ row, column }) => {\n      const rows = [createEmptyRow(column, true)];\n      for (let i = 0; i < row - 1; ++i) {\n        rows.push(createEmptyRow(column));\n      }\n\n      const table = {\n        type: 'table',\n        children: [\n          {\n            type: 'tbody',\n            children: rows,\n          },\n        ],\n      };\n\n      Transforms.insertNodes(editor, [table], {\n        at: Editor.end(editor, []),\n      });\n    },\n    [createEmptyRow, editor],\n  );\n\n  return (\n    <>\n      <Dropdown\n        open={dropdownOpen}\n        onClose={() => {\n          resetState();\n          setDropdownOpen(false);\n        }}\n        trigger={\n          <ToolbarButton\n            {...props}\n            className=\"slate-table-dropdown-button\"\n            onClick={() => {\n              if (dropdownOpen) {\n                resetState();\n              }\n\n              setDropdownOpen(!dropdownOpen);\n            }}\n            icon={tableSVG}\n          ></ToolbarButton>\n        }\n      >\n        <Dropdown.Menu className=\"slate-table-dropdown-menu\">\n          <TableContainer\n            rowCount={rowCount}\n            columnCount={columnCount}\n            activeColumn={activeColumn}\n            activeRow={activeRow}\n            onCellMouseEnter={({ row, column }) => {\n              if (row > rowCount - 1) {\n                setRowCount(row + 1);\n              } else if (row < rowCount - 1) {\n                setRowCount(defaultRowCount);\n              }\n\n              if (column > columnCount - 1) {\n                setColumnCount(column + 1);\n              } else if (column < columnCount - 1) {\n                setColumnCount(defaultColumnCount);\n              }\n\n              if (row !== activeRow) {\n                setActiveRow(row);\n              }\n              if (column !== activeColumn) {\n                setActiveColumn(column);\n              }\n            }}\n            onCellMouseLeave={({ row, column }) => {}}\n            // `row` and `column` below are 1-based indices\n            onCellClick={({ row, column }) => {\n              insertEmptyTable({ row, column });\n            }}\n          />\n        </Dropdown.Menu>\n      </Dropdown>\n    </>\n  );\n};\n\nexport default TableButton;\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}