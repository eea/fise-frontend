{"ast":null,"code":"var _jsxFileName = \"/home/tooler/code/work/forests-frontend/src/develop/volto-addons-forest/src/Collection/Filter.jsx\";\nvar __jsx = React.createElement;\nimport { connect } from 'react-redux';\nimport { Portal } from 'react-portal';\nimport React, { Component } from 'react';\nimport { getIndexValues } from '../actions';\nimport { Menu, Label } from 'semantic-ui-react';\nimport { Button } from 'semantic-ui-react';\nclass Filter extends Component {\n  componentDidMount() {\n    if (this.props.facetFilter) {\n      this.props.getIndexValues(this.props.facetFilter.token);\n    }\n  }\n  componentDidUpdate(prevProps) {\n    if (this.props.facetFilter.token !== prevProps.facetFilter.token) {\n      this.props.getIndexValues(this.props.facetFilter.token);\n    }\n  }\n  computeStats() {\n    const filters = this.props.filters;\n    const results = this.props.results;\n    const facetFilter = this.props.facetFilter;\n    if (!results) return [];\n    const res = {};\n    filters.forEach(f => {\n      res[f] = 0;\n    });\n    results.forEach(item => {\n      filters.forEach(f => {\n        if (item[facetFilter.token] && item[facetFilter.token].indexOf(f) > -1) {\n          res[f] += 1;\n        }\n      });\n    });\n    return res;\n  }\n  render() {\n    const stats = this.computeStats();\n    return __CLIENT__ && this.props.facetFilter && document.querySelector('.content-page .inPageNavigation') ? __jsx(Portal, {\n      node: __CLIENT__ && document.querySelector('.content-page .inPageNavigation'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      className: \"headings_navigation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }\n    }, __jsx(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }\n    }, __jsx(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }\n    }, \"Filter by \", this.props.facetFilter.title)), __jsx(Menu, {\n      vertical: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }\n    }, this.props.filters.map(item => __jsx(Menu.Item, {\n      key: item,\n      name: item,\n      onClick: this.props.handleSelectFilter,\n      active: this.props.selectedValue === item,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 15\n      }\n    }, __jsx(Label, {\n      color: \"teal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }\n    }, stats[item]), item))), this.props.selectedValue ? __jsx(Button, {\n      onClick: () => this.props.handleSelectFilter(null, {\n        name: ''\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }\n    }, \"Clear\") : __jsx(React.Fragment, null))) : '';\n  }\n}\nexport default connect((state, props) => {\n  return {\n    filters: state.index_values && state.index_values.items || []\n  };\n}, {\n  getIndexValues\n})(Filter);","map":{"version":3,"names":["connect","Portal","React","Component","getIndexValues","Menu","Label","Button","Filter","componentDidMount","props","facetFilter","token","componentDidUpdate","prevProps","computeStats","filters","results","res","forEach","f","item","indexOf","render","stats","__CLIENT__","document","querySelector","title","map","handleSelectFilter","selectedValue","name","state","index_values","items"],"sources":["/home/tooler/code/work/forests-frontend/src/develop/volto-addons-forest/src/Collection/Filter.jsx"],"sourcesContent":["import { connect } from 'react-redux';\nimport { Portal } from 'react-portal';\nimport React, { Component } from 'react';\nimport { getIndexValues } from '../actions';\nimport { Menu, Label } from 'semantic-ui-react';\nimport { Button } from 'semantic-ui-react';\n\nclass Filter extends Component {\n  componentDidMount() {\n    if (this.props.facetFilter) {\n      this.props.getIndexValues(this.props.facetFilter.token);\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.facetFilter.token !== prevProps.facetFilter.token) {\n      this.props.getIndexValues(this.props.facetFilter.token);\n    }\n  }\n\n  computeStats() {\n    const filters = this.props.filters;\n    const results = this.props.results;\n    const facetFilter = this.props.facetFilter;\n\n    if (!results) return [];\n\n    const res = {};\n    filters.forEach((f) => {\n      res[f] = 0;\n    });\n    results.forEach((item) => {\n      filters.forEach((f) => {\n        if (\n          item[facetFilter.token] &&\n          item[facetFilter.token].indexOf(f) > -1\n        ) {\n          res[f] += 1;\n        }\n      });\n    });\n    return res;\n  }\n\n  render() {\n    const stats = this.computeStats();\n    return __CLIENT__ &&\n      this.props.facetFilter &&\n      document.querySelector('.content-page .inPageNavigation') ? (\n      <Portal\n        node={\n          __CLIENT__ &&\n          document.querySelector('.content-page .inPageNavigation')\n        }\n      >\n        <div className=\"headings_navigation\">\n          <h5>\n            <b>Filter by {this.props.facetFilter.title}</b>\n          </h5>\n          <Menu vertical>\n            {this.props.filters.map((item) => (\n              <Menu.Item\n                key={item}\n                name={item}\n                onClick={this.props.handleSelectFilter}\n                active={this.props.selectedValue === item}\n              >\n                <Label color=\"teal\">{stats[item]}</Label>\n                {item}\n              </Menu.Item>\n            ))}\n          </Menu>\n          {this.props.selectedValue ? (\n            <Button\n              onClick={() => this.props.handleSelectFilter(null, { name: '' })}\n            >\n              Clear\n            </Button>\n          ) : (\n            <></>\n          )}\n        </div>\n      </Portal>\n    ) : (\n      ''\n    );\n  }\n}\n\nexport default connect(\n  (state, props) => {\n    return {\n      filters: (state.index_values && state.index_values.items) || [],\n    };\n  },\n  {\n    getIndexValues,\n  },\n)(Filter);\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}