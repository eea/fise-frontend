{"ast":null,"code":"import _extends from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/extends.js\";\nimport _toConsumableArray from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _map from \"lodash/map\";\nimport _groupBy from \"lodash/groupBy\";\nimport _toPairs from \"lodash/toPairs\";\nvar _jsxFileName = \"/home/tooler/code/work/forests-frontend/node_modules/@plone/volto/src/components/manage/Widgets/QuerySortOnWidget.jsx\",\n  _s = $RefreshSig$();\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { FormFieldWrapper } from '@plone/volto/components';\nimport { defineMessages, useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\nimport { Option, DropdownIndicator, selectTheme, customSelectStyles } from '@plone/volto/components/manage/Widgets/SelectStyling';\nimport { injectLazyLibs } from '@plone/volto/helpers/Loadable/Loadable';\nvar messages = defineMessages({\n  SortOn: {\n    \"id\": \"Sort on\",\n    \"defaultMessage\": \"Sort on\"\n  },\n  NoSelection: {\n    \"id\": \"No selection\",\n    \"defaultMessage\": \"No selection\"\n  }\n});\nfunction QueryStringSortOrderWidget(props) {\n  _s();\n  var _sortable_indexes$val;\n  var id = props.id,\n    value = props.value,\n    _onChange = props.onChange,\n    reactSelect = props.reactSelect,\n    isDisabled = props.isDisabled;\n  var sortable_indexes = useSelector(function (state) {\n    return state.querystring.sortable_indexes;\n  });\n  var intl = useIntl();\n  var Select = reactSelect[\"default\"];\n  return __jsx(FormFieldWrapper, _extends({}, props, {\n    draggable: false,\n    className: \"query-sort-on-widget\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 5\n    }\n  }), __jsx(Select, {\n    id: \"select-listingblock-sort-on\",\n    name: \"select-listingblock-sort-on\",\n    className: \"react-select-container\",\n    classNamePrefix: \"react-select\"\n    // placeholder=\"Select criteria\"\n    ,\n    isDisabled: isDisabled,\n    options: [{\n      label: intl.formatMessage(messages.NoSelection),\n      value: ''\n    }].concat(_toConsumableArray(_map(_toPairs(_groupBy(_toPairs(sortable_indexes), function (item) {\n      return item[1].group;\n    })), function (group) {\n      return {\n        label: group[0],\n        options: _map(group[1], function (field) {\n          return {\n            label: field[1].title,\n            value: field[0]\n          };\n        })\n      };\n    }))),\n    styles: customSelectStyles,\n    theme: selectTheme,\n    components: {\n      DropdownIndicator: DropdownIndicator,\n      Option: Option\n    },\n    value: {\n      value: value || '',\n      label: value && sortable_indexes ? (_sortable_indexes$val = sortable_indexes[value]) === null || _sortable_indexes$val === void 0 ? void 0 : _sortable_indexes$val.title : value || intl.formatMessage(messages.NoSelection)\n    },\n    onChange: function onChange(field) {\n      _onChange(id, field.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }\n  }));\n}\n_s(QueryStringSortOrderWidget, \"12Xgv+B/o9JOEyMV6KPfEWmsfo4=\", false, function () {\n  return [useSelector, useIntl];\n});\n_c = QueryStringSortOrderWidget;\nexport default injectLazyLibs(['reactSelect'])(QueryStringSortOrderWidget);\nvar _c;\n$RefreshReg$(_c, \"QueryStringSortOrderWidget\");","map":{"version":3,"names":["React","FormFieldWrapper","defineMessages","useIntl","useSelector","Option","DropdownIndicator","selectTheme","customSelectStyles","injectLazyLibs","messages","SortOn","NoSelection","QueryStringSortOrderWidget","props","id","value","onChange","reactSelect","isDisabled","sortable_indexes","state","querystring","intl","Select","label","formatMessage","item","group","options","field","title"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@plone/volto/src/components/manage/Widgets/QuerySortOnWidget.jsx"],"sourcesContent":["import React from 'react';\nimport { FormFieldWrapper } from '@plone/volto/components';\nimport { toPairs, groupBy, map } from 'lodash';\nimport { defineMessages, useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\n\nimport {\n  Option,\n  DropdownIndicator,\n  selectTheme,\n  customSelectStyles,\n} from '@plone/volto/components/manage/Widgets/SelectStyling';\nimport { injectLazyLibs } from '@plone/volto/helpers/Loadable/Loadable';\n\nconst messages = defineMessages({\n  SortOn: {\n    id: 'Sort on',\n    defaultMessage: 'Sort on',\n  },\n  NoSelection: {\n    id: 'No selection',\n    defaultMessage: 'No selection',\n  },\n});\n\nfunction QueryStringSortOrderWidget(props) {\n  const { id, value, onChange, reactSelect, isDisabled } = props;\n  const sortable_indexes = useSelector(\n    (state) => state.querystring.sortable_indexes,\n  );\n  const intl = useIntl();\n  const Select = reactSelect.default;\n\n  return (\n    <FormFieldWrapper\n      {...props}\n      draggable={false}\n      className=\"query-sort-on-widget\"\n    >\n      <Select\n        id=\"select-listingblock-sort-on\"\n        name=\"select-listingblock-sort-on\"\n        className=\"react-select-container\"\n        classNamePrefix=\"react-select\"\n        // placeholder=\"Select criteria\"\n        isDisabled={isDisabled}\n        options={[\n          {\n            label: intl.formatMessage(messages.NoSelection),\n            value: '',\n          },\n          ...map(\n            toPairs(\n              groupBy(toPairs(sortable_indexes), (item) => item[1].group),\n            ),\n            (group) => ({\n              label: group[0],\n              options: map(group[1], (field) => ({\n                label: field[1].title,\n                value: field[0],\n              })),\n            }),\n          ),\n        ]}\n        styles={customSelectStyles}\n        theme={selectTheme}\n        components={{ DropdownIndicator, Option }}\n        value={{\n          value: value || '',\n          label:\n            value && sortable_indexes\n              ? sortable_indexes[value]?.title\n              : value || intl.formatMessage(messages.NoSelection),\n        }}\n        onChange={(field) => {\n          onChange(id, field.value);\n        }}\n      />\n    </FormFieldWrapper>\n  );\n}\n\nexport default injectLazyLibs(['reactSelect'])(QueryStringSortOrderWidget);\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[{"id":"Sort on","defaultMessage":"Sort on"},{"id":"No selection","defaultMessage":"No selection"}]}},"sourceType":"module","externalDependencies":[]}