{"ast":null,"code":"import _extends from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/extends.js\";\nvar _jsxFileName = \"/home/tooler/code/work/forests-frontend/src/develop/volto-datablocks/src/hocs/withBlockData.js\",\n  _this = this;\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport { getBaseUrl } from '@plone/volto/helpers';\nimport { getBlockData } from '../actions';\nvar withBlockData = function withBlockData(WrappedComponent) {\n  var _s = $RefreshSig$();\n  return _s(function (props) {\n    _s();\n    var id = props.id;\n    var dispatch = useDispatch();\n    var blockData = useSelector(function (state) {\n      return state.blockdata[id];\n    });\n    var location = useLocation();\n    var pathname = props.path || location.pathname;\n    React.useEffect(function () {\n      if (!blockData) {\n        dispatch(getBlockData(getBaseUrl(pathname), id)); // || blockData.error\n      }\n      /* eslint-disable-next-line */\n    }, [blockData, dispatch, id, pathname]);\n    return __jsx(WrappedComponent, _extends({}, props, {\n      data: (blockData === null || blockData === void 0 ? void 0 : blockData.data) || props.data,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 10\n      }\n    }));\n  }, \"VPYPmpbr8JPFJTHXxTAhjvg5f4g=\", false, function () {\n    return [useDispatch, useSelector, useLocation];\n  });\n};\nexport default withBlockData;","map":{"version":3,"names":["React","useDispatch","useSelector","useLocation","getBaseUrl","getBlockData","withBlockData","WrappedComponent","props","id","dispatch","blockData","state","blockdata","location","pathname","path","useEffect","data"],"sources":["/home/tooler/code/work/forests-frontend/src/develop/volto-datablocks/src/hocs/withBlockData.js"],"sourcesContent":["import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport { getBaseUrl } from '@plone/volto/helpers';\nimport { getBlockData } from '../actions';\n\nconst withBlockData = (WrappedComponent) => (props) => {\n  const { id } = props;\n  const dispatch = useDispatch();\n  const blockData = useSelector((state) => state.blockdata[id]);\n  const location = useLocation();\n  const pathname = props.path || location.pathname;\n\n  React.useEffect(() => {\n    if (!blockData) {\n      dispatch(getBlockData(getBaseUrl(pathname), id)); // || blockData.error\n    }\n    /* eslint-disable-next-line */\n  }, [blockData, dispatch, id, pathname]);\n\n  return <WrappedComponent {...props} data={blockData?.data || props.data} />;\n};\n\nexport default withBlockData;\n"],"mappings":";;;;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,UAAU,QAAQ,sBAAsB;AACjD,SAASC,YAAY,QAAQ,YAAY;AAEzC,IAAMC,aAAa,GAAG,SAAhBA,aAAa,CAAIC,gBAAgB;EAAA;EAAA,UAAK,UAACC,KAAK,EAAK;IAAA;IACrD,IAAQC,EAAE,GAAKD,KAAK,CAAZC,EAAE;IACV,IAAMC,QAAQ,GAAGT,WAAW,EAAE;IAC9B,IAAMU,SAAS,GAAGT,WAAW,CAAC,UAACU,KAAK;MAAA,OAAKA,KAAK,CAACC,SAAS,CAACJ,EAAE,CAAC;IAAA,EAAC;IAC7D,IAAMK,QAAQ,GAAGX,WAAW,EAAE;IAC9B,IAAMY,QAAQ,GAAGP,KAAK,CAACQ,IAAI,IAAIF,QAAQ,CAACC,QAAQ;IAEhDf,KAAK,CAACiB,SAAS,CAAC,YAAM;MACpB,IAAI,CAACN,SAAS,EAAE;QACdD,QAAQ,CAACL,YAAY,CAACD,UAAU,CAACW,QAAQ,CAAC,EAAEN,EAAE,CAAC,CAAC,CAAC,CAAC;MACpD;MACA;IACF,CAAC,EAAE,CAACE,SAAS,EAAED,QAAQ,EAAED,EAAE,EAAEM,QAAQ,CAAC,CAAC;IAEvC,OAAO,MAAC,gBAAgB,eAAKP,KAAK;MAAE,IAAI,EAAE,CAAAG,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEO,IAAI,KAAIV,KAAK,CAACU,IAAK;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAAG;EAC7E,CAAC;IAAA,QAbkBjB,WAAW,EACVC,WAAW,EACZC,WAAW;EAAA;AAAA,CAW7B;AAED,eAAeG,aAAa"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}