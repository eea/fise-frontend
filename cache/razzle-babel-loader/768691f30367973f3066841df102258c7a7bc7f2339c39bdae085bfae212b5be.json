{"ast":null,"code":"var _jsxFileName = \"/home/tooler/code/work/forests-frontend/src/develop/volto-plotlycharts/src/Blocks/EmbedEEAVisualization/Edit.jsx\";\nvar __jsx = React.createElement;\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nimport React from 'react';\nimport { SidebarPortal } from '@plone/volto/components';\nimport BlockDataForm from '@plone/volto/components/manage/Form/BlockDataForm';\nimport ConnectedChart2 from '@eeacms/volto-plotlycharts/ConnectedChart2';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport '@eeacms/volto-plotlycharts/less/visualization.less';\nimport Schema from './schema';\nconst Edit = props => {\n  const {\n    data,\n    block,\n    onChangeBlock\n  } = props;\n  const schema = React.useMemo(() => Schema(props), [props]);\n  React.useEffect(() => {\n    if (!Object.hasOwn(data, 'download_button')) {\n      onChangeBlock(block, _objectSpread(_objectSpread({}, data), {}, {\n        download_button: true\n      }));\n    }\n    if (!Object.hasOwn(data, 'show_sources')) {\n      onChangeBlock(block, _objectSpread(_objectSpread({}, data), {}, {\n        show_sources: true\n      }));\n    }\n  }, [block, data, onChangeBlock]);\n  return __jsx(React.Fragment, null, __jsx(ConnectedChart2, {\n    id: props.id,\n    data: {\n      chartSources: data.chartSources,\n      data_query: data.data_query,\n      download_button: data.download_button,\n      has_data_query_by_context: data.has_data_query_by_context,\n      has_data_query_by_provider: data.has_data_query_by_provider,\n      use_live_data: true,\n      vis_url: data.vis_url,\n      with_sources: data.show_sources,\n      include_core_metadata_download: data.include_core_metadata_download,\n      include_sources_download: data === null || data === void 0 ? void 0 : data.include_sources_download,\n      include_other_org_download: data === null || data === void 0 ? void 0 : data.include_other_org_download,\n      include_temporal_coverage_download: data === null || data === void 0 ? void 0 : data.include_temporal_coverage_download\n    },\n    hoverFormatXY: data.hover_format_xy,\n    withSources: data.show_sources,\n    width: data.width,\n    height: data.height,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }\n  }), __jsx(SidebarPortal, {\n    selected: props.selected,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, __jsx(BlockDataForm, {\n    block: block,\n    title: schema.title,\n    schema: schema,\n    onChangeField: (id, value) => {\n      props.onChangeBlock(block, _objectSpread(_objectSpread({}, data), {}, {\n        [id]: value\n      }));\n    },\n    formData: data,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  })));\n};\nexport default compose(connect((state, props) => {\n  var _state$content$subreq, _state$content$subreq2, _state$content$subreq3, _state$content$subreq4, _state$content$subreq5, _state$content$subreq6, _state$content$subreq7, _state$content$subreq8, _state$content$subreq9;\n  return {\n    //mapped core metadata data to props. Include more if needed\n    temporal_coverage: (_state$content$subreq = state.content.subrequests) === null || _state$content$subreq === void 0 ? void 0 : (_state$content$subreq2 = _state$content$subreq[props.id]) === null || _state$content$subreq2 === void 0 ? void 0 : (_state$content$subreq3 = _state$content$subreq2.data) === null || _state$content$subreq3 === void 0 ? void 0 : _state$content$subreq3.temporal_coverage,\n    other_organisations: (_state$content$subreq4 = state.content.subrequests) === null || _state$content$subreq4 === void 0 ? void 0 : (_state$content$subreq5 = _state$content$subreq4[props.id]) === null || _state$content$subreq5 === void 0 ? void 0 : (_state$content$subreq6 = _state$content$subreq5.data) === null || _state$content$subreq6 === void 0 ? void 0 : _state$content$subreq6.other_organisations,\n    data_provenance: (_state$content$subreq7 = state.content.subrequests) === null || _state$content$subreq7 === void 0 ? void 0 : (_state$content$subreq8 = _state$content$subreq7[props.id]) === null || _state$content$subreq8 === void 0 ? void 0 : (_state$content$subreq9 = _state$content$subreq8.data) === null || _state$content$subreq9 === void 0 ? void 0 : _state$content$subreq9.data_provenance\n  };\n}, {})\n//add extra hoc here\n)(Edit);","map":{"version":3,"names":["React","SidebarPortal","BlockDataForm","ConnectedChart2","connect","compose","Schema","Edit","props","data","block","onChangeBlock","schema","useMemo","useEffect","Object","hasOwn","download_button","show_sources","id","chartSources","data_query","has_data_query_by_context","has_data_query_by_provider","use_live_data","vis_url","with_sources","include_core_metadata_download","include_sources_download","include_other_org_download","include_temporal_coverage_download","hover_format_xy","width","height","selected","title","value","state","temporal_coverage","content","subrequests","other_organisations","data_provenance"],"sources":["/home/tooler/code/work/forests-frontend/src/develop/volto-plotlycharts/src/Blocks/EmbedEEAVisualization/Edit.jsx"],"sourcesContent":["import React from 'react';\nimport { SidebarPortal } from '@plone/volto/components';\nimport BlockDataForm from '@plone/volto/components/manage/Form/BlockDataForm';\nimport ConnectedChart2 from '@eeacms/volto-plotlycharts/ConnectedChart2';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\n\nimport '@eeacms/volto-plotlycharts/less/visualization.less';\nimport Schema from './schema';\n\nconst Edit = (props) => {\n  const { data, block, onChangeBlock } = props;\n  const schema = React.useMemo(() => Schema(props), [props]);\n\n  React.useEffect(() => {\n    if (!Object.hasOwn(data, 'download_button')) {\n      onChangeBlock(block, {\n        ...data,\n        download_button: true,\n      });\n    }\n    if (!Object.hasOwn(data, 'show_sources')) {\n      onChangeBlock(block, {\n        ...data,\n        show_sources: true,\n      });\n    }\n  }, [block, data, onChangeBlock]);\n  return (\n    <>\n      <ConnectedChart2\n        id={props.id}\n        data={{\n          chartSources: data.chartSources,\n          data_query: data.data_query,\n          download_button: data.download_button,\n          has_data_query_by_context: data.has_data_query_by_context,\n          has_data_query_by_provider: data.has_data_query_by_provider,\n          use_live_data: true,\n          vis_url: data.vis_url,\n          with_sources: data.show_sources,\n          include_core_metadata_download: data.include_core_metadata_download,\n          include_sources_download: data?.include_sources_download,\n          include_other_org_download: data?.include_other_org_download,\n          include_temporal_coverage_download:\n            data?.include_temporal_coverage_download,\n        }}\n        hoverFormatXY={data.hover_format_xy}\n        withSources={data.show_sources}\n        width={data.width}\n        height={data.height}\n      />\n\n      <SidebarPortal selected={props.selected}>\n        <BlockDataForm\n          block={block}\n          title={schema.title}\n          schema={schema}\n          onChangeField={(id, value) => {\n            props.onChangeBlock(block, {\n              ...data,\n              [id]: value,\n            });\n          }}\n          formData={data}\n        />\n      </SidebarPortal>\n    </>\n  );\n};\n\nexport default compose(\n  connect(\n    (state, props) => ({\n      //mapped core metadata data to props. Include more if needed\n      temporal_coverage:\n        state.content.subrequests?.[props.id]?.data?.temporal_coverage,\n      other_organisations:\n        state.content.subrequests?.[props.id]?.data?.other_organisations,\n      data_provenance:\n        state.content.subrequests?.[props.id]?.data?.data_provenance,\n    }),\n    {},\n  ),\n  //add extra hoc here\n)(Edit);\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}