{"ast":null,"code":"import _slicedToArray from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _defineProperty from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectWithoutProperties from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _objectSpread from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _toConsumableArray from \"/home/tooler/code/work/forests-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _sortBy from \"lodash/sortBy\";\nvar _excluded = [\"pluggable\", \"id\", \"dependencies\", \"children\"];\nvar _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$();\n// ported to JS from MIT licensed https://github.com/robik/react-view-slot\n// We've renamed Slot => Pluggable, not to clash with Volto slots\n\nimport React from 'react';\nexport var context = /*#__PURE__*/React.createContext();\nexport function usePluggable(name) {\n  _s();\n  var ctx = React.useContext(context);\n  if (!ctx) {\n    throw new Error('Using <Pluggable> component or usePluggable hook outside of <PluggablesProvider>');\n  }\n  return ctx.pluggables[name] || [];\n}\n\n/**\n\n**/\n_s(usePluggable, \"/dMy7t63NXD4eYACoT93CePwGrg=\");\nexport function Pluggable(props) {\n  _s2();\n  var name = props.name,\n    maxCount = props.maxCount,\n    reversed = props.reversed,\n    children = props.children,\n    params = props.params; // , ...rest\n  var pluggables = usePluggable(name);\n  if (maxCount !== undefined) {\n    pluggables = pluggables.slice(0, maxCount);\n  }\n  if (reversed !== undefined) {\n    pluggables = _toConsumableArray(pluggables).reverse();\n  }\n  if (params && children) {\n    throw Error('Cannot specify render function and params props at the same time');\n  }\n  return React.useMemo(function () {\n    if (children) {\n      return children(pluggables);\n    }\n    return /*#__PURE__*/React.createElement(React.Fragment, {}, pluggables.map(function (R, i) {\n      return /*#__PURE__*/React.createElement(R, _objectSpread({\n        key: i.toString()\n      }, params));\n    }));\n  }, [params, pluggables, children]);\n}\n_s2(Pluggable, \"ZbjoaxxutRQg0EuROCa294WlHbQ=\", false, function () {\n  return [usePluggable];\n});\n_c = Pluggable;\nexport function usePlug(_ref) {\n  _s3();\n  var pluggable = _ref.pluggable,\n    id = _ref.id,\n    renderer = _ref.renderer,\n    dependencies = _ref.dependencies,\n    options = _ref.options;\n  var pluggableContext = React.useContext(context);\n  if (!pluggableContext) {\n    throw new Error('Using <Plug> component or usePlug hook outside of <PluggablesProvider>');\n  }\n  var setPlug = pluggableContext.setPlug,\n    removePlug = pluggableContext.removePlug;\n  var name = options.name,\n    order = options.order,\n    extra = options.extra;\n\n  // Could be that a Plug is empty (or it evaluates and have no children)\n  if (renderer) {\n    Object.assign(renderer, {\n      pluggableName: name,\n      extra: extra,\n      order: order\n    });\n  }\n  React.useEffect(function () {\n    if (renderer) {\n      setPlug(pluggable, id, renderer);\n      return function () {\n        return removePlug(pluggable, id);\n      };\n    }\n  }, dependencies // eslint-disable-line react-hooks/exhaustive-deps\n  );\n}\n_s3(usePlug, \"Dhu0SPkT8wm5j61G7Xr6Vu3kyoE=\");\nexport var Plug = function Plug(_ref2) {\n  _s4();\n  var pluggable = _ref2.pluggable,\n    id = _ref2.id,\n    _ref2$dependencies = _ref2.dependencies,\n    dependencies = _ref2$dependencies === void 0 ? [] : _ref2$dependencies,\n    children = _ref2.children,\n    options = _objectWithoutProperties(_ref2, _excluded);\n  var renderer = children && (typeof children === 'function' ? children : function () {\n    return children;\n  });\n  usePlug({\n    pluggable: pluggable,\n    id: id,\n    renderer: renderer,\n    dependencies: dependencies,\n    options: options\n  });\n  return null;\n};\n_s4(Plug, \"jTdrpvvRV2PciKlbTVTPGpy8w+I=\", false, function () {\n  return [usePlug];\n});\n_c2 = Plug;\nexport function createPluggable(name) {\n  var pluggable = function pluggable(props) {\n    return /*#__PURE__*/React.createElement(Pluggable, _objectSpread({\n      name: name\n    }, props));\n  };\n  pluggable.pluggableName = name;\n  pluggable.Plug = createPlugComponent(name);\n  return pluggable;\n}\nfunction createPlugComponent(pluggableName) {\n  var plugComponent = function plugComponent(props) {\n    return /*#__PURE__*/React.createElement(Plug, _objectSpread({\n      pluggable: pluggableName\n    }, props));\n  };\n  plugComponent.displayName = \"Pluggables(\".concat(pluggableName, \")\");\n  return plugComponent;\n}\n\n/**\n * Creates a Pluggable + Plug pair\n */\nexport function createPluggableAndPlug(name) {\n  var boundPluggable = createPluggable(name);\n  return [boundPluggable, boundPluggable.Plug];\n}\nexport var PluggablesProvider = function PluggablesProvider(_ref3) {\n  _s5();\n  var children = _ref3.children;\n  var setPlug = function setPlug(pluggable, id, renderer) {\n    Object.assign(renderer, {\n      id: id\n    });\n    setPluggables(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        pluggables: _objectSpread(_objectSpread({}, prevState.pluggables), {}, _defineProperty({}, pluggable, _sortBy([].concat(_toConsumableArray((prevState.pluggables[pluggable] || []).filter(function (e) {\n          return e.id !== id;\n        })), [renderer]), function (e) {\n          return e.order || 0;\n        })))\n      });\n    });\n  };\n  var removePlug = function removePlug(pluggable, name) {\n    setPluggables(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        pluggables: _objectSpread(_objectSpread({}, prevState.pluggables), {}, _defineProperty({}, pluggable, _sortBy((prevState.pluggables[pluggable] || []).filter(function (e) {\n          return e.id !== name;\n        }), function (e) {\n          return e.order || 0;\n        })))\n      });\n    });\n  };\n  var initialPluggables = {\n    pluggables: {},\n    setPlug: setPlug,\n    removePlug: removePlug\n  };\n  var _React$useState = React.useState(initialPluggables),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    pluggables = _React$useState2[0],\n    setPluggables = _React$useState2[1];\n  return /*#__PURE__*/React.createElement(context.Provider, {\n    value: pluggables\n  }, children);\n};\n_s5(PluggablesProvider, \"rlCtAOL3/TU4ayP9vWc4PInUxMc=\");\n_c3 = PluggablesProvider;\nexport default Pluggable;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Pluggable\");\n$RefreshReg$(_c2, \"Plug\");\n$RefreshReg$(_c3, \"PluggablesProvider\");","map":{"version":3,"names":["React","context","createContext","usePluggable","name","ctx","useContext","Error","pluggables","Pluggable","props","maxCount","reversed","children","params","undefined","slice","reverse","useMemo","createElement","Fragment","map","R","i","key","toString","usePlug","pluggable","id","renderer","dependencies","options","pluggableContext","setPlug","removePlug","order","extra","Object","assign","pluggableName","useEffect","Plug","createPluggable","createPlugComponent","plugComponent","displayName","createPluggableAndPlug","boundPluggable","PluggablesProvider","setPluggables","prevState","filter","e","initialPluggables","useState","Provider","value"],"sources":["/home/tooler/code/work/forests-frontend/node_modules/@plone/volto/src/components/manage/Pluggable/index.js"],"sourcesContent":["// ported to JS from MIT licensed https://github.com/robik/react-view-slot\n// We've renamed Slot => Pluggable, not to clash with Volto slots\n\nimport React from 'react';\nimport { sortBy } from 'lodash';\n\nexport const context = React.createContext();\n\nexport function usePluggable(name) {\n  const ctx = React.useContext(context);\n\n  if (!ctx) {\n    throw new Error(\n      'Using <Pluggable> component or usePluggable hook outside of <PluggablesProvider>',\n    );\n  }\n\n  return ctx.pluggables[name] || [];\n}\n\n/**\n\n**/\nexport function Pluggable(props) {\n  const { name, maxCount, reversed, children, params } = props; // , ...rest\n  let pluggables = usePluggable(name);\n\n  if (maxCount !== undefined) {\n    pluggables = pluggables.slice(0, maxCount);\n  }\n  if (reversed !== undefined) {\n    pluggables = [...pluggables].reverse();\n  }\n\n  if (params && children) {\n    throw Error(\n      'Cannot specify render function and params props at the same time',\n    );\n  }\n\n  return React.useMemo(() => {\n    if (children) {\n      return children(pluggables);\n    }\n\n    return React.createElement(\n      React.Fragment,\n      {},\n      pluggables.map((R, i) =>\n        React.createElement(R, { key: i.toString(), ...params }),\n      ),\n    );\n  }, [params, pluggables, children]);\n}\n\nexport function usePlug({ pluggable, id, renderer, dependencies, options }) {\n  const pluggableContext = React.useContext(context);\n  if (!pluggableContext) {\n    throw new Error(\n      'Using <Plug> component or usePlug hook outside of <PluggablesProvider>',\n    );\n  }\n  const { setPlug, removePlug } = pluggableContext;\n  const { name, order, extra } = options;\n\n  // Could be that a Plug is empty (or it evaluates and have no children)\n  if (renderer) {\n    Object.assign(renderer, { pluggableName: name, extra, order });\n  }\n\n  React.useEffect(\n    () => {\n      if (renderer) {\n        setPlug(pluggable, id, renderer);\n        return () => removePlug(pluggable, id);\n      }\n    },\n    dependencies, // eslint-disable-line react-hooks/exhaustive-deps\n  );\n}\n\nexport const Plug = ({\n  pluggable,\n  id,\n  dependencies = [],\n  children,\n  ...options\n}) => {\n  const renderer =\n    children && (typeof children === 'function' ? children : () => children);\n  usePlug({ pluggable, id, renderer, dependencies, options });\n  return null;\n};\n\nexport function createPluggable(name) {\n  const pluggable = (props) =>\n    React.createElement(Pluggable, { name, ...props });\n  pluggable.pluggableName = name;\n  pluggable.Plug = createPlugComponent(name);\n  return pluggable;\n}\n\nfunction createPlugComponent(pluggableName) {\n  const plugComponent = (props) =>\n    React.createElement(Plug, { pluggable: pluggableName, ...props });\n  plugComponent.displayName = `Pluggables(${pluggableName})`;\n  return plugComponent;\n}\n\n/**\n * Creates a Pluggable + Plug pair\n */\nexport function createPluggableAndPlug(name) {\n  const boundPluggable = createPluggable(name);\n  return [boundPluggable, boundPluggable.Plug];\n}\n\nexport const PluggablesProvider = ({ children }) => {\n  const setPlug = (pluggable, id, renderer) => {\n    Object.assign(renderer, { id });\n\n    setPluggables((prevState) => ({\n      ...prevState,\n      pluggables: {\n        ...prevState.pluggables,\n        [pluggable]: sortBy(\n          [\n            ...(prevState.pluggables[pluggable] || []).filter(\n              (e) => e.id !== id,\n            ),\n            renderer,\n          ],\n          (e) => e.order || 0,\n        ),\n      },\n    }));\n  };\n\n  const removePlug = (pluggable, name) => {\n    setPluggables((prevState) => ({\n      ...prevState,\n      pluggables: {\n        ...prevState.pluggables,\n        [pluggable]: sortBy(\n          (prevState.pluggables[pluggable] || []).filter((e) => e.id !== name),\n          (e) => e.order || 0,\n        ),\n      },\n    }));\n  };\n\n  const initialPluggables = {\n    pluggables: {},\n    setPlug,\n    removePlug,\n  };\n\n  const [pluggables, setPluggables] = React.useState(initialPluggables);\n  return React.createElement(context.Provider, { value: pluggables }, children);\n};\n\nexport default Pluggable;\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}